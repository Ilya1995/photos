(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("os0x"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},"/uUt":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return n=>n.lift(new o(t,e))}class o{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new s(t,this.compare,this.keySelector))}}class s extends r.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}},0:function(t,e,n){t.exports=n("zUnb")},"1G5W":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("zx2A");function i(t){return e=>e.lift(new o(t))}class o{constructor(t){this.notifier=t}call(t,e){const n=new s(t),i=Object(r.c)(this.notifier,new r.a(n));return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}class s extends r.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2Vo4":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("XNiG"),i=n("9ppp");class o extends r.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.a;return this._value}next(t){super.next(this._value=t)}}},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"4I5i":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})()},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("os0x"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.F)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.z)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.E)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=y.apply(null,i):n+="object"==typeof i?Object(o.F)(i):i,n+=" "}return n},v=null,m=!0,_=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,v=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?v=t:(v=null,f.remove("logging_enabled"))},b=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===v&&!0===f.get("logging_enabled")&&_(!0)),v){var n=y.apply(null,t);v(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];b.apply(void 0,Object(i.f)([t],e))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(i.f)(t));d.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(i.f)(t));throw d.error(n),new Error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(i.f)(t));d.warn(n)},S=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",x="[MAX_NAME]",I=function(t,e){if(t===e)return 0;if(t===T||e===x)return-1;if(e===T||t===x)return 1;var n=D(t),r=D(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},P=function(t,e){return t===e?0:t<e?-1:1},j=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.F)(e))},A=function(t){if("object"!=typeof t||null===t)return Object(o.F)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.F)(e[i]),r+=":",r+=A(t[e[i]]);return r+"}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function k(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var N=function(t){var e,n,r,i,s;Object(o.d)(!S(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},M=new RegExp("^-?(0*)\\d{1,10}$"),D=function(t){if(M.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},L=function(t){try{t()}catch(e){setTimeout(function(){throw E("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},U=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function V(){return new U("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function z(t){return t.pieces_.length-t.pieceNum_}function B(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new U(t.pieces_,e)}function H(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function W(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function G(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function K(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new U(e,0)}function Q(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof U)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new U(n,0)}function $(t){return t.pieceNum_>=t.pieces_.length}function Y(t,e){var n=q(t),r=q(e);if(null===n)return e;if(n===r)return Y(B(t),B(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function X(t,e){for(var n=G(t,0),r=G(e,0),i=0;i<n.length&&i<r.length;i++){var o=I(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Z(t,e){if(z(t)!==z(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function J(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(z(t)>z(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var tt,et,nt,rt,it,ot,st,at,ut,ct=function(){function t(t,e){this.errorPrefix_=e,this.parts_=G(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.D)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.D)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.D)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),lt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ht="websocket",ft="long_polling",dt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.d)("string"==typeof t,"typeof type must == string"),Object(o.d)("object"==typeof e,"typeof params must == object"),t===ht)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==ft)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return k(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}(),pt=function(t,e){var n=gt(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new dt(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new U(n.pathString)}},gt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):E("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},yt=/[\[\].#$\/\u0000-\u001F\u007F]/,vt=/[\[\].#$\u0000-\u001F\u007F]/,mt=10485760,_t=function(t){return"string"==typeof t&&0!==t.length&&!yt.test(t)},bt=function(t){return"string"==typeof t&&0!==t.length&&!vt.test(t)},wt=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!S(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},Ot=function(t,e,n,r,i){i&&void 0===n||Ct(Object(o.l)(t,e,i),n,r)},Ct=function(t,e,n){var r=n instanceof U?new ct(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(S(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>mt/3&&Object(o.D)(e)>mt)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(k(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!_t(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),Ct(t,n,r),r.pop()}),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Et=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.l)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];k(n,function(t,e){var n=new U(t);if(Ct(s,e,Q(r,n)),".priority"===H(n)&&!wt(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=G(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!_t(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(X);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&J(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},St=function(t,e,n,r){if(!r||void 0!==n){if(S(n))throw new Error(Object(o.l)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!wt(n))throw new Error(Object(o.l)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Tt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},xt=function(t,e,n,r){if(!(r&&void 0===n||_t(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},It=function(t,e,n,r){if(!(r&&void 0===n||bt(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Pt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),It(t,e,n,r)},jt=function(t,e){if(".info"===q(e))throw new Error(t+" failed = Can't modify data under /.info/")},At=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!_t(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),bt(t)}(r))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Rt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,r)+"must be a boolean.")},kt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.G)("OnDisconnect.cancel",0,1,arguments.length),Object(o.H)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.G)("OnDisconnect.remove",0,1,arguments.length),jt("OnDisconnect.remove",this.path_),Object(o.H)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.G)("OnDisconnect.set",1,2,arguments.length),jt("OnDisconnect.set",this.path_),Ot("OnDisconnect.set",1,t,this.path_,!1),Object(o.H)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.G)("OnDisconnect.setWithPriority",2,3,arguments.length),jt("OnDisconnect.setWithPriority",this.path_),Ot("OnDisconnect.setWithPriority",1,t,this.path_,!1),St("OnDisconnect.setWithPriority",2,e,!1),Object(o.H)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.G)("OnDisconnect.update",1,2,arguments.length),jt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Et("OnDisconnect.update",1,t,this.path_,!1),Object(o.H)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Nt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.G)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Mt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Dt=(tt=0,et=[],function(t){var e,n=t===tt;tt=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=Mt.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===et[e];e--)et[e]=0;et[e]++}else for(e=0;e<12;e++)et[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=Mt.charAt(et[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),Lt=function(t){if("2147483647"===t)return"-";var e=D(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return x;var o=Mt.charAt(Mt.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},Ft=function(t){if("-2147483648"===t)return T;var e=D(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Mt.charAt(Mt.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},Ut=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Vt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ut(T,t),r=new Ut(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ut.MIN},t}(),qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return nt},set:function(t){nt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return I(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ut.MIN},e.prototype.maxPost=function(){return new Ut(x,nt)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ut(t,nt)},e.prototype.toString=function(){return".key"},e}(Vt),zt=new qt,Bt=function(t){return"number"==typeof t?"number:"+N(t):"string:"+t},Ht=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===rt||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===rt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Wt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ht(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return it},set:function(t){it=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return $(e)?this:".priority"===q(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=q(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===z(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(B(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Bt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?N(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Gt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?I(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ut.MIN},e.prototype.maxPost=function(){return new Ut(x,new Wt("[PRIORITY-POST]",st))},e.prototype.makePost=function(t,e){var n=ot(t);return new Ut(e,new Wt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Vt)),Kt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Qt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Yt.EMPTY_NODE,this.right=null!=o?o:Yt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Yt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Yt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),$t=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Qt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Yt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Qt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Qt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Kt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Kt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Kt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Kt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new $t,t}(),Xt=Math.log(2),Zt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Xt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Jt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Qt(s,o.node,Qt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Qt(s,o.node,Qt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Qt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Qt.BLACK):(a(h,Qt.BLACK),a(h,Qt.RED))}return o}(new Zt(t.length));return new Yt(r||e,o)},te={},ee=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(te&&Gt,"ChildrenNode.ts has not been loaded"),at=at||new t({".priority":te},{".priority":Gt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.C)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Yt?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==zt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Ut.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Jt(s,e.getCompare()):te;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.A)(this.indexes_,function(t,i){var s=Object(o.C)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===te){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Ut.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Jt(a,s.getCompare())}return te}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Ut(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.A)(this.indexes_,function(t){if(t===te)return t;var r=n.get(e.name);return r?t.remove(new Ut(e.name,r)):t}),this.indexSet_)},t}();function ne(t,e){return I(t.name,e.name)}function re(t,e){return I(t,e)}var ie=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ht(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return ut||(ut=new t(new Yt(re),null,ee.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||ut},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?ut:e},t.prototype.getChild=function(t){var e=q(t);return null===e?this:this.getImmediateChild(e).getChild(B(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Ut(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?ut:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=q(t);if(null===n)return e;Object(o.d)(".priority"!==q(t)||1===z(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(B(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Gt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Bt(this.getPriority().val())+":"),this.forEachChild(Gt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ut(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ut(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ut(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Ut.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Ut.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===oe?-1:0},t.prototype.withIndex=function(e){if(e===zt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===zt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Gt),r=e.getIterator(Gt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===zt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),oe=new(function(t){function e(){return t.call(this,new Yt(re),ie.EMPTY_NODE,ee.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ie.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ie));function se(t,e){if(void 0===e&&(e=null),null===t)return ie.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Wt(t,se(e));if(t instanceof Array){var n=ie.EMPTY_NODE;return k(t,function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=se(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(se(e))}var r=[],i=!1;if(k(t,function(t,e){if("."!==t.substring(0,1)){var n=se(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ut(t,n)))}}),0===r.length)return ie.EMPTY_NODE;var s=Jt(r,ne,function(t){return t.name},re);if(i){var a=Jt(r,Gt.getCompare());return new ie(s,se(e),new ee({".priority":a},{".priority":Gt}))}return new ie(s,se(e),ee.Default)}Object.defineProperties(Ut,{MIN:{value:new Ut(T,ie.EMPTY_NODE)},MAX:{value:new Ut(x,oe)}}),qt.__EMPTY_NODE=ie.EMPTY_NODE,Wt.__childrenNodeConstructor=ie,rt=oe,st=oe,ot=se;var ae=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?I(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ut.MIN},e.prototype.maxPost=function(){return Ut.MAX},e.prototype.makePost=function(t,e){var n=se(t);return new Ut(e,n)},e.prototype.toString=function(){return".value"},e}(Vt)),ue=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!$(e)&&".priority"!==q(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?I(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=se(t),r=ie.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ut(e,r)},e.prototype.maxPost=function(){var t=ie.EMPTY_NODE.updateChild(this.indexPath_,oe);return new Ut(x,t)},e.prototype.toString=function(){return G(this.indexPath_,0).join("/")},e}(Vt),ce=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.G)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.G)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.G)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.G)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.G)("DataSnapshot.child",0,1,arguments.length),e=String(e),It("DataSnapshot.child",1,e,!1);var n=new U(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Gt)},t.prototype.hasChild=function(t){Object(o.G)("DataSnapshot.hasChild",1,1,arguments.length),It("DataSnapshot.hasChild",1,t,!1);var e=new U(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.G)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.G)("DataSnapshot.forEach",1,1,arguments.length),Object(o.H)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Gt))})},t.prototype.hasChildren=function(){return Object(o.G)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.G)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.G)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),le=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.F)(this.snapshot.exportVal())},t}(),he=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),fe=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new le("value",this,new ce(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new he(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),de=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new he(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new le(t.type,this,new ce(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}();function pe(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ye(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ve(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var me,_e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ye(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(ve(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Gt,function(t,r){e.hasChild(t)||n.trackChildChange(ye(t,r))}),e.isLeafNode()||e.forEachChild(Gt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ve(e,r,i))}else n.trackChildChange(ge(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ie.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new _e(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ut(e,n))||(n=ie.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ie.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ie.EMPTY_NODE);var i=this;return e.forEachChild(Gt,function(t,e){i.matches(new Ut(t,e))||(r=r.updateImmediateChild(t,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),we=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ut(e,n))||(n=ie.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ie.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ie.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ie.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ie.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new Ut(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ve(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ye(e,f));var g=u.updateImmediateChild(e,ie.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(ge(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(ye(l.name,l.node)),i.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ie.EMPTY_NODE)):t},t}(),Oe=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Gt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ce(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Ee(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Se(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Te(t,e,n){var r;return t.index_===zt?("string"==typeof e&&(e=Lt(e)),r=Se(t,e,n)):r=Se(t,e,null==n?x:Lt(n)),r.startAfterSet_=!0,r}function xe(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ie(t,e,n){var r;return t.index_===zt?("string"==typeof e&&(e=Ft(e)),r=xe(t,e,n)):r=xe(t,e,null==n?T:Ft(n)),r.endBeforeSet_=!0,r}function Pe(t,e){var n=t.copy();return n.index_=e,n}function je(t){var e,n={};return t.isDefault()||(t.index_===Gt?e="$priority":t.index_===ae?e="$value":t.index_===zt?e="$key":(Object(o.d)(t.index_ instanceof ue,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.F)(e),t.startSet_&&(n.startAt=Object(o.F)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.F)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.F)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.F)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var Ae=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(me,"Reference.ts has not been loaded"),me},set:function(t){me=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===zt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Gt){if(null!=e&&!wt(e)||null!=n&&!wt(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof ue||t.getIndex()===ae,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.G)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.G)("Query.on",2,4,arguments.length),Tt("Query.on",1,e,!1),Object(o.H)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new fe(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new de(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.G)("Query.off",0,3,arguments.length),Tt("Query.off",1,t,!0),Object(o.H)("Query.off",2,e,!0),Object(o.I)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new fe(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new de(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.G)("Query.once",1,4,arguments.length),Tt("Query.once",1,e,!1),Object(o.H)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.G)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,Ce(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.G)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,Ee(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.G)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');It("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new U(e);if($(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new ue(n),i=Pe(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.G)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=Pe(this.queryParams_,zt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.G)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=Pe(this.queryParams_,Gt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.G)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=Pe(this.queryParams_,ae);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAt",0,2,arguments.length),Ot("Query.startAt",1,e,this.path,!0),xt("Query.startAt",2,n,!0);var r=Se(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAfter",0,2,arguments.length),Ot("Query.startAfter",1,e,this.path,!1),xt("Query.startAfter",2,n,!0);var r=Te(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endAt",0,2,arguments.length),Ot("Query.endAt",1,e,this.path,!0),xt("Query.endAt",2,n,!0);var r=xe(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endBefore",0,2,arguments.length),Ot("Query.endBefore",1,e,this.path,!1),xt("Query.endBefore",2,n,!0);var r=Ie(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.G)("Query.equalTo",1,2,arguments.length),Ot("Query.equalTo",1,t,this.path,!1),xt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.G)("Query.toString",0,0,arguments.length),this.repo.toString()+W(this.path)},t.prototype.toJSON=function(){return Object(o.G)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Gt&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=A(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.G)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=Z(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.H)(t,3,r.cancel,!0),r.context=n,Object(o.I)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Re=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ke=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=Q(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),Ne=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Me(t[".sv"],e,n):"object"==typeof t[".sv"]?De(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Me=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},De=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},Le=function(t,e,n,r){return Ue(e,new ke(n,t),r)},Fe=function(t,e,n){return Ue(t,new Re(e),n)};function Ue(t,e,n){var r,i=t.getPriority().val(),o=Ne(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Ne(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Wt(a,se(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Wt(o))),u.forEachChild(Gt,function(t,i){var o=Ue(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var Ve=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!$(t)&&this.children.size>0){var e=q(t);return t=B(t),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if($(e))this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=q(e);this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=B(e),i.remember(e,n)}},t.prototype.forget=function(t){if($(t))return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Gt,function(t,e){n.remember(new U(t),e)}),this.forget(t)}if(this.children.size>0){var r=q(t);return t=B(t),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new U(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),qe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function ze(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Be,He=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=qe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if($(this.path)){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new U(e));return new t(V(),n,this.revert)}return Object(o.d)(q(this.path)===e,"operationForChild called for unrelated child."),new t(B(this.path),this.affectedTree,this.revert)},t}(),We=function(){function t(t,e){void 0===e&&(Be||(Be=new Yt(P)),e=Be),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return k(e,function(t,e){n=n.set(new U(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:V(),value:this.value};if($(t))return null;var n=q(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(B(t),e);return null!=i?{path:Q(new U(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if($(e))return this;var n=q(e),r=this.children.get(n);return null!==r?r.subtree(B(e)):new t(null)},t.prototype.set=function(e,n){if($(e))return new t(n,this.children);var r=q(e),i=(this.children.get(r)||new t(null)).set(B(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if($(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=q(e),r=this.children.get(n);if(r){var i=r.remove(B(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if($(t))return this.value;var e=q(t),n=this.children.get(e);return n?n.get(B(t)):null},t.prototype.setTree=function(e,n){if($(e))return n;var r,i=q(e),o=(this.children.get(i)||new t(null)).setTree(B(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(V(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(Q(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,V(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if($(t))return null;var i=q(t),o=this.children.get(i);return o?o.findOnPath_(B(t),Q(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,V(),e)},t.prototype.foreachOnPath_=function(e,n,r){if($(e))return this;this.value&&r(n,this.value);var i=q(e),o=this.children.get(i);return o?o.foreachOnPath_(B(e),Q(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(V(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(Q(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Ge=function(){function t(t,e){this.source=t,this.path=e,this.type=qe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return $(this.path)?new t(this.source,V()):new t(this.source,B(this.path))},t}(),Ke=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=qe.OVERWRITE}return t.prototype.operationForChild=function(e){return $(this.path)?new t(this.source,V(),this.snap.getImmediateChild(e)):new t(this.source,B(this.path),this.snap)},t}(),Qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=qe.MERGE}return t.prototype.operationForChild=function(e){if($(this.path)){var n=this.children.subtree(new U(e));return n.isEmpty()?null:n.value?new Ke(this.source,V(),n.value):new t(this.source,V(),n)}return Object(o.d)(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,B(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),$e=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if($(t))return this.isFullyInitialized()&&!this.filtered_;var e=q(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ye=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new $e(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new $e(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}(),Xe=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ve(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ye(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ve(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ze=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Je=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new $e(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),tn=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),en=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.d)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.d)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Xe;if(n.type===qe.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!$(c.path),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===qe.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===qe.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==qe.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new tn(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if($(e))if(Object(o.d)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof ie?c:ie.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=q(e);if(".priority"===f){Object(o.d)(1===z(e),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):s.getNode()}else{var g=B(e),y=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);y=null!=v?s.getNode().getImmediateChild(f).updateChild(g,v):s.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(s.getNode(),f,y,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||$(e),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if($(e))a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=q(e);if(!u.isCompleteForPath(e)&&z(e)>1)return t;var f=B(e),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,Ze,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||$(e),c.filtersNodes()),g=new Je(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Je(r,t,i);if($(e))a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=q(e);if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=B(e),f=u.getNode().getImmediateChild(l),d=void 0;if($(h))d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===H(h)&&p.getChild(K(h)).isEmpty()?p:p.updateChild(h,n):ie.EMPTY_NODE}if(f.equals(d))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var l=Q(n,r);t.cacheHasChild_(e,q(l))&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),r.foreach(function(r,c){var l=Q(n,r);t.cacheHasChild_(e,q(l))||(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=$(e)?n:new We(null).setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new U(e),h,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new U(e),f,r,i,o,s)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if($(e)&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if($(e)){var u=new We(null);return a.getNode().forEachChild(zt,function(t,e){u=u.set(new U(t),e)}),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new We(null);return n.foreach(function(t,n){var r=Q(e,t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||$(e),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ze,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Je(n,t,r),u=t.getEventCache().getNode(),c=void 0;if($(e)||".priority"===q(e)){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.d)(h instanceof ie,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=q(e),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,B(e),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,ie.EMPTY_NODE,B(e),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(V()),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),nn=function(){return function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}}();function rn(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.e)("Should only compare child_ events.");var r=new Ut(e.childName,e.snapshotNode),i=new Ut(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}var on,sn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new _e(r.getIndex()),o=(n=r).loadsAllData()?new _e(n.getIndex()):n.hasLimit()?new we(n):new be(n);this.processor_=new en(o);var s=e.getServerCache(),a=e.getEventCache(),u=i.updateFullNode(ie.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ie.EMPTY_NODE,a.getNode(),null),l=new $e(u,s.isFullyInitialized(),i.filtersNodes()),h=new $e(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=new Ye(h,l),this.eventGenerator_=new nn(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!$(t)&&!e.getImmediateChild(q(t)).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.d)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===qe.MERGE&&null!==t.source.queryId&&(Object(o.d)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.d)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.d)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Gt,function(t,e){n.push(ge(t,e))}),e.isFullyInitialized()&&n.push(pe(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),rn(t,i,"child_removed",e,r,n),rn(t,i,"child_added",e,r,n),rn(t,i,"child_moved",o,r,n),rn(t,i,"child_changed",e,r,n),rn(t,i,"value",e,r,n),i}(this.eventGenerator_,t,e,n?[n]:this.eventRegistrations_)},t}(),an=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(on,"Reference.ts has not been loaded"),on},set:function(t){Object(o.d)(!on,"__referenceConstructor has already been defined"),on=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.d)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.getView=function(t,e,n,r){var i=t.queryIdentifier(),o=this.views.get(i);if(!o){var s=e.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof ie?(s=e.calcCompleteEventChildren(n),a=!1):(s=ie.EMPTY_NODE,a=!1);var u=new Ye(new $e(s,a,!1),new $e(n,r,!1));return new sn(t,u)}return o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=this.getView(t,n,r,i);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),o),o.addEventRegistration(e),o.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(i.e)(f.value,2),g=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(g),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(y){o={error:y}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),un=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new We(null))},t}();function cn(t,e,n){if($(e))return new un(new We(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Y(i,e);return o=o.updateChild(s,n),new un(t.writeTree_.set(i,o))}var a=new We(n),u=t.writeTree_.setTree(e,a);return new un(u)}function ln(t,e,n){var r=t;return k(n,function(t,n){r=cn(r,Q(e,t),n)}),r}function hn(t,e){if($(e))return un.empty();var n=t.writeTree_.setTree(e,new We(null));return new un(n)}function fn(t,e){return null!=dn(t,e)}function dn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Y(n.path,e)):null}function pn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Gt,function(t,n){e.push(new Ut(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Ut(t,n.value))}),e}function gn(t,e){if($(e))return t;var n=dn(t,e);return new un(null!=n?new We(n):t.writeTree_.subtree(e))}function yn(t){return t.writeTree_.isEmpty()}function vn(t,e){return mn(V(),t.writeTree_,e)}function mn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.d)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=mn(Q(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(Q(t,".priority"),r)),n}var _n=function(){function t(){this.visibleWrites_=un.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new bn(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.d)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=cn(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.d)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=ln(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:J(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=hn(this.visibleWrites_,r.path):k(r.children,function(t){e.visibleWrites_=hn(e.visibleWrites_,Q(r.path,t))}),!0))},t.prototype.getCompleteWriteData=function(t){return dn(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=gn(this.visibleWrites_,e);return!i&&yn(o)?n:i||null!=n||fn(o,V())?vn(t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(J(t.path,e)||J(e,t.path))},e),n||ie.EMPTY_NODE):null}var s=dn(this.visibleWrites_,e);if(null!=s)return s;var a=gn(this.visibleWrites_,e);return yn(a)?n:null!=n||fn(a,V())?vn(a,n||ie.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=ie.EMPTY_NODE,r=dn(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Gt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=gn(this.visibleWrites_,t);return e.forEachChild(Gt,function(t,e){var r=vn(gn(i,new U(t)),e);n=n.updateImmediateChild(t,r)}),pn(i).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return pn(gn(this.visibleWrites_,t)).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.d)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=Q(t,e);if(fn(this.visibleWrites_,i))return null;var s=gn(this.visibleWrites_,i);return yn(s)?r.getChild(e):vn(s,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=Q(t,e),i=dn(this.visibleWrites_,r);return null!=i?i:n.isCompleteForChild(e)?vn(gn(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return dn(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=gn(this.visibleWrites_,t),u=dn(a,V());if(null!=u)s=u;else{if(null==e)return[];s=vn(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return J(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&J(Q(t.path,n),e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,V()),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=un.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)J(n,a)?r=cn(r,u=Y(n,a),s.snap):J(a,n)&&(u=Y(a,n),r=cn(r,V(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(J(n,a))r=ln(r,u=Y(n,a),s.children);else if(J(a,n))if($(u=Y(a,n)))r=ln(r,V(),s.children);else{var c=Object(o.C)(s.children,q(u));if(c){var l=c.getChild(B(u));r=cn(r,V(),l)}}}}}return r},t}(),bn=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(Q(this.treePath_,t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(Q(this.treePath_,e),this.writeTree_)},t}(),wn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new We(null),this.pendingWriteTree_=new _n,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Ke({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=We.fromObject(e);return this.applyOperationToSyncPoints_(new Qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=new We(null);return null!=n.snap?r=r.set(V(),!0):k(n.children,function(t){r=r.set(new U(t),!0)}),this.applyOperationToSyncPoints_(new He(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Ke({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))},t.prototype.applyServerMerge=function(t,e){var n=We.fromObject(e);return this.applyOperationToSyncPoints_(new Qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Ge({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Y(s,e),c=new Ke(ze(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Y(s,e),c=We.fromObject(n),l=new Qe(ze(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=Y(o,e),u=new Ge(ze(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=Y(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(V())):(u=new an,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ie.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(V());n&&(i=i.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.d)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var g=d[p],y=g.getQuery(),v=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),v.hashFn,v.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=Y(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.getServerValue=function(t){var e=t.path,n=null;this.syncPointTree_.foreachOnPath(e,function(t,r){var i=Y(t,e);n=n||r.getCompleteServerCache(i)});var r=this.syncPointTree_.get(e);r?n=n||r.getCompleteServerCache(V()):(r=new an,this.syncPointTree_=this.syncPointTree_.set(e,r));var i=null!=n,o=i?new $e(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(t.path);return r.getView(t,s,i?o.getNode():ie.EMPTY_NODE,i).getCompleteNode()},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),k(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.d)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!$(t)&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),k(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||ie.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new U(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.d)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(V()))},t.prototype.applyOperationHelper_=function(t,e,n,r){if($(t.path))return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(V());null==n&&null!=i&&(n=i.getCompleteServerCache(V()));var o=[],s=q(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(V());null==n&&null!=o&&(n=o.getCompleteServerCache(V()));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),On=function(){function t(){this.rootNode_=ie.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Cn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),En=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Cn),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Sn=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&k(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Tn=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Sn(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;k(e,function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),xn=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function In(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Z(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Pn(t,e,n){In(t,n),An(t,function(t){return Z(t,e)})}function jn(t,e,n){In(t,n),An(t,function(t){return J(t,e)||J(e,t)})}function An(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Rn(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Rn(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();v&&b("event: "+n.toString()),L(r)}}}var kn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),Nn=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(kn),Mn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.t)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(kn),Dn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&L(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Ln="start",Fn="close",Un=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=En.getCollection(e),this.urlFn=function(t){return e.connectionURL(ft,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Dn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.v)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Vn(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===Ln)n.id=s,n.password=a;else{if(o!==Fn)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&lt.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.v)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=R(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.v)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.F)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Vn=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.v)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){b("frame writing exception"),u.stack&&b(u.stack),b(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||b("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.v)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){b("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),qn="";function zn(t){qn=t}var Bn=null;"undefined"!=typeof MozWebSocket?Bn=MozWebSocket:"undefined"!=typeof WebSocket&&(Bn=WebSocket);var Hn=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=En.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.v)()&&"undefined"!=typeof location&&location.hostname&&lt.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(ht,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.v)()){var r={headers:{"User-Agent":"Firebase/5/"+qn+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Bn(this.connURL,[],r)}else this.mySock=new Bn(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Bn&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.z)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Wn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Un,Hn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Hn&&Hn.isAvailable(),s=o&&!Hn.previouslyFailed();if(e.webSocketOnly&&(o||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Hn];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Gn=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Wn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=j("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?O("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Kn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Qn=1e3,$n=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Qn,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.v)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Nn.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Mn.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.F)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.C)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();E("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.n)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.y)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.F)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+Object(o.F)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Qn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Qn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then(function(t){c?b("getToken() completed but was canceled"):(b("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new Gn(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){E(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&E(e),h())})}},e.prototype.interrupt=function(t){b("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){b("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.r)(this.interruptReasons_)&&(this.reconnectDelay_=Qn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return A(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new U(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){b("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.v)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+qn.replace(/\./g,"-")]=1,Object(o.t)()?t["framework.cordova"]=1:Object(o.w)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Mn.getInstance().currentlyOnline();return Object(o.r)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Kn),Yn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=je(t.getQueryParams());this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.C)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=je(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.B)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.z)(u.responseText)}catch(e){E("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&E("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(Kn),Xn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),Zn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Xn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof U?e:new U(e),r=this,i=q(n);null!==i;)r=new t(i,r,Object(o.C)(r.node_.children,i)||new Xn),i=q(n=B(n));return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.d)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;k(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new U(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.h)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),Jn="repo_interrupt",tr=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({}),er=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Ve,this.transactionQueueTree_=new Zn,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=En.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Yn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.F)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new $n(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),this.statsReporter_=En.getOrCreateReporter(this.repoInfo_,function(){return new Tn(t.stats_,t.server_)}),this.infoData_=new On,this.infoSyncTree_=new wn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new wn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);jn(t.eventQueue_,e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new U(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new U(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.A)(e,function(t){return se(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=se(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.A)(e,function(t){return se(t)});s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=se(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),jn(this.eventQueue_,h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;k(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new U("/.info/"+t),r=se(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);jn(this.eventQueue_,n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.getServerValue(t);return null!=n?Promise.resolve(new ce(n,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then(function(n){var r=se(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return Pn(e.eventQueue_,t.path,i),Promise.resolve(new ce(r,t.getRef(),t.getQueryParams().getIndex()))},function(n){return e.log_("get for query "+Object(o.F)(t)+" failed: "+n),Promise.reject(new Error(n))})},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=se(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=Fe(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);In(this.eventQueue_,l),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||E("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);jn(i.eventQueue_,t,s),i.callOnCompleteCallback(r,e,n)});var h=this.abortTransactions_(t);this.rerunTransactions_(h),jn(this.eventQueue_,h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(k(e,function(e,n){i=!1,s[e]=Le(Q(t,e),se(n),r.serverSyncTree_,o)}),i)b("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);In(this.eventQueue_,u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||E("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;jn(r.eventQueue_,u,s),r.callOnCompleteCallback(n,e,i)}),k(e,function(e){var n=r.abortTransactions_(Q(t,e));r.rerunTransactions_(n)}),jn(this.eventQueue_,t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Ve;this.onDisconnect_.forEachTree(V(),function(r,i){var o=Le(r,i,t.serverSyncTree_,e);n.remember(r,o)});var r=[];n.forEachTree(V(),function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new Ve,jn(this.eventQueue_,V(),r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=se(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=se(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.r)(e))return b("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&k(e,function(e,n){var i=se(n);r.onDisconnect_.remember(Q(t,e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===q(t.path)?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),Pn(this.eventQueue_,t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===q(t.path)?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),Pn(this.eventQueue_,t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Jn)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Jn)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Sn(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);k(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),b.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&L(function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new ar(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new nr(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new ce(a.currentInputSnapshot,new nr(this,a.path),Gt);a.onComplete(null,!1,l)}}else{Ct("transaction failed: Data returned ",c,a.path),a.status=tr.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(o.h)(c,".priority")?(d=Object(o.C)(c,".priority"),Object(o.d)(wt(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||ie.EMPTY_NODE).getPriority().val();var g=this.generateServerValues(),y=se(c,d),v=Fe(y,u,g);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,v,a.currentWriteId,a.applyLocally);jn(this.eventQueue_,t,m),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||ie.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===tr.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.d)(c.status===tr.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=tr.SENT,c.retryCount++;var l=Y(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=tr.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new nr(n,e[s].path),c=new ce(a,u,Gt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),jn(n.eventQueue_,t,i),s=0;s<o.length;s++)L(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===tr.SENT_NEEDS_ABORT?tr.NEEDS_ABORT:tr.RUN;else for(E("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=tr.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},a)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===tr.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=Y(e,a.path),c=!1,l=void 0;if(Object(o.d)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===tr.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===tr.RUN)if(a.retryCount>=25)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){Ct("transaction failed: Data returned ",f,a.path);var d=se(f);"object"==typeof f&&null!=f&&Object(o.h)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,g=this.generateServerValues(),y=Fe(d,h,g);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(jn(this.eventQueue_,e,r),r=[],c&&(t[s].status=tr.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var v=new nr(this,t[s].path),m=new ce(t[s].currentInputSnapshot,v,Gt);n.push(t[s].onComplete.bind(null,null,!1,m))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)L(n[s]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=q(t);null!==e&&null===n.getValue();)n=n.subTree(e),e=q(t=B(t));return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==tr.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===tr.SENT_NEEDS_ABORT||(e[s].status===tr.SENT?(Object(o.d)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=tr.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.d)(e[s].status===tr.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,jn(this.eventQueue_,t.path(),r),s=0;s<n.length;s++)L(n[s])}},t}(),nr=function(t){function e(e,n){if(!(e instanceof er))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new Oe,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.G)("Reference.key",0,0,arguments.length),$(this.path)?null:H(this.path)},e.prototype.child=function(t){return Object(o.G)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof U||(null===q(this.path)?Pt("Reference.child",1,t,!1):It("Reference.child",1,t,!1)),new e(this.repo,Q(this.path,t))},e.prototype.getParent=function(){Object(o.G)("Reference.parent",0,0,arguments.length);var t=K(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.G)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.G)("Reference.set",1,2,arguments.length),jt("Reference.set",this.path),Ot("Reference.set",1,t,this.path,!1),Object(o.H)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.G)("Reference.update",1,2,arguments.length),jt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Et("Reference.update",1,t,this.path,!1),Object(o.H)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.G)("Reference.setWithPriority",2,3,arguments.length),jt("Reference.setWithPriority",this.path),Ot("Reference.setWithPriority",1,t,this.path,!1),St("Reference.setWithPriority",2,e,!1),Object(o.H)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.G)("Reference.remove",0,1,arguments.length),jt("Reference.remove",this.path),Object(o.H)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.G)("Reference.transaction",1,3,arguments.length),jt("Reference.transaction",this.path),Object(o.H)("Reference.transaction",1,t,!1),Object(o.H)("Reference.transaction",2,e,!0),Rt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new Nt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.G)("Reference.setPriority",1,2,arguments.length),jt("Reference.setPriority",this.path),St("Reference.setPriority",1,t,!1),Object(o.H)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(Q(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.G)("Reference.push",0,2,arguments.length),jt("Reference.push",this.path),Ot("Reference.push",1,t,this.path,!0),Object(o.H)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Dt(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return jt("Reference.onDisconnect",this.path),new kt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Ae);Ae.__referenceConstructor=nr,an.__referenceConstructor=nr;var rr,ir=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(b("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';E(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),or=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),sr=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return rr||(rr=new t),rr},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new dt(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new or)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),b("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=pt(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=pt(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new or:new ir(t,e);return At("Invalid Firebase Database URL",1,s),$(s.path)||C("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.C)(this.repos_,t.app.name);e&&Object(o.C)(e,t.key)===t||C("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.C)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.C)(r,t.toURLString());return i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new er(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),ar=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.checkDeleted_("delete"),sr.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof er||C("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new nr(this.repo_,V())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?C("Cannot call useEmulator() after instance has already been initialized."):sr.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.G)("database.ref",0,1,arguments.length),t instanceof nr?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.G)(e,1,1,arguments.length);var n=pt(t,this.repo_.repoInfo_.nodeAdmin);At(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||C(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&C("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.G)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.G)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),ur=Object.freeze({__proto__:null,forceLongPolling:function(){Hn.forceDisallow(),Un.forceAllow()},forceWebSockets:function(){Un.forceDisallow()},isWebSocketsAvailable:function(){return Hn.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;zn(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:sr.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),cr=$n;$n.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},$n.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var lr=Object.freeze({__proto__:null,DataConnection:cr,RealTimeConnection:Gn,hijackHash:function(t){var e=$n.prototype.put;return $n.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){$n.prototype.put=e}},ConnectionTarget:dt,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){sr.getInstance().forceRestClient(t)}}),hr=ar.ServerValue;!function(e){zn(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return sr.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:nr,Query:Ae,Database:ar,DataSnapshot:ce,enableLogging:_,INTERNAL:ur,ServerValue:hr,TEST_ACCESS:lr}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.4"),Object(o.v)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("mCNh"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:Object(a.b)(t)(this)}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},IzEk:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("4I5i"),o=n("EY2u");function s(t){return e=>0===t?Object(o.b)():e.lift(new a(t))}class a{constructor(t){if(this.total=t,this.total<0)throw new i.a}call(t,e){return e.subscribe(new u(t,this.total))}}class u extends r.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}},JIr8:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("zx2A");function i(t){return function(e){const n=new o(t),r=e.lift(n);return n.caught=r}}class o{constructor(t){this.selector=t}call(t,e){return e.subscribe(new s(t,this.selector,this.caught))}}class s extends r.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const i=new r.a(this);this.add(i);const o=Object(r.c)(n,i);o!==i&&this.add(o)}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.2.9","app")},Kj3r:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("7o/Q"),i=n("D0XW");function o(t,e=i.a){return n=>n.lift(new s(t,e))}class s{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new a(t,this.dueTime,this.scheduler))}}class a extends r.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function u(t){t.debouncedNext()}},Kqap:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}}class o{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))}}class s extends r.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("EY2u"),i=n("LRne"),o=n("z6cu");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},ZUHj:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("7o/Q");class i extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var o=n("SeVD"),s=n("HDdC");function a(t,e,n,r,a=new i(t,n,r)){if(!a.closed)return e instanceof s.a?e.subscribe(a):Object(o.a)(e)(a)}},agSv:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("l7P3"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("EY2u"),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("HDdC"),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("LRne"),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("VRyK"),rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("qgXg"),rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("jtHE"),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("w1tV"),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("bOdf"),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("tS1D"),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("Kj3r"),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("JIr8"),rxjs_operators__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("IzEk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("1G5W"),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("zP0r"),rxjs_operators__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("pxpQ"),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("zp1y"),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("Kqap");function DevToolsFeatureOptions(){}class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.q("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.q("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(t){const e={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}};let n="function"==typeof t?t():t;const r=Object.assign({},e,{features:n.features||!!n.logOnly&&{pause:!0,export:!0,test:!0}||e.features},n);if(r.maxAge&&r.maxAge<2)throw new Error("Devtools 'maxAge' cannot be less than 2, got "+r.maxAge);return r}const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(t,e){if(this.action=t,this.timestamp=e,this.type=PERFORM_ACTION,void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(t){this.timestamp=t,this.type=RESET}}class Rollback{constructor(t){this.timestamp=t,this.type=ROLLBACK}}class Commit{constructor(t){this.timestamp=t,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(t){this.id=t,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(t,e,n=!0){this.start=t,this.end=e,this.active=n,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(t){this.index=t,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(t){this.actionId=t,this.type=JUMP_TO_ACTION}}class ImportState{constructor(t){this.nextLiftedState=t,this.type=IMPORT_STATE}}class LockChanges{constructor(t){this.status=t,this.type=LOCK_CHANGES}}class PauseRecording{constructor(t){this.status=t,this.type=PAUSE_RECORDING}}let DevtoolsDispatcher=(()=>{class t extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.a{}return t.\u0275fac=function(e){return \u0275DevtoolsDispatcher_BaseFactory(e||t)},t.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Gb({token:t,factory:t.\u0275fac}),t})();const \u0275DevtoolsDispatcher_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Pb(DevtoolsDispatcher);function difference(t,e){return t.filter(t=>e.indexOf(t)<0)}function unliftState(t){const{computedStates:e,currentStateIndex:n}=t;if(n>=e.length){const{state:t}=e[e.length-1];return t}const{state:r}=e[n];return r}function unliftAction(t){return t.actionsById[t.nextActionId-1]}function liftAction(t){return new PerformAction(t,+Date.now())}function sanitizeActions(t,e){return Object.keys(e).reduce((n,r)=>{const i=Number(r);return n[i]=sanitizeAction(t,e[i],i),n},{})}function sanitizeAction(t,e,n){return Object.assign(Object.assign({},e),{action:t(e.action,n)})}function sanitizeStates(t,e){return e.map((e,n)=>({state:sanitizeState(t,e.state,n),error:e.error}))}function sanitizeState(t,e,n){return t(e,n)}function shouldFilterActions(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function filterLiftedState(t,e,n,r){const i=[],o={},s=[];return t.stagedActionIds.forEach((a,u)=>{const c=t.actionsById[a];c&&(u&&isActionFiltered(t.computedStates[u],c,e,n,r)||(o[a]=c,i.push(a),s.push(t.computedStates[u])))}),Object.assign(Object.assign({},t),{stagedActionIds:i,actionsById:o,computedStates:s})}function isActionFiltered(t,e,n,r,i){const o=n&&!n(t,e.action),s=r&&!e.action.type.match(r.map(t=>escapeRegExp(t)).join("|")),a=i&&e.action.type.match(i.map(t=>escapeRegExp(t)).join("|"));return o||s||a}function escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.q("@ngrx/store-devtools Redux Devtools Extension");function ReduxDevtoolsExtensionConnection(){}function ReduxDevtoolsExtensionConfig(){}function ReduxDevtoolsExtension(){}let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(t,e,n){this.config=e,this.dispatcher=n,this.devtoolsExtension=t,this.createActionStreams()}notify(t,e){if(this.devtoolsExtension)if(t.type===PERFORM_ACTION){if(e.isLocked||e.isPaused)return;const n=unliftState(e);if(shouldFilterActions(this.config)&&isActionFiltered(n,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const r=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,n,e.currentStateIndex):n,i=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,t,e.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(i,r))}else{const t=Object.assign(Object.assign({},e),{stagedActionIds:e.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,e.actionsById):e.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,e.computedStates):e.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,t,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.a(t=>{const e=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=e,e.init(),e.subscribe(e=>t.next(e)),e.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.a}createActionStreams(){const t=this.createChangesObservable().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.a)()),e=t.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)(t=>t.type===ExtensionActionTypes.START)),n=t.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)(t=>t.type===ExtensionActionTypes.STOP)),r=t.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)(t=>t.type===ExtensionActionTypes.DISPATCH),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(t=>this.unwrapAction(t.payload)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.a)(t=>t.type===IMPORT_STATE?this.dispatcher.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)(t=>t.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.l),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.a)(1e3),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.a)(1e3),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(()=>t),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.a)(()=>Object(rxjs__WEBPACK_IMPORTED_MODULE_4__.a)(t)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.a)(1)):Object(rxjs__WEBPACK_IMPORTED_MODULE_4__.a)(t))),i=t.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)(t=>t.type===ExtensionActionTypes.ACTION),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(t=>this.unwrapAction(t.payload))).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.a)(n)),o=r.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.a)(n));this.start$=e.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.a)(n)),this.actions$=this.start$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.a)(()=>i)),this.liftedActions$=this.start$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.a)(()=>o))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(t){const e={name:t.name,features:t.features,serialize:t.serialize};return!1!==t.maxAge&&(e.maxAge=t.maxAge),e}sendToReduxDevtools(t){try{t()}catch(e){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",e)}}}return DevtoolsExtension.\u0275fac=function(t){return new(t||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rb(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rb(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rb(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Gb({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})();const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.b},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function ComputedState(){}function LiftedAction(){}function LiftedActions(){}function LiftedState(){}function computeNextEntry(t,e,n,r,i){if(r)return{state:n,error:"Interrupted by an error up the chain"};let o,s=n;try{s=t(n,e)}catch(a){o=a.toString(),i.handleError(a)}return{state:s,error:o}}function recomputeStates(t,e,n,r,i,o,s,a,u){if(e>=t.length&&t.length===o.length)return t;const c=t.slice(0,e),l=o.length-(u?1:0);for(let h=e;h<l;h++){const t=o[h],e=i[t].action,u=c[h-1],l=u?u.state:r,f=u?u.error:void 0,d=s.indexOf(t)>-1?u:computeNextEntry(n,e,l,f,a);c.push(d)}return u&&c.push(t[t.length-1]),c}function liftInitialState(t,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(t,e,n,r,i={}){return o=>(s,a)=>{let{monitorState:u,actionsById:c,nextActionId:l,stagedActionIds:h,skippedActionIds:f,committedState:d,currentStateIndex:p,computedStates:g,isLocked:y,isPaused:v}=s||e;function m(t){let e=t,n=h.slice(1,e+1);for(let r=0;r<n.length;r++){if(g[r+1].error){e=r,n=h.slice(1,e+1);break}delete c[n[r]]}f=f.filter(t=>-1===n.indexOf(t)),h=[0,...h.slice(e+1)],d=g[e].state,g=g.slice(e),p=p>e?p-e:0}function _(){c={0:liftAction(INIT_ACTION)},l=1,h=[0],f=[],d=g[p].state,p=0,g=[]}s||(c=Object.create(c));let b=0;switch(a.type){case LOCK_CHANGES:y=a.status,b=1/0;break;case PAUSE_RECORDING:v=a.status,v?(h=[...h,l],c[l]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),l++,b=h.length-1,g=g.concat(g[g.length-1]),p===h.length-2&&p++,b=1/0):_();break;case RESET:c={0:liftAction(INIT_ACTION)},l=1,h=[0],f=[],d=t,p=0,g=[];break;case COMMIT:_();break;case ROLLBACK:c={0:liftAction(INIT_ACTION)},l=1,h=[0],f=[],p=0,g=[];break;case TOGGLE_ACTION:{const{id:t}=a,e=f.indexOf(t);f=-1===e?[t,...f]:f.filter(e=>e!==t),b=h.indexOf(t);break}case SET_ACTIONS_ACTIVE:{const{start:t,end:e,active:n}=a,r=[];for(let i=t;i<e;i++)r.push(i);f=n?difference(f,r):[...f,...r],b=h.indexOf(t);break}case JUMP_TO_STATE:p=a.index,b=1/0;break;case JUMP_TO_ACTION:{const t=h.indexOf(a.actionId);-1!==t&&(p=t),b=1/0;break}case SWEEP:h=difference(h,f),f=[],p=Math.min(p,h.length-1);break;case PERFORM_ACTION:{if(y)return s||e;if(v||s&&isActionFiltered(s.computedStates[p],a,i.predicate,i.actionsSafelist,i.actionsBlocklist)){const t=g[g.length-1];g=[...g.slice(0,-1),computeNextEntry(o,a.action,t.state,t.error,n)],b=1/0;break}i.maxAge&&h.length===i.maxAge&&m(1),p===h.length-1&&p++;const t=l++;c[t]=a,h=[...h,t],b=h.length-1;break}case IMPORT_STATE:({monitorState:u,actionsById:c,nextActionId:l,stagedActionIds:h,skippedActionIds:f,committedState:d,currentStateIndex:p,computedStates:g,isLocked:y,isPaused:v}=a.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.b:b=0,i.maxAge&&h.length>i.maxAge&&(g=recomputeStates(g,b,o,d,c,h,f,n,v),m(h.length-i.maxAge),b=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.l:if(g.filter(t=>t.error).length>0)b=0,i.maxAge&&h.length>i.maxAge&&(g=recomputeStates(g,b,o,d,c,h,f,n,v),m(h.length-i.maxAge),b=1/0);else{if(!v&&!y){p===h.length-1&&p++;const t=l++;c[t]=new PerformAction(a,+Date.now()),h=[...h,t],b=h.length-1,g=recomputeStates(g,b,o,d,c,h,f,n,v)}g=g.map(t=>Object.assign(Object.assign({},t),{state:o(t.state,RECOMPUTE_ACTION)})),p=h.length-1,i.maxAge&&h.length>i.maxAge&&m(h.length-i.maxAge),b=1/0}break;default:b=1/0}return g=recomputeStates(g,b,o,d,c,h,f,n,v),u=r(u,a),{monitorState:u,actionsById:c,nextActionId:l,stagedActionIds:h,skippedActionIds:f,committedState:d,currentStateIndex:p,computedStates:g,isLocked:y,isPaused:v}}}let StoreDevtools=(()=>{class t{constructor(t,e,n,r,i,o,s,a){const u=liftInitialState(s,a.monitor),c=liftReducerWith(s,u,o,a.monitor,a),l=Object(rxjs__WEBPACK_IMPORTED_MODULE_5__.a)(Object(rxjs__WEBPACK_IMPORTED_MODULE_5__.a)(e.asObservable().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.a)(1)),r.actions$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(liftAction)),t,r.liftedActions$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.b)(rxjs__WEBPACK_IMPORTED_MODULE_6__.b)),h=n.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(c)),f=new rxjs__WEBPACK_IMPORTED_MODULE_7__.a(1),d=l.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.a)(h),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.a)(({state:t},[e,n])=>{let i=n(t,e);return e.type!==PERFORM_ACTION&&shouldFilterActions(a)&&(i=filterLiftedState(i,a.predicate,a.actionsSafelist,a.actionsBlocklist)),r.notify(e,i),{state:i,action:e}},{state:u,action:null})).subscribe(({state:t,action:e})=>{f.next(t),e.type===PERFORM_ACTION&&i.next(e.action)}),p=r.start$.subscribe(()=>{this.refresh()}),g=f.asObservable(),y=g.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(unliftState));this.extensionStartSubscription=p,this.stateSubscription=d,this.dispatcher=t,this.liftedState=g,this.state=y}dispatch(t){this.dispatcher.next(t)}next(t){this.dispatcher.next(t)}error(t){}complete(){}performAction(t){this.dispatch(new PerformAction(t,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(t){this.dispatch(new ToggleAction(t))}jumpToAction(t){this.dispatch(new JumpToAction(t))}jumpToState(t){this.dispatch(new JumpToState(t))}importState(t){this.dispatch(new ImportState(t))}lockChanges(t){this.dispatch(new LockChanges(t))}pauseRecording(t){this.dispatch(new PauseRecording(t))}}return t.\u0275fac=function(e){return new(e||t)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rb(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rb(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rb(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rb(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rb(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.f),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rb(_angular_core__WEBPACK_IMPORTED_MODULE_0__.m),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rb(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.c),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rb(STORE_DEVTOOLS_CONFIG))},t.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Gb({token:t,factory:t.\u0275fac}),t})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.q("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(t,e){return Boolean(t)||e.monitor!==noMonitor}function createReduxDevtoolsExtension(){const t="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&void 0!==window[t]?window[t]:null}function createStateObservable(t){return t.state}let StoreDevtoolsModule=(()=>{class t{static instrument(e={}){return{ngModule:t,providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:e},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.g,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.d,useExisting:DevtoolsDispatcher}]}}}return t.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ib({type:t}),t.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Hb({factory:function(e){return new(e||t)}}),t})()},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},bOdf:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("5+tZ");function i(t,e){return Object(r.a)(t,e,1)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},eIep:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e){return"function"==typeof e?n=>n.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))))):e=>e.lift(new a(t))}class a{constructor(t){this.project=t}call(t,e){return e.subscribe(new u(t,this.project))}}class u extends o.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new o.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(o.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return tn}),n.d(e,"b",function(){return cu}),n.d(e,"c",function(){return iu}),n.d(e,"d",function(){return nu}),n.d(e,"e",function(){return ru}),n.d(e,"f",function(){return nc}),n.d(e,"g",function(){return Gu}),n.d(e,"h",function(){return aa}),n.d(e,"i",function(){return bu}),n.d(e,"j",function(){return Ns}),n.d(e,"k",function(){return fu}),n.d(e,"l",function(){return Fs}),n.d(e,"m",function(){return pr}),n.d(e,"n",function(){return Da}),n.d(e,"o",function(){return Zi}),n.d(e,"p",function(){return hn}),n.d(e,"q",function(){return Je}),n.d(e,"r",function(){return go}),n.d(e,"s",function(){return ea}),n.d(e,"t",function(){return na}),n.d(e,"u",function(){return hu}),n.d(e,"v",function(){return ma}),n.d(e,"w",function(){return Qu}),n.d(e,"x",function(){return va}),n.d(e,"y",function(){return qu}),n.d(e,"z",function(){return Cu}),n.d(e,"A",function(){return fn}),n.d(e,"B",function(){return uu}),n.d(e,"C",function(){return au}),n.d(e,"D",function(){return Vs}),n.d(e,"E",function(){return Us}),n.d(e,"F",function(){return mr}),n.d(e,"G",function(){return zs}),n.d(e,"H",function(){return cr}),n.d(e,"I",function(){return dn}),n.d(e,"J",function(){return pn}),n.d(e,"K",function(){return Xu}),n.d(e,"L",function(){return da}),n.d(e,"M",function(){return ju}),n.d(e,"N",function(){return en}),n.d(e,"O",function(){return Hs}),n.d(e,"P",function(){return Bs}),n.d(e,"Q",function(){return ba}),n.d(e,"R",function(){return A}),n.d(e,"S",function(){return zu}),n.d(e,"T",function(){return Uu}),n.d(e,"U",function(){return d}),n.d(e,"V",function(){return Fu}),n.d(e,"W",function(){return tc}),n.d(e,"X",function(){return ku}),n.d(e,"Y",function(){return lu}),n.d(e,"Z",function(){return to}),n.d(e,"ab",function(){return bs}),n.d(e,"bb",function(){return ar}),n.d(e,"cb",function(){return Hn}),n.d(e,"db",function(){return kn}),n.d(e,"eb",function(){return Mn}),n.d(e,"fb",function(){return Un}),n.d(e,"gb",function(){return Ln}),n.d(e,"hb",function(){return Dn}),n.d(e,"ib",function(){return Fn}),n.d(e,"jb",function(){return ys}),n.d(e,"kb",function(){return Ju}),n.d(e,"lb",function(){return vs}),n.d(e,"mb",function(){return ms}),n.d(e,"nb",function(){return Nn}),n.d(e,"ob",function(){return D}),n.d(e,"pb",function(){return Eo}),n.d(e,"qb",function(){return Lo}),n.d(e,"rb",function(){return Do}),n.d(e,"sb",function(){return gs}),n.d(e,"tb",function(){return Et}),n.d(e,"ub",function(){return l}),n.d(e,"vb",function(){return Rn}),n.d(e,"wb",function(){return vo}),n.d(e,"xb",function(){return mt}),n.d(e,"yb",function(){return As}),n.d(e,"zb",function(){return ii}),n.d(e,"Ab",function(){return xo}),n.d(e,"Bb",function(){return Jo}),n.d(e,"Cb",function(){return Zo}),n.d(e,"Db",function(){return Ya}),n.d(e,"Eb",function(){return K}),n.d(e,"Fb",function(){return tt}),n.d(e,"Gb",function(){return y}),n.d(e,"Hb",function(){return v}),n.d(e,"Ib",function(){return X}),n.d(e,"Jb",function(){return et}),n.d(e,"Kb",function(){return Po}),n.d(e,"Lb",function(){return No}),n.d(e,"Mb",function(){return ko}),n.d(e,"Nb",function(){return Ro}),n.d(e,"Ob",function(){return Mo}),n.d(e,"Pb",function(){return $e}),n.d(e,"Qb",function(){return hs}),n.d(e,"Rb",function(){return Cn}),n.d(e,"Sb",function(){return Ye}),n.d(e,"Tb",function(){return eu}),n.d(e,"Ub",function(){return Fo}),n.d(e,"Vb",function(){return Xa}),n.d(e,"Wb",function(){return qo}),n.d(e,"Xb",function(){return Ho}),n.d(e,"Yb",function(){return Bo}),n.d(e,"Zb",function(){return jo}),n.d(e,"ac",function(){return Ma}),n.d(e,"bc",function(){return Qa}),n.d(e,"cc",function(){return zt}),n.d(e,"dc",function(){return lr}),n.d(e,"ec",function(){return Z}),n.d(e,"fc",function(){return Io}),n.d(e,"gc",function(){return cs}),n.d(e,"hc",function(){return ls}),n.d(e,"ic",function(){return $a});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const f=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(f)&&t.__forward_ref__===d}function y(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function v(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function m(t){return _(t,w)||_(t,C)}function _(t,e){return t.hasOwnProperty(e)?t[e]:null}function b(t){return t&&(t.hasOwnProperty(O)||t.hasOwnProperty(E))?t[O]:null}const w=u({"\u0275prov":u}),O=u({"\u0275inj":u}),C=u({ngInjectableDef:u}),E=u({ngInjectorDef:u});var S=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let T;function x(t){const e=T;return T=t,e}function I(t,e,n){const r=m(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&S.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${l(t)}]`)}function P(t){return{toString:t}.toString()}var j=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),A=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const R="undefined"!=typeof globalThis&&globalThis,k="undefined"!=typeof window&&window,N="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,M="undefined"!=typeof global&&global,D=R||M||k||N,L={},F=[],U=u({"\u0275cmp":u}),V=u({"\u0275dir":u}),q=u({"\u0275pipe":u}),z=u({"\u0275mod":u}),B=u({"\u0275loc":u}),H=u({"\u0275fac":u}),W=u({__NG_ELEMENT_ID__:u});let G=0;function K(t){return P(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===j.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||F,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||A.Emulated,id:"c",styles:t.styles||F,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=G++,n.inputs=J(t.inputs,e),n.outputs=J(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Q):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map($):null,n})}function Q(t){return nt(t)||function(t){return t[V]||null}(t)}function $(t){return function(t){return t[q]||null}(t)}const Y={};function X(t){const e={type:t.type,bootstrap:t.bootstrap||F,declarations:t.declarations||F,imports:t.imports||F,exports:t.exports||F,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&P(()=>{Y[t.id]=t.type}),e}function Z(t,e){return P(()=>{const n=rt(t,!0);n.declarations=e.declarations||F,n.imports=e.imports||F,n.exports=e.exports||F})}function J(t,e){if(null==t)return L;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const tt=K;function et(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function nt(t){return t[U]||null}function rt(t,e){const n=t[z]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const it=20,ot=10;function st(t){return Array.isArray(t)&&"object"==typeof t[1]}function at(t){return Array.isArray(t)&&!0===t[1]}function ut(t){return 0!=(8&t.flags)}function ct(t){return 2==(2&t.flags)}function lt(t){return 1==(1&t.flags)}function ht(t){return null!==t.template}function ft(t,e){return t.hasOwnProperty(H)?t[H]:null}class dt extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function pt(t){return"string"==typeof t?t:null==t?"":String(t)}function gt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():pt(t)}function yt(t,e){const n=e?" in "+e:"";throw new dt("201",`No provider for ${gt(t)} found${n}`)}class vt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function mt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=wt),bt}function bt(){const t=Ot(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===L)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function wt(t,e,n,r){const i=Ot(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:L,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new vt(u&&u.currentValue,e,s===L),t[r]=e}function Ot(t){return t.__ngSimpleChanges__||null}mt.ngInherit=!0;let Ct=void 0;function Et(t){Ct=t}function St(t){return!!t.listen}const Tt={createRenderer:(t,e)=>void 0!==Ct?Ct:"undefined"!=typeof document?document:void 0};function xt(t){for(;Array.isArray(t);)t=t[0];return t}function It(t,e){return xt(e[t])}function Pt(t,e){return xt(e[t.index])}function jt(t,e){return t.data[e]}function At(t,e){const n=e[t];return st(n)?n:n[0]}function Rt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function kt(t){return 4==(4&t[2])}function Nt(t){return 128==(128&t[2])}function Mt(t,e){return null==e?null:t[e]}function Dt(t){t[18]=0}function Lt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ft={lFrame:se(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ut(){return Ft.bindingsEnabled}function Vt(){return Ft.lFrame.lView}function qt(){return Ft.lFrame.tView}function zt(t){Ft.lFrame.contextLView=t}function Bt(){let t=Ht();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ht(){return Ft.lFrame.currentTNode}function Wt(t,e){const n=Ft.lFrame;n.currentTNode=t,n.isParent=e}function Gt(){return Ft.lFrame.isParent}function Kt(){Ft.lFrame.isParent=!1}function Qt(){return Ft.isInCheckNoChangesMode}function $t(t){Ft.isInCheckNoChangesMode=t}function Yt(){return Ft.lFrame.bindingIndex++}function Xt(t){const e=Ft.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Zt(t,e){const n=Ft.lFrame;n.bindingIndex=n.bindingRootIndex=t,Jt(e)}function Jt(t){Ft.lFrame.currentDirectiveIndex=t}function te(){return Ft.lFrame.currentQueryIndex}function ee(t){Ft.lFrame.currentQueryIndex=t}function ne(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function re(t,e,n){if(n&S.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&S.Host||(r=ne(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Ft.lFrame=oe();return r.currentTNode=e,r.lView=t,!0}function ie(t){const e=oe(),n=t[1];Ft.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function oe(){const t=Ft.lFrame,e=null===t?null:t.child;return null===e?se(t):e}function se(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ae(){const t=Ft.lFrame;return Ft.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ue=ae;function ce(){const t=ae();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function le(){return Ft.lFrame.selectedIndex}function he(t){Ft.lFrame.selectedIndex=t}function fe(){const t=Ft.lFrame;return jt(t.tView,t.selectedIndex)}function de(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function pe(t,e,n){ve(t,e,3,n)}function ge(t,e,n,r){(3&t[2])===n&&ve(t,e,n,r)}function ye(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ve(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(me(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function me(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const _e=-1;class be{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function we(t,e,n){const r=St(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ce(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Oe(t){return 3===t||4===t||6===t}function Ce(t){return 64===t.charCodeAt(0)}function Ee(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Se(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Se(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Te(t){return t!==_e}function xe(t){return 32767&t}function Ie(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Pe=!0;function je(t){const e=Pe;return Pe=t,e}let Ae=0;function Re(t,e){const n=Ne(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,ke(r.data,t),ke(e,null),ke(r.blueprint,null));const i=Me(t,e),o=t.injectorIndex;if(Te(i)){const t=xe(i),n=Ie(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function ke(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ne(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Me(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return _e;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return _e}function De(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(W)&&(r=n[W]),null==r&&(r=n[W]=Ae++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function Le(t,e,n){if(n&S.Optional)return t;yt(e,"NodeInjector")}function Fe(t,e,n,r){if(n&S.Optional&&void 0===r&&(r=null),0==(n&(S.Self|S.Host))){const i=t[9],o=x(void 0);try{return i?i.get(e,r,n&S.Optional):I(e,r,n&S.Optional)}finally{x(o)}}return Le(r,e,n)}function Ue(t,e,n,r=S.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(W)?t[W]:void 0;return"number"==typeof e?e>=0?255&e:qe:e}(n);if("function"==typeof o){if(!re(e,t,r))return r&S.Host?Le(i,n,r):Fe(e,n,r,i);try{const t=o();if(null!=t||r&S.Optional)return t;yt(n)}finally{ue()}}else if("number"==typeof o){let i=null,s=Ne(t,e),a=_e,u=r&S.Host?e[16][6]:null;for((-1===s||r&S.SkipSelf)&&(a=-1===s?Me(t,e):e[s+8],a!==_e&&Ge(r,!1)?(i=e[1],s=xe(a),e=Ie(a,e)):s=-1);-1!==s;){const t=e[1];if(We(o,s,t.data)){const t=ze(s,e,n,i,r,u);if(t!==Ve)return t}a=e[s+8],a!==_e&&Ge(r,e[1].data[s+8]===u)&&We(o,s,e)?(i=t,s=xe(a),e=Ie(a,e)):s=-1}}}return Fe(e,n,r,i)}const Ve={};function qe(){return new Ke(Bt(),Vt())}function ze(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Be(a,s,n,null==r?ct(a)&&Pe:r!=s&&0!=(3&a.type),i&S.Host&&o===a);return null!==u?He(e,s,u,a):Ve}function Be(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&ht(t)&&t.type===n)return u}return null}function He(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof be){const s=i;s.resolving&&function(t,e){throw new dt("200","Circular dependency in DI detected for "+t)}(gt(o[n]));const a=je(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?x(s.injectImpl):null;re(t,r,S.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&x(u),je(a),s.resolving=!1,ue()}}return i}function We(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function Ge(t,e){return!(t&S.Self||t&S.Host&&e)}class Ke{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ue(this._tNode,this._lView,t,void 0,e)}}function Qe(t){const e=t;if(g(t))return()=>{const t=Qe(p(e));return t?t():null};let n=ft(e);if(null===n){const t=b(e);n=t&&t.factory}return n||null}function $e(t){return P(()=>{const e=t.prototype.constructor,n=e[H]||Qe(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[H]||Qe(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ye(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Oe(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Bt(),t)}const Xe="__parameters__";function Ze(t,e,n){return P(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Xe)?t[Xe]:Object.defineProperty(t,Xe,{value:[]})[Xe];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Je{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=y({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const tn=new Je("AnalyzeForEntryComponents"),en=Function;function nn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),nn(r,e)):e!==t&&e.push(r)}return e}function rn(t,e){t.forEach(t=>Array.isArray(t)?rn(t,e):e(t))}function on(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function sn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function an(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function un(t,e,n){let r=ln(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function cn(t,e){const n=ln(t,e);if(n>=0)return t[1|n]}function ln(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const hn=Ze("Inject",t=>({token:t})),fn=Ze("Optional"),dn=Ze("Self"),pn=Ze("SkipSelf"),gn={},yn=/\n/gm,vn="__source",mn=u({provide:String,useValue:u});let _n,bn=void 0;function wn(t){const e=bn;return bn=t,e}function On(t,e=S.Default){if(void 0===bn)throw new Error("inject() must be called from an injection context");return null===bn?I(t,void 0,e):bn.get(t,e&S.Optional?null:void 0,e)}function Cn(t,e=S.Default){return(T||On)(p(t),e)}function En(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=S.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof fn||"Optional"===i.ngMetadataName||i===fn?n|=S.Optional:i instanceof pn||"SkipSelf"===i.ngMetadataName||i===pn?n|=S.SkipSelf:i instanceof dn||"Self"===i.ngMetadataName||i===dn?n|=S.Self:t=i instanceof hn||i===hn?i.token:i}e.push(Cn(t,n))}else e.push(Cn(r))}return e}function Sn(t){var e;return(null===(e=function(){if(void 0===_n&&(_n=null,D.trustedTypes))try{_n=D.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return _n}())||void 0===e?void 0:e.createHTML(t))||t}class Tn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see https://g.co/ng/security#xss)"}}class xn extends Tn{getTypeName(){return"HTML"}}class In extends Tn{getTypeName(){return"Style"}}class Pn extends Tn{getTypeName(){return"Script"}}class jn extends Tn{getTypeName(){return"URL"}}class An extends Tn{getTypeName(){return"ResourceURL"}}function Rn(t){return t instanceof Tn?t.changingThisBreaksApplicationSecurity:t}function kn(t,e){const n=Nn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Nn(t){return t instanceof Tn&&t.getTypeName()||null}function Mn(t){return new xn(t)}function Dn(t){return new In(t)}function Ln(t){return new Pn(t)}function Fn(t){return new jn(t)}function Un(t){return new An(t)}class Vn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Sn(t),"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class qn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Sn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Sn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const zn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Bn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Hn(t){return(t=String(t)).match(zn)||t.match(Bn)?t:"unsafe:"+t}function Wn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Gn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Kn=Wn("area,br,col,hr,img,wbr"),Qn=Wn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$n=Wn("rp,rt"),Yn=Gn($n,Qn),Xn=Gn(Kn,Gn(Qn,Wn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Gn($n,Wn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yn),Zn=Wn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jn=Wn("srcset"),tr=Gn(Zn,Jn,Wn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),er=Wn("script,style,template");class nr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Xn.hasOwnProperty(e))return this.sanitizedSomething=!0,!er.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!tr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Zn[o]&&(s=Hn(s)),Jn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Hn(t.trim())).join(", ")),this.buf.push(" ",e,'="',or(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Xn.hasOwnProperty(e)&&!Kn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(or(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const rr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ir=/([^\#-~ |!])/g;function or(t){return t.replace(/&/g,"&amp;").replace(rr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ir,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let sr;function ar(t,e){let n=null;try{sr=sr||function(t){return function(){try{return!!(new window.DOMParser).parseFromString(Sn(""),"text/html")}catch(t){return!1}}()?new Vn:new qn(t)}(t);let r=e?String(e):"";n=sr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=sr.getInertBodyElement(r)}while(r!==o);return(new nr).sanitizeChildren(ur(n)||n)}finally{if(n){const t=ur(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ur(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var cr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function lr(t){const e=function(){const t=Vt();return t&&t[12]}();return e?e.sanitize(cr.URL,t)||"":kn(t,"URL")?Rn(t):Hn(pt(t))}function hr(t){return t.ngDebugContext}function fr(t){return t.ngOriginalError}function dr(t,...e){t.error(...e)}class pr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||dr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?hr(t)?hr(t):this._findContext(fr(t)):null}_findOriginalError(t){let e=fr(t);for(;e&&fr(e);)e=fr(e);return e}}function gr(t,e){t.__ngContext__=e}const yr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(D))();function vr(t){return t instanceof Function?t():t}var mr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function _r(t,e){return(void 0)(t,e)}function br(t){const e=t[3];return at(e)?e[3]:e}function wr(t){return Cr(t[13])}function Or(t){return Cr(t[4])}function Cr(t){for(;null!==t&&!at(t);)t=t[4];return t}function Er(t,e,n,r,i){if(null!=r){let o,s=!1;at(r)?o=r:st(r)&&(s=!0,r=r[0]);const a=xt(r);0===t&&null!==n?null==i?Rr(e,n,a):Ar(e,n,a,i||null,!0):1===t&&null!==n?Ar(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Nr(t,e);r&&function(t,e,n,r){St(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==xt(n)&&Er(e,t,r,o,i);for(let s=ot;s<n.length;s++){const i=n[s];qr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Sr(t,e,n){return St(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Tr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Lt(i,-1)),n.splice(r,1)}function xr(t,e){if(t.length<=ot)return;const n=ot+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Tr(o,r),e>0&&(t[n-1][4]=r[4]);const s=sn(t,ot+e);qr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ir(t,e){if(!(256&e[2])){const n=e[11];St(n)&&n.destroyNode&&qr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Pr(t[1],t);for(;e;){let n=null;if(st(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)st(e)&&Pr(e[1],e),e=e[3];null===e&&(e=t),st(e)&&Pr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Pr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof be)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n){for(let t=0;t<n.length-1;t+=2)if("string"==typeof n[t]){const o=n[t+1],s="function"==typeof o?o(e):xt(e[o]),a=r[i=n[t+2]],u=n[t+3];"boolean"==typeof u?s.removeEventListener(n[t],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),t+=2}else{const e=r[i=n[t+1]];n[t].call(e)}if(null!==r)for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&St(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&at(e[3])){n!==e[3]&&Tr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function jr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===A.None||e===A.Emulated)return null}return Pt(r,n)}(t,e.parent,n)}function Ar(t,e,n,r,i){St(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Rr(t,e,n){St(t)?t.appendChild(e,n):e.appendChild(n)}function kr(t,e,n,r,i){null!==r?Ar(t,e,n,r,i):Rr(t,e,n)}function Nr(t,e){return St(t)?t.parentNode(e):e.parentNode}function Mr(t,e,n){return Dr(t,e,n)}let Dr=function(t,e,n){return 40&t.type?Pt(t,n):null};function Lr(t,e,n,r){const i=jr(t,r,e),o=e[11],s=Mr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)kr(o,i,n[a],s,!1);else kr(o,i,n,s,!1)}function Fr(t,e){if(null!==e){const n=e.type;if(3&n)return Pt(e,t);if(4&n)return Ur(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Fr(t,n);{const n=t[e.index];return at(n)?Ur(-1,n):xt(n)}}if(32&n)return _r(e,t)()||xt(t[e.index]);{const n=t[16],r=n[6],i=br(n),o=r.projection[e.projection];return null!=o?Fr(i,o):Fr(t,e.next)}}return null}function Ur(t,e){const n=ot+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Fr(t,r)}return e[7]}function Vr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&gr(xt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Vr(t,e,n.child,r,i,o,!1),Er(e,t,i,a,o);else if(32&u){const s=_r(n,r);let u;for(;u=s();)Er(e,t,i,u,o);Er(e,t,i,a,o)}else 16&u?zr(t,e,r,n,i,o):Er(e,t,i,a,o);n=s?n.projectionNext:n.next}}function qr(t,e,n,r,i,o){Vr(n,r,t.firstChild,e,i,o,!1)}function zr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Er(e,t,i,a[u],o);else Vr(t,e,a,s[3],i,o,!0)}function Br(t,e,n){St(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Hr(t,e,n){St(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Wr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Gr="ng-template";function Kr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Wr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Qr(t){return 4===t.type&&t.value!==Gr}function $r(t,e,n){return e===(4!==t.type||n?t.value:Gr)}function Yr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Oe(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!$r(t,u,n)||""===u&&1===e.length){if(Xr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Kr(t.attrs,c,n)){if(Xr(r))return!1;s=!0}continue}const l=Zr(8&r?"class":u,i,Qr(t),n);if(-1===l){if(Xr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Wr(e,c,0)||2&r&&c!==t){if(Xr(r))return!1;s=!0}}}}else{if(!s&&!Xr(r)&&!Xr(u))return!1;if(s&&Xr(u))continue;s=!1,r=u|1&r}}return Xr(r)||s}function Xr(t){return 0==(1&t)}function Zr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Jr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Yr(t,e[r],n))return!0;return!1}function ti(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function ei(t,e){return t?":not("+e.trim()+")":e}function ni(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Xr(s)||(e+=ei(o,i),i=""),r=s,o=o||!Xr(r);n++}return""!==i&&(e+=ei(o,i)),e}const ri={};function ii(t){oi(qt(),Vt(),le()+t,Qt())}function oi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&pe(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ge(e,r,0,n)}he(n)}function si(t,e){return t<<17|e<<2}function ai(t){return t>>17&32767}function ui(t){return 2|t}function ci(t){return(131068&t)>>2}function li(t,e){return-131069&t|e<<2}function hi(t){return 1|t}function fi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ee(i),n.contentQueries(2,e[o],o)}}}function di(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Dt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function pi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Ht(),s=Gt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Ft.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Ft.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Wt(o,!0),o}function gi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function yi(t,e,n){ie(e);try{const r=t.viewQuery;null!==r&&Wi(1,r,n);const i=t.template;null!==i&&_i(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&fi(t,e),t.staticViewQueries&&Wi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Vi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ce()}}function vi(t,e,n,r){const i=e[2];if(256==(256&i))return;ie(e);const o=Qt();try{Dt(e),Ft.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&_i(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&pe(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ge(e,n,0,null),ye(e,0)}if(function(t){for(let e=wr(t);null!==e;e=Or(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Lt(r,1),n[2]|=1024}}}(e),function(t){for(let e=wr(t);null!==e;e=Or(e))for(let t=ot;t<e.length;t++){const n=e[t],r=n[1];Nt(n)&&vi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&fi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&pe(e,n)}else{const n=t.contentHooks;null!==n&&ge(e,n,1),ye(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)he(~r);else{const i=r,o=n[++t],s=n[++t];Zt(o,i),s(2,e[i])}}}finally{he(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Fi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Wi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&pe(e,n)}else{const n=t.viewHooks;null!==n&&ge(e,n,2),ye(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Lt(e[3],-1))}finally{ce()}}function mi(t,e,n,r){const i=e[10],o=!Qt(),s=kt(e);try{o&&!s&&i.begin&&i.begin(),s&&yi(t,e,r),vi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function _i(t,e,n,r,i){const o=le();try{he(-1),2&r&&e.length>it&&oi(t,e,it,Qt()),n(r,i)}finally{he(o)}}function bi(t,e,n){Ut()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Re(n,e),gr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=ht(r);o&&Ni(e,n,r);const u=He(e,t,a,n);gr(u,e),null!==s&&Mi(0,a-i,u,r,0,s),o&&(At(n.index,e)[8]=u)}}(t,e,n,Pt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ft.lFrame.currentDirectiveIndex;try{he(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Jt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Pi(r,i)}}finally{he(-1),Jt(s)}}(t,e,n))}function wi(t,e,n=Pt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Oi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ci(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ci(t,e,n,r,i,o,s,a,u,c){const l=it+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ri);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Ei(t,e,n,r){const i=Ki(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Qi(t).push(r,i.length-1))}function Si(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ti(t,e,n,r,i,o,s,a){const u=Pt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Yi(t,n,c,r,i),ct(e)&&function(t,e){const n=At(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,St(o)?o.setProperty(u,r,i):Ce(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function xi(t,e,n,r){let i=!1;if(Ut()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Jr(n,s.selectors,!1)&&(i||(i=[]),De(Re(n,e),t,s.type),ht(s)?(ji(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ri(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=gi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ee(n.mergedAttrs,c.hostAttrs),ki(t,n,e,u,c),Ai(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Qr(e)?null:Di(n,i);o.push(c),s=Si(n,u,s),a=Si(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new dt("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ee(n.mergedAttrs,n.attrs),i}function Ii(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Pi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ji(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ai(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ht(e)&&(n[""]=t)}}function Ri(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ki(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ft(i.type)),s=new be(o,ht(i),null);t.blueprint[r]=s,n[r]=s,Ii(t,e,0,r,gi(t,n,i.hostVars,ri),i)}function Ni(t,e,n){const r=Pt(e,t),i=Oi(n),o=t[10],s=qi(t,di(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Mi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Di(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Li(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Fi(t,e){const n=At(e,t);if(Nt(n)){const t=n[1];80&n[2]?vi(t,n,t.template,n[8]):n[5]>0&&Ui(n)}}function Ui(t){for(let n=wr(t);null!==n;n=Or(n))for(let t=ot;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];vi(t,e,t.template,e[8])}else e[5]>0&&Ui(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=At(e[n],t);Nt(r)&&r[5]>0&&Ui(r)}}function Vi(t,e){const n=At(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),yi(r,n,n[8])}function qi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function zi(t){for(;t;){t[2]|=64;const e=br(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Bi(t,e,n){const r=e[10];r.begin&&r.begin();try{vi(t,e,t.template,n)}catch(i){throw $i(e,i),i}finally{r.end&&r.end()}}function Hi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Rt(n),i=r[1];mi(i,r,i.template,n)}}(t[8])}function Wi(t,e,n){ee(0),e(t,n)}const Gi=(()=>Promise.resolve(null))();function Ki(t){return t[7]||(t[7]=[])}function Qi(t){return t.cleanup||(t.cleanup=[])}function $i(t,e){const n=t[9],r=n?n.get(pr,null):null;r&&r.handleError(e)}function Yi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Xi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Zi=new Je("INJECTOR",-1);class Ji{get(t,e=gn){if(e===gn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const to=new Je("Set Injector scope."),eo={},no={},ro=[];let io=void 0;function oo(){return void 0===io&&(io=new Ji),io}function so(t,e=null,n=null,r){return new ao(t,n,e||oo(),r)}class ao{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&rn(e,n=>this.processProvider(n,t,e)),rn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Zi,lo(void 0,this));const o=this.records.get(to);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=gn,n=S.Default){this.assertNotDestroyed();const r=wn(this);try{if(!(n&S.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Je)&&m(t);e=n&&this.injectableDefInScope(n)?lo(uo(t),eo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&S.Self?oo():this.parent).get(t,e=n&S.Optional&&e===gn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[vn]&&i.unshift(e[vn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(yn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{wn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=b(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=b(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{rn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];rn(r,t=>this.processProvider(t,n,r||ro))}}this.injectorDefTypes.add(o),this.records.set(o,lo(r.factory,eo));const a=r.providers;if(null!=a&&!s){const e=t;rn(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=fo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return ho(t)?lo(void 0,t.useValue):lo(co(t),eo)}(t);if(fo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=lo(void 0,eo,!0),e.factory=()=>En(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===eo&&(e.value=no,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function uo(t){const e=m(t),n=null!==e?e.factory:ft(t);if(null!==n)return n;const r=b(t);if(null!==r)return r.factory;if(t instanceof Je)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=an(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[w]||t[C]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function co(t,e,n){let r=void 0;if(fo(t)){const e=p(t);return ft(e)||uo(e)}if(ho(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...En(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Cn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return ft(e)||uo(e);r=()=>new e(...En(t.deps))}var i;return r}function lo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ho(t){return null!==t&&"object"==typeof t&&mn in t}function fo(t){return"function"==typeof t}const po=function(t,e,n){return function(t,e=null,n=null,r){const i=so(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let go=(()=>{class t{static create(t,e){return Array.isArray(t)?po(t,e,""):po(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=gn,t.NULL=new Ji,t.\u0275prov=y({token:t,providedIn:"any",factory:()=>Cn(Zi)}),t.__NG_ELEMENT_ID__=-1,t})();function yo(t,e){de(Rt(t)[1],Bt())}function vo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(ht(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=mo(t.inputs),e.declaredInputs=mo(t.declaredInputs),e.outputs=mo(t.outputs);const n=i.hostBindings;n&&wo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&_o(t,o),s&&bo(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),ht(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===vo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ee(i.hostAttrs,n=Ee(n,i.hostAttrs))}}(r)}function mo(t){return t===L?{}:t===F?[]:t}function _o(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function bo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function wo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Oo=null;function Co(){if(!Oo){const t=D.Symbol;if(t&&t.iterator)Oo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Oo=n)}}}return Oo}function Eo(t){return!!So(t)&&(Array.isArray(t)||!(t instanceof Map)&&Co()in t)}function So(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function To(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function xo(t,e,n,r){const i=Vt();return To(i,Yt(),e)&&(qt(),function(t,e,n,r,i,o){const s=Pt(t,e);!function(t,e,n,r,i,o,s){if(null==o)St(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?pt(o):s(o,r||"",i);St(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(fe(),i,t,e,n,r)),xo}function Io(t,e,n,r,i,o,s,a){const u=Vt(),c=qt(),l=t+it,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=pi(e,t,4,s||null,Mt(c,a));xi(e,n,l,Mt(c,u)),de(e,l);const h=l.tViews=Ci(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Wt(h,!1);const f=u[11].createComment("");Lr(c,u,f,h),gr(f,u),qi(u,u[l]=Li(f,u,f,h)),lt(h)&&bi(c,u,h),null!=s&&wi(u,h,a)}function Po(t,e=S.Default){const n=Vt();return null===n?Cn(t,e):Ue(Bt(),n,p(t),e)}function jo(t,e,n){const r=Vt();return To(r,Yt(),e)&&Ti(qt(),fe(),r,t,e,r[11],n,!1),jo}function Ao(t,e,n,r,i){const o=i?"class":"style";Yi(t,n,e.inputs[o],o,r)}function Ro(t,e,n,r){const i=Vt(),o=qt(),s=it+t,a=i[11],u=i[s]=Sr(a,e,Ft.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=pi(e,t,2,i,Mt(a,o));return xi(e,n,u,Mt(a,s)),null!==u.attrs&&Xi(u,u.attrs,!1),null!==u.mergedAttrs&&Xi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Wt(c,!0);const l=c.mergedAttrs;null!==l&&we(a,u,l);const h=c.classes;null!==h&&Hr(a,u,h);const f=c.styles;null!==f&&Br(a,u,f),64!=(64&c.flags)&&Lr(o,i,u,c),0===Ft.lFrame.elementDepthCount&&gr(u,i),Ft.lFrame.elementDepthCount++,lt(c)&&(bi(o,i,c),function(t,e,n){if(ut(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&wi(i,c)}function ko(){let t=Bt();Gt()?Kt():(t=t.parent,Wt(t,!1));const e=t;Ft.lFrame.elementDepthCount--;const n=qt();n.firstCreatePass&&(de(n,t),ut(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ao(n,e,Vt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ao(n,e,Vt(),e.stylesWithoutHost,!1)}function No(t,e,n,r){Ro(t,e,n,r),ko()}function Mo(){return Vt()}function Do(t){return!!t&&"function"==typeof t.then}function Lo(t){return!!t&&"function"==typeof t.subscribe}function Fo(t,e,n=!1,r){const i=Vt(),o=qt(),s=Bt();return function(t,e,n,r,i,o,s=!1,a){const u=lt(r),c=t.firstCreatePass&&Qi(t),l=Ki(e);let h=!0;if(3&r.type){const f=Pt(r,e),d=a?a(f):L,p=d.target||f,g=l.length,y=a?t=>a(xt(t[r.index])).target:r.index;if(St(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Vo(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Vo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=Vo(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Fo}function Uo(t,e,n){try{return!1!==e(n)}catch(r){return $i(t,r),!1}}function Vo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?At(t.index,e):e;0==(32&e[2])&&zi(s);let a=Uo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Uo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function qo(t=1){return function(t){return(Ft.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ft.lFrame.contextLView))[8]}(t)}function zo(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?Jr(t,o,!0):ti(r,o))return i}else n=i}return n}function Bo(t){const e=Vt()[16][6];if(!e.projection){const n=e.projection=an(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?zo(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Ho(t,e=0,n){const r=Vt(),i=qt(),o=pi(i,it+t,16,null,n||null);null===o.projection&&(o.projection=e),Kt(),64!=(64&o.flags)&&function(t,e,n){zr(e[11],0,e,n,jr(t,n,e),Mr(n.parent||e[6],n,e))}(i,r,o)}const Wo=[];function Go(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ai(o):ci(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Ko(t[a],e)&&(u=!0,t[a+1]=r?hi(n):ui(n)),a=r?ai(n):ci(n)}u&&(t[n+1]=r?ui(o):hi(o))}function Ko(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ln(t,e)>=0}const Qo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $o(t){return t.substring(Qo.key,Qo.keyEnd)}function Yo(t,e){const n=Qo.textEnd;return n===e?-1:(e=Qo.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Qo.key=e,n),Xo(t,e,n))}function Xo(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Zo(t,e){return function(t,e,n,r){const i=Vt(),o=qt(),s=Xt(2);o.firstUpdatePass&&ns(o,t,s,true),e!==ri&&To(i,s,e)&&os(o,o.data[le()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(Rn(t))),t}(e),true,s)}(t,e),Zo}function Jo(t){!function(t,e,n,r){const i=qt(),o=Xt(2);i.firstUpdatePass&&ns(i,null,o,r);const s=Vt();if(n!==ri&&To(s,o,n)){const a=i.data[le()];if(us(a,r)&&!es(i,o)){let t=a.classesWithoutHost;null!==t&&(n=h(t,n||"")),Ao(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===ri&&(i=Wo);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const s=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let d=null,p=void 0;l===h?(u+=2,c+=2,s!==f&&(d=h,p=f)):null===h||null!==l&&l<h?(u+=2,d=l):(c+=2,d=h,p=f),null!==d&&os(t,e,n,r,d,p,true,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return Wo;const r=[],i=Rn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}}(un,ts,t,!0)}function ts(t,e){for(let n=function(t){return function(t){Qo.key=0,Qo.keyEnd=0,Qo.value=0,Qo.valueEnd=0,Qo.textEnd=t.length}(t),Yo(t,Xo(t,0,Qo.textEnd))}(e);n>=0;n=Yo(e,n))un(t,$o(e),!0)}function es(t,e){return e>=t.expandoStartIndex}function ns(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[le()],s=es(t,n);us(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Ft.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=is(n=rs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=rs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==ci(r))return t[ai(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=rs(null,t,e,n[1],r),n=is(n,e.attrs,r),function(t,e,n,r){t[ai(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=is(r,t[o].hostAttrs,n);return is(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ai(s),u=ci(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||ln(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ai(t[a+1]);t[r+1]=si(e,a),0!==e&&(t[e+1]=li(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=si(a,0),0!==a&&(t[a+1]=li(t[a+1],r)),a=r;else t[r+1]=si(u,0),0===a?a=r:t[u+1]=li(t[u+1],r),u=r;l&&(t[r+1]=ui(t[r+1])),Go(t,c,r,!0),Go(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&ln(o,e)>=0&&(n[r+1]=hi(n[r+1]))}(e,c,t,r,o),s=si(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function rs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=is(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function is(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),un(t,s,!!n||e[++o]))}return void 0===t?null:t}function os(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];as(1==(1&c)?ss(u,e,n,i,ci(c),s):void 0)||(as(o)||2==(2&c)&&(o=ss(u,null,n,i,a,s)),function(t,e,n,r,i){const o=St(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:mr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=mr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,It(le(),n),i,o))}function ss(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ri&&(l=c?Wo:void 0);let h=c?cn(l,r):u===r?l:void 0;if(o&&!as(h)&&(h=cn(e,r)),as(h)&&(a=h,s))return a;const f=t[i+1];i=s?ai(f):ci(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=cn(t,r))}return a}function as(t){return void 0!==t}function us(t,e){return 0!=(t.flags&(e?16:32))}function cs(t,e=""){const n=Vt(),r=qt(),i=t+it,o=r.firstCreatePass?pi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return St(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Lr(r,n,s,o),Wt(o,!1)}function ls(t,e,n){const r=Vt(),i=function(t,e,n,r){return To(t,Yt(),n)?e+pt(n)+r:ri}(r,t,e,n);return i!==ri&&function(t,e,n){const r=It(e,t);!function(t,e,n){St(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,le(),i),ls}function hs(t,e,n){const r=Vt();return To(r,Yt(),e)&&Ti(qt(),fe(),r,t,e,r[11],n,!0),hs}const fs=void 0;var ds=["en",[["a","p"],["AM","PM"],fs],[["AM","PM"],fs,fs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fs,"{1} 'at' {0}",fs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ps={};function gs(t,e,n){"string"!=typeof e&&(n=e,e=t[bs.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ps[e]=t,n&&(ps[e][bs.ExtraData]=n)}function ys(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=_s(e);if(n)return n;const r=e.split("-")[0];if(n=_s(r),n)return n;if("en"===r)return ds;throw new Error(`Missing locale data for the locale "${t}".`)}function vs(t){return ys(t)[bs.CurrencyCode]||null}function ms(t){return ys(t)[bs.PluralCase]}function _s(t){return t in ps||(ps[t]=D.ng&&D.ng.common&&D.ng.common.locales&&D.ng.common.locales[t]),ps[t]}var bs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ws="en-US";let Os=ws;function Cs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Os=t.toLowerCase().replace(/_/g,"-"))}function Es(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)Es(t[o],e,n,r,i);else{const o=qt(),s=Vt();let a=fo(t)?t:p(t.provide),u=co(t);const c=Bt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(fo(t)||!t.multi){const r=new be(u,i,Po),d=xs(a,e,i?l:l+f,h);-1===d?(De(Re(c,s),o,a),Ss(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=xs(a,e,l+f,h),p=xs(a,e,l,l+f),g=d>=0&&n[d],y=p>=0&&n[p];if(i&&!y||!i&&!g){De(Re(c,s),o,a);const l=function(t,e,n,r,i){const o=new be(t,n,Po);return o.multi=[],o.index=e,o.componentProviders=0,Ts(o,i,r&&!n),o}(i?Ps:Is,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),Ss(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Ss(o,t,d>-1?d:p,Ts(n[i?p:d],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function Ss(t,e,n,r){const i=fo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Ts(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function xs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Is(t,e,n,r){return js(this.multi,[])}function Ps(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=He(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),js(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],js(i,o);return o}function js(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function As(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=qt();if(r.firstCreatePass){const i=ht(t);Es(n,r.data,r.blueprint,i,!0),Es(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Rs{}class ks{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ns=(()=>{class t{}return t.NULL=new ks,t})();function Ms(...t){}function Ds(t,e){return new Fs(Pt(t,e))}const Ls=function(){return Ds(Bt(),Vt())};let Fs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ls,t})();class Us{}let Vs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>qs(),t})();const qs=function(){const t=Vt(),e=At(Bt().index,t);return function(t){return t[11]}(st(e)?e:t)};let zs=(()=>{class t{}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>null}),t})();class Bs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Hs=new Bs("11.0.5");class Ws{constructor(){}supports(t){return Eo(t)}create(t){return new Ks(t)}}const Gs=(t,e)=>e;class Ks{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Gs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Xs(n,r,i)?e:n,s=Xs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Eo(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Co()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Qs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ys),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ys),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Qs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $s{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ys{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new $s,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Xs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Zs{constructor(){}supports(t){return t instanceof Map||So(t)}create(){return new Js}}class Js{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||So(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ta(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ta{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let ea=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new pn,new fn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>new t([new Ws])}),t})(),na=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new pn,new fn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=y({token:t,providedIn:"root",factory:()=>new t([new Zs])}),t})();function ra(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(xt(o)),at(o))for(let t=ot;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ra(e[1],e,n,r)}const s=n.type;if(8&s)ra(t,e,n.child,r);else if(32&s){const t=_r(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=br(t);ra(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class ia{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return ra(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Ir(this._lView[1],this._lView)}onDestroy(t){Ei(this._lView[1],this._lView,null,t)}markForCheck(){zi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Bi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){$t(!0);try{Bi(t,e,n)}finally{$t(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,qr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class oa extends ia{constructor(t){super(t),this._view=t}detectChanges(){Hi(this._view)}checkNoChanges(){!function(t){$t(!0);try{Hi(t)}finally{$t(!1)}}(this._view)}get context(){return null}}const sa=ua;let aa=(()=>{class t{}return t.__NG_ELEMENT_ID__=sa,t.__ChangeDetectorRef__=!0,t})();function ua(t=!1){return function(t,e,n){if(!n&&ct(t)){const n=At(t.index,e);return new ia(n,n)}return 47&t.type?new ia(e[16],e):null}(Bt(),Vt(),t)}const ca=[new Zs],la=new ea([new Ws]),ha=new na(ca),fa=function(){return ya(Bt(),Vt())};let da=(()=>{class t{}return t.__NG_ELEMENT_ID__=fa,t})();const pa=da,ga=class extends pa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=di(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),yi(e,n,t),new ia(n)}};function ya(t,e){return 4&t.type?new ga(e,t,Ds(t,e)):null}class va{}class ma{}const _a=function(){return Sa(Bt(),Vt())};let ba=(()=>{class t{}return t.__NG_ELEMENT_ID__=_a,t})();const wa=ba,Oa=class extends wa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ds(this._hostTNode,this._hostLView)}get injector(){return new Ke(this._hostTNode,this._hostLView)}get parentInjector(){const t=Me(this._hostTNode,this._hostLView);if(Te(t)){const e=Ie(t,this._hostLView),n=xe(t);return new Ke(e[1].data[n+8],e)}return new Ke(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Ca(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ot}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(va,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(at(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Oa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ot+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ot?(e[4]=n[i],on(n,ot+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Ur(i,o),a=n[11],u=Nr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,qr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(this),on(Ea(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Ca(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=xr(this._lContainer,e);n&&(sn(Ea(this._lContainer),e),Ir(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=xr(this._lContainer,e);return n&&null!=sn(Ea(this._lContainer),e)?new ia(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Ca(t){return t[8]}function Ea(t){return t[8]||(t[8]=[])}function Sa(t,e){let n;const r=e[t.index];if(at(r))n=r;else{let i;if(8&t.type)i=xt(r);else{const n=e[11];i=n.createComment("");const r=Pt(t,e);Ar(n,Nr(n,r),i,function(t,e){return St(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Li(r,e,i,t),qi(e,n)}return new Oa(n,t,e)}const Ta={};class xa extends Ns{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=nt(t);return new ja(e,this.ngModule)}}function Ia(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Pa=new Je("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>yr});class ja extends Rs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ni).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ia(this.componentDef.inputs)}get outputs(){return Ia(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ta,i);return o!==Ta||r===Ta?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Us,Tt),s=i.get(zs,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(St(t))return t.selectRootElement(e,n===A.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Sr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:yr,clean:Gi,playerHandler:null,flags:0},f=Ci(0,null,null,1,0,null,null,null,null,null),d=di(null,f,h,l,null,null,o,a,s,i);let p,g;ie(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=pi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Xi(a,u,!0),null!==t&&(we(i,t,u),null!==a.classes&&Hr(i,t,a.classes),null!==a.styles&&Br(i,t,a.styles)));const c=r.createRenderer(t,e),l=di(n,Oi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(De(Re(a,n),s,e.type),ji(s,a),Ri(a,n.length,1)),qi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)we(a,c,["ng-version",Hs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Xr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&we(a,c,t),e&&e.length>0&&Hr(a,c,e.join(" "))}if(g=jt(f,it),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Bt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ki(t,r,e,gi(t,e,1,null),n));const i=He(e,t,r.directiveStart,r);gr(i,e);const o=Pt(r,e);return o&&gr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Bt();e.contentQueries(1,s,t.directiveStart)}const a=Bt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(he(a.index),Ii(n[1],a,0,a.directiveStart,a.directiveEnd,e),Pi(e,s)),s}(t,this.componentDef,d,h,[yo]),yi(f,d,null)}finally{ce()}return new Aa(this.componentType,p,Ds(g,d),d,g)}}class Aa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new oa(r),this.componentType=t}get injector(){return new Ke(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ra=new Map;class ka extends va{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new xa(this);const n=rt(t),r=t[B]||null;r&&Cs(r),this._bootstrapComponents=vr(n.bootstrap),this._r3Injector=so(t,e,[{provide:va,useValue:this},{provide:Ns,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=go.THROW_IF_NOT_FOUND,n=S.Default){return t===go||t===va||t===Zi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Na extends ma{constructor(t){super(),this.moduleType=t,null!==rt(t)&&function(t){const e=new Set;!function t(n){const r=rt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Ra.get(i),n),Ra.set(i,n));const o=vr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new ka(this.moduleType,t)}}function Ma(t,e,n,r){return function(t,e,n,r,i,o){const s=e+n;return To(t,s,i)?function(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===ri?void 0:n}(t,s+1)}(Vt(),function(){const t=Ft.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),t,e,n,r)}const Da=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function La(){return this._results[Co()]()}class Fa{constructor(){this.dirty=!0,this._results=[],this.changes=new Da,this.length=0;const t=Co(),e=Fa.prototype;e[t]||(e[t]=La)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=nn(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ua{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ua(this.queryList)}setDirty(){this.queryList.setDirty()}}class Va{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Va(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==tu(t,e).matches&&this.queries[e].setDirty()}}class qa{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class za{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new za(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ba{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ba(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ha(e,i)),this.matchTNodeWithReadOption(t,e,Be(e,t,i,!1,!1))}else n===da?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Be(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Fs||r===ba||r===da&&4&e.type)this.addMatch(e.index,-2);else{const n=Be(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ha(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Wa(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ds(t,e):4&t.type?ya(t,e):null}(e,t):-2===n?function(t,e,n){return n===Fs?Ds(e,t):n===da?ya(e,t):n===ba?Sa(e,t):void 0}(t,e,r):He(t,t[1],n,e)}function Ga(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Wa(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ka(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Ga(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ot;t<s.length;t++){const e=s[t];e[17]===e[3]&&Ka(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Ka(n[1],n,i,r)}}}}}return r}function Qa(t){const e=Vt(),n=qt(),r=te();ee(r+1);const i=tu(n,r);if(t.dirty&&kt(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Ka(n,e,r,[]):Ga(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function $a(t,e,n){!function(t,e,n,r,i,o){t.firstCreatePass&&Ja(t,new qa(n,r,false,i),-1),Za(t,e)}(qt(),Vt(),t,e,n)}function Ya(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(Ja(t,new qa(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),Za(t,e)}(qt(),Vt(),e,n,r,0,Bt(),t)}function Xa(){return t=Vt(),e=te(),t[19].queries[e].queryList;var t,e}function Za(t,e){const n=new Fa;Ei(t,e,n,n.destroy),null===e[19]&&(e[19]=new Va),e[19].queries.push(new Ua(n))}function Ja(t,e,n){null===t.queries&&(t.queries=new za),t.queries.track(new Ba(e,n))}function tu(t,e){return t.queries.getByIndex(e)}function eu(t=S.Default){const e=ua(!0);if(null!=e||t&S.Optional)return e;yt("ChangeDetectorRef")}const nu=new Je("Application Initializer");let ru=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ms,this.reject=Ms,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Do(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Cn(nu,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const iu=new Je("AppId"),ou={provide:iu,useFactory:function(){return`${su()}${su()}${su()}`},deps:[]};function su(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const au=new Je("Platform Initializer"),uu=new Je("Platform ID"),cu=new Je("appBootstrapListener");let lu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const hu=new Je("LocaleId"),fu=new Je("DefaultCurrencyCode");class du{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const pu=function(t){return new Na(t)},gu=pu,yu=function(t){return Promise.resolve(pu(t))},vu=function(t){const e=pu(t),n=vr(rt(t).declarations).reduce((t,e)=>{const n=nt(e);return n&&t.push(new ja(n)),t},[]);return new du(e,n)},mu=vu,_u=function(t){return Promise.resolve(vu(t))};let bu=(()=>{class t{constructor(){this.compileModuleSync=gu,this.compileModuleAsync=yu,this.compileModuleAndAllComponentsSync=mu,this.compileModuleAndAllComponentsAsync=_u}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();const wu=(()=>Promise.resolve(0))();function Ou(t){"undefined"==typeof Zone?wu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Cu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Da(!1),this.onMicrotaskEmpty=new Da(!1),this.onStable=new Da(!1),this.onError=new Da(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=D.requestAnimationFrame,e=D.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(D,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Tu(t),Su(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Tu(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return xu(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),Iu(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return xu(t),e.invoke(r,i,o,s,a)}finally{Iu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Tu(t),Su(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Cu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Cu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Eu,Ms,Ms);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Eu={};function Su(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Tu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function xu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Iu(t){t._nesting--,Su(t)}class Pu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Da,this.onMicrotaskEmpty=new Da,this.onStable=new Da,this.onError=new Da}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let ju=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Cu.assertNotInAngularZone(),Ou(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ou(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Cn(Cu))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})(),Au=(()=>{class t{constructor(){this._applications=new Map,Mu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Mu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();class Ru{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function ku(t){Mu=t}let Nu,Mu=new Ru,Du=!0,Lu=!1;function Fu(){return Lu=!0,Du}function Uu(){if(Lu)throw new Error("Cannot enable prod mode after platform setup.");Du=!1}const Vu=new Je("AllowMultipleToken");class qu{constructor(t,e){this.name=t,this.token=e}}function zu(t,e,n=[]){const r="Platform: "+e,i=new Je(r);return(e=[])=>{let o=Bu();if(!o||o.injector.get(Vu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:to,useValue:"platform"});!function(t){if(Nu&&!Nu.destroyed&&!Nu.injector.get(Vu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Nu=t.get(Hu);const e=t.get(au,null);e&&e.forEach(t=>t())}(go.create({providers:t,name:r}))}return function(t){const e=Bu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Bu(){return Nu&&!Nu.destroyed?Nu:null}let Hu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Pu:("zone.js"===t?void 0:t)||new Cu({enableLongStackTrace:Fu(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Cu,useValue:n}];return n.run(()=>{const e=go.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(pr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Ku(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Do(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(ru);return t.runInitializers(),t.donePromise.then(()=>(Cs(i.injector.get(hu,ws)||ws),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Wu({},e);return function(t,e,n){const r=new Na(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Gu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Cn(go))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Wu(t,e){return Array.isArray(e)?e.reduce(Wu,t):Object.assign(Object.assign({},t),e)}let Gu=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Cu.assertNotInAngularZone(),Ou(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Cu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Rs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(va),i=n.create(go.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(ju,null),a=s&&i.injector.get(Au);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Ku(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),Fu()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ku(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(cu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Cn(Cu),Cn(lu),Cn(go),Cn(pr),Cn(Ns),Cn(ru))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Ku(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Qu{}class $u{}const Yu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Xu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Yu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Zu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Zu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Cn(bu),Cn($u,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();function Zu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Ju=function(t){return null},tc=zu(null,"core",[{provide:uu,useValue:"unknown"},{provide:Hu,deps:[go]},{provide:Au,deps:[]},{provide:lu,deps:[]}]),ec=[{provide:Gu,useClass:Gu,deps:[Cu,lu,go,pr,Ns,ru]},{provide:Pa,deps:[Cu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ru,useClass:ru,deps:[[new fn,nu]]},{provide:bu,useClass:bu,deps:[]},ou,{provide:ea,useFactory:function(){return la},deps:[]},{provide:na,useFactory:function(){return ha},deps:[]},{provide:hu,useFactory:function(t){return Cs(t=t||"undefined"!=typeof $localize&&$localize.locale||ws),t},deps:[[new hn(hu),new fn,new pn]]},{provide:fu,useValue:"USD"}];let nc=(()=>{class t{constructor(t){}}return t.\u0275mod=X({type:t}),t.\u0275inj=v({factory:function(e){return new(e||t)(Cn(Gu))},providers:ec}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},jtHE:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("XNiG"),i=n("qgXg"),o=n("quSY"),s=n("pxpQ"),a=n("9ppp"),u=n("Ylt2");class c extends r.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new l(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let c;if(this.closed)throw new a.a;if(this.isStopped||this.hasError?c=o.a.EMPTY:(this.observers.push(t),c=new u.a(this,t)),r&&t.add(t=new s.a(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),c}_getNow(){return(this.scheduler||i.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class l{constructor(t,e){this.time=t,this.value=e}}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},l7GE:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");class i extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},l7P3:function(t,e,n){"use strict";n.d(e,"a",function(){return m}),n.d(e,"b",function(){return v}),n.d(e,"c",function(){return O}),n.d(e,"d",function(){return W}),n.d(e,"e",function(){return H}),n.d(e,"f",function(){return $}),n.d(e,"g",function(){return Z}),n.d(e,"h",function(){return nt}),n.d(e,"i",function(){return Pt}),n.d(e,"j",function(){return jt}),n.d(e,"k",function(){return It}),n.d(e,"l",function(){return G}),n.d(e,"m",function(){return z}),n.d(e,"n",function(){return p}),n.d(e,"o",function(){return lt}),n.d(e,"p",function(){return ut}),n.d(e,"q",function(){return g}),n.d(e,"r",function(){return it});var r=n("fXoL"),i=n("2Vo4"),o=n("HDdC"),s=n("XNiG"),a=n("qgXg"),u=n("pxpQ"),c=n("zp1y"),l=n("Kqap"),h=n("lJxs"),f=n("/uUt");const d={};function p(t,e){if(d[t]=(d[t]||0)+1,"function"==typeof e)return y(t,(...n)=>Object.assign(Object.assign({},e(...n)),{type:t}));switch(e?e._as:"empty"){case"empty":return y(t,()=>({type:t}));case"props":return y(t,e=>Object.assign(Object.assign({},e),{type:t}));default:throw new Error("Unexpected config.")}}function g(){return{_as:"props",_p:void 0}}function y(t,e){return Object.defineProperty(e,"type",{value:t,writable:!1})}const v="@ngrx/store/init";let m=(()=>{class t extends i.a{constructor(){super({type:v})}next(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===t)throw new TypeError("Actions must be objects");if(void 0===t.type)throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const _=[m],b=new r.q("@ngrx/store Internal Root Guard"),w=new r.q("@ngrx/store Internal Initial State"),O=new r.q("@ngrx/store Initial State"),C=new r.q("@ngrx/store Reducer Factory"),E=new r.q("@ngrx/store Internal Reducer Factory Provider"),S=new r.q("@ngrx/store Initial Reducers"),T=new r.q("@ngrx/store Internal Initial Reducers"),x=new r.q("@ngrx/store Store Features"),I=new r.q("@ngrx/store Internal Store Reducers"),P=new r.q("@ngrx/store Internal Feature Reducers"),j=new r.q("@ngrx/store Internal Feature Configs"),A=new r.q("@ngrx/store Internal Store Features"),R=new r.q("@ngrx/store Internal Feature Reducers Token"),k=new r.q("@ngrx/store Feature Reducers"),N=new r.q("@ngrx/store User Provided Meta Reducers"),M=new r.q("@ngrx/store Meta Reducers"),D=new r.q("@ngrx/store Internal Resolved Meta Reducers"),L=new r.q("@ngrx/store User Runtime Checks Config"),F=new r.q("@ngrx/store Internal User Runtime Checks Config"),U=new r.q("@ngrx/store Internal Runtime Checks"),V=new r.q("@ngrx/store Check if Action types are unique");function q(t,e={}){const n=Object.keys(t),r={};for(let o=0;o<n.length;o++){const e=n[o];"function"==typeof t[e]&&(r[e]=t[e])}const i=Object.keys(r);return function(t,n){t=void 0===t?e:t;let o=!1;const s={};for(let e=0;e<i.length;e++){const a=i[e],u=t[a],c=(0,r[a])(u,n);s[a]=c,o=o||c!==u}return o?s:t}}function z(...t){return function(e){if(0===t.length)return e;const n=t[t.length-1];return t.slice(0,-1).reduceRight((t,e)=>e(t),n(e))}}function B(t,e){return Array.isArray(e)&&e.length>0&&(t=z.apply(null,[...e,t])),(e,n)=>{const r=t(e);return(t,e)=>r(t=void 0===t?n:t,e)}}class H extends o.a{}class W extends m{}const G="@ngrx/store/update-reducers";let K=(()=>{class t extends i.a{constructor(t,e,n,r){super(r(n,e)),this.dispatcher=t,this.initialState=e,this.reducers=n,this.reducerFactory=r}addFeature(t){this.addFeatures([t])}addFeatures(t){const e=t.reduce((t,{reducers:e,reducerFactory:n,metaReducers:r,initialState:i,key:o})=>{const s="function"==typeof e?function(t){const e=Array.isArray(t)&&t.length>0?z(...t):t=>t;return(t,n)=>(t=e(t),(e,r)=>t(e=void 0===e?n:e,r))}(r)(e,i):B(n,r)(e,i);return t[o]=s,t},{});this.addReducers(e)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(t=>t.key))}addReducer(t,e){this.addReducers({[t]:e})}addReducers(t){this.reducers=Object.assign(Object.assign({},this.reducers),t),this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(t=>{var e,n;this.reducers=(e=this.reducers,n=t,Object.keys(e).filter(t=>t!==n).reduce((t,n)=>Object.assign(t,{[n]:e[n]}),{}))}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:G,features:t})}ngOnDestroy(){this.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(W),r.Rb(O),r.Rb(S),r.Rb(C))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Q=[K,{provide:H,useExisting:K},{provide:W,useExisting:m}];let $=(()=>{class t extends s.a{ngOnDestroy(){this.complete()}}return t.\u0275fac=function(e){return Y(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Y=r.Pb($),X=[$];class Z extends o.a{}let J=(()=>{class t extends i.a{constructor(t,e,n,r){super(r);const i={state:r},o=t.pipe(Object(u.b)(a.b)).pipe(Object(c.a)(e)).pipe(Object(l.a)(tt,i));this.stateSubscription=o.subscribe(({state:t,action:e})=>{this.next(t),n.next(e)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(m),r.Rb(H),r.Rb($),r.Rb(O))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t.INIT=v,t})();function tt(t={state:void 0},[e,n]){const{state:r}=t;return{state:n(r,e),action:e}}const et=[J,{provide:Z,useExisting:J}];let nt=(()=>{class t extends o.a{constructor(t,e,n){super(),this.actionsObserver=e,this.reducerManager=n,this.source=t}select(t,...e){return it.call(null,t,...e)(this)}lift(e){const n=new t(this,this.actionsObserver,this.reducerManager);return n.operator=e,n}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,e){this.reducerManager.addReducer(t,e)}removeReducer(t){this.reducerManager.removeReducer(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Z),r.Rb(m),r.Rb(K))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const rt=[nt];function it(t,e,...n){return function(r){let i;if("string"==typeof t){const o=[e,...n].filter(Boolean);i=r.pipe(function(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>Object(h.a)(function(t,e){return n=>{let r=n;for(let i=0;i<e;i++){const e=null!=r?r[t[i]]:void 0;if(void 0===e)return;r=e}return r}}(t,e))(n)}(t,...o))}else{if("function"!=typeof t)throw new TypeError(`Unexpected type '${typeof t}' in select operator, expected 'string' or 'function'`);i=r.pipe(Object(h.a)(n=>t(n,e)))}return i.pipe(Object(f.a)())}}function ot(t,e){return t===e}function st(t,e,n){for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!0;return!1}function at(t,e=ot,n=ot){let r,i=null,o=null;return{memoized:function(){if(void 0!==r)return r.result;if(!i)return o=t.apply(null,arguments),i=arguments,o;if(!st(arguments,i,e))return o;const s=t.apply(null,arguments);return i=arguments,n(o,s)?o:(o=s,s)},reset:function(){i=null,o=null},setResult:function(t){r={result:t}},clearResult:function(){r=void 0}}}function ut(...t){return function(t,e={stateFn:ct}){return function(...n){let r=n;if(Array.isArray(r[0])){const[t,...e]=r;r=[...t,...e]}const i=r.slice(0,r.length-1),o=r[r.length-1],s=i.filter(t=>t.release&&"function"==typeof t.release),a=t(function(...t){return o.apply(null,t)}),u=at(function(t,n){return e.stateFn.apply(null,[t,i,n,a])});return Object.assign(u.memoized,{release:function(){u.reset(),a.reset(),s.forEach(t=>t.release())},projector:a.memoized,setResult:u.setResult,clearResult:u.clearResult})}}(at)(...t)}function ct(t,e,n,r){if(void 0===n){const n=e.map(e=>e(t));return r.memoized.apply(null,n)}const i=e.map(e=>e(t,n));return r.memoized.apply(null,[...i,n])}function lt(t){return ut(e=>{const n=e[t];return!Object(r.V)()||t in e||console.warn(`@ngrx/store: The feature name "${t}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${t}', ...) or StoreModule.forFeature('${t}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),n},t=>t)}const ht="https://ngrx.io/guide/store/configuration/runtime-checks";function ft(t){return void 0===t}function dt(t){return null===t}function pt(t){return Array.isArray(t)}function gt(t){return"object"==typeof t&&null!==t}function yt(t){return"function"==typeof t}function vt(t){Object.freeze(t);const e=yt(t);return Object.getOwnPropertyNames(t).forEach(n=>{if(!n.startsWith("\u0275")&&function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(t,n)&&(!e||"caller"!==n&&"callee"!==n&&"arguments"!==n)){const e=t[n];!gt(e)&&!yt(e)||Object.isFrozen(e)||vt(e)}}),t}function mt(t,e=[]){return(ft(t)||dt(t))&&0===e.length?{path:["root"],value:t}:Object.keys(t).reduce((n,r)=>{if(n)return n;const i=t[r];return function(t){return yt(t)&&t.hasOwnProperty("\u0275cmp")}(i)?n:!(ft(i)||dt(i)||function(t){return"number"==typeof t}(i)||function(t){return"boolean"==typeof t}(i)||function(t){return"string"==typeof t}(i)||pt(i))&&(function(t){if(!function(t){return gt(t)&&!pt(t)}(t))return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}(i)?mt(i,[...e,r]):{path:[...e,r],value:i})},!1)}function _t(t,e){if(!1===t)return;const n=t.path.join("."),r=new Error(`Detected unserializable ${e} at "${n}". ${ht}#strict${e}serializability`);throw r.value=t.value,r.unserializablePath=n,r}function bt(t){return Object(r.V)()?Object.assign({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},t):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function wt({strictActionSerializability:t,strictStateSerializability:e}){return n=>t||e?function(t,e){return function(n,r){e.action(r)&&_t(mt(r),"action");const i=t(n,r);return e.state()&&_t(mt(i),"state"),i}}(n,{action:e=>t&&!Ct(e),state:()=>e}):n}function Ot({strictActionImmutability:t,strictStateImmutability:e}){return n=>t||e?function(t,e){return function(n,r){const i=e.action(r)?vt(r):r,o=t(n,i);return e.state()?vt(o):o}}(n,{action:e=>t&&!Ct(e),state:()=>e}):n}function Ct(t){return t.type.startsWith("@ngrx")}function Et({strictActionWithinNgZone:t}){return e=>t?function(t,e){return function(n,i){if(e.action(i)&&!r.z.isInAngularZone())throw new Error(`Action '${i.type}' running outside NgZone. ${ht}#strictactionwithinngzone`);return t(n,i)}}(e,{action:e=>t&&!Ct(e)}):e}function St(){return[{provide:V,multi:!0,deps:[U],useFactory:xt}]}function Tt(t){return t}function xt(t){if(!t.strictActionTypeUniqueness)return;const e=Object.entries(d).filter(([,t])=>t>1).map(([t])=>t);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(t=>`"${t}"`).join(", ")}. ${ht}#strictactiontypeuniqueness`)}let It=(()=>{class t{constructor(t,e,n,r,i,o){}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Rb(m),r.Rb(H),r.Rb($),r.Rb(nt),r.Rb(b,8),r.Rb(V,8))}}),t})(),Pt=(()=>{class t{constructor(t,e,n,r,i){this.features=t,this.featureReducers=e,this.reducerManager=n;const o=t.map((t,n)=>{const r=e.shift()[n];return Object.assign(Object.assign({},t),{reducers:r,initialState:Nt(t.initialState)})});n.addFeatures(o)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Rb(A),r.Rb(k),r.Rb(K),r.Rb(It),r.Rb(V,8))}}),t})(),jt=(()=>{class t{static forRoot(t,e={}){return{ngModule:It,providers:[{provide:b,useFactory:Dt,deps:[[nt,new r.A,new r.J]]},{provide:w,useValue:e.initialState},{provide:O,useFactory:Nt,deps:[w]},{provide:T,useValue:t},{provide:I,useExisting:t instanceof r.q?t:T},{provide:S,deps:[r.r,T,[new r.p(I)]],useFactory:At},{provide:N,useValue:e.metaReducers?e.metaReducers:[]},{provide:D,deps:[M,N],useFactory:Mt},{provide:E,useValue:e.reducerFactory?e.reducerFactory:q},{provide:C,deps:[E,D],useFactory:B},_,Q,X,et,rt,(n=e.runtimeChecks,[{provide:F,useValue:n},{provide:L,useFactory:Tt,deps:[F]},{provide:U,deps:[L],useFactory:bt},{provide:M,multi:!0,deps:[U],useFactory:Ot},{provide:M,multi:!0,deps:[U],useFactory:wt},{provide:M,multi:!0,deps:[U],useFactory:Et}]),St()]};var n}static forFeature(t,e,n={}){return{ngModule:Pt,providers:[{provide:j,multi:!0,useValue:t instanceof Object?{}:n},{provide:x,multi:!0,useValue:{key:t instanceof Object?t.name:t,reducerFactory:n instanceof r.q||!n.reducerFactory?q:n.reducerFactory,metaReducers:n instanceof r.q||!n.metaReducers?[]:n.metaReducers,initialState:n instanceof r.q||!n.initialState?void 0:n.initialState}},{provide:A,deps:[r.r,j,x],useFactory:Rt},{provide:P,multi:!0,useValue:t instanceof Object?t.reducer:e},{provide:R,multi:!0,useExisting:e instanceof r.q?e:P},{provide:k,multi:!0,deps:[r.r,P,[new r.p(R)]],useFactory:kt},St()]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})();function At(t,e){return e instanceof r.q?t.get(e):e}function Rt(t,e,n){return n.map((n,i)=>{if(e[i]instanceof r.q){const r=t.get(e[i]);return{key:n.key,reducerFactory:r.reducerFactory?r.reducerFactory:q,metaReducers:r.metaReducers?r.metaReducers:[],initialState:r.initialState}}return n})}function kt(t,e){return e.map(e=>e instanceof r.q?t.get(e):e)}function Nt(t){return"function"==typeof t?t():t}function Mt(t,e){return t.concat(e)}function Dt(t){if(t)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mCNh:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("SpAZ");function i(...t){return o(t)}function o(t){return 0===t.length?r.a:1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}}},mlxB:function(t,e,n){"use strict";function r(t){return t instanceof Date&&!isNaN(+t)}n.d(e,"a",function(){return r})},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},os0x:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},pLZG:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new o(t,e))}}class o{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return E}),n.d(e,"c",function(){return L}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return R}),n.d(e,"i",function(){return F}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return z}),n.d(e,"m",function(){return d}),n.d(e,"n",function(){return A}),n.d(e,"o",function(){return y}),n.d(e,"p",function(){return v}),n.d(e,"q",function(){return _}),n.d(e,"r",function(){return N}),n.d(e,"s",function(){return b}),n.d(e,"t",function(){return p}),n.d(e,"u",function(){return g}),n.d(e,"v",function(){return O}),n.d(e,"w",function(){return m}),n.d(e,"x",function(){return w}),n.d(e,"y",function(){return j}),n.d(e,"z",function(){return x}),n.d(e,"A",function(){return M}),n.d(e,"B",function(){return D}),n.d(e,"C",function(){return k}),n.d(e,"D",function(){return G}),n.d(e,"E",function(){return W}),n.d(e,"F",function(){return I}),n.d(e,"G",function(){return q}),n.d(e,"H",function(){return B}),n.d(e,"I",function(){return H});var r=n("os0x"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return d().indexOf("Electron/")>=0}function b(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function O(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,E.prototype.create),o}return Object(r.c)(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?S(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new C(i,a,r);return u},t}();function S(t,e){return t.replace(T,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var T=/\{\$([^}]+)}/g;function x(t){return JSON.parse(t)}function I(t){return JSON.stringify(t)}var P=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=x(c(o[0])||""),n=x(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},j=function(t){var e=P(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},A=function(t){var e=P(t).claims;return"object"==typeof e&&!0===e.admin};function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function N(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function M(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function D(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new U(t,e);return n.subscribe.bind(n)}var U=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function V(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function z(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function B(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(z(t,e,r)+"must be a valid function.")}function H(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(z(t,e,r)+"must be a valid context object.")}var W=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return _}),n.d(e,"c",function(){return m}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return v}),n.d(e,"f",function(){return E}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return O});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),v=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},m=new u.q("angularfire2.app.options"),_=new u.q("angularfire2.app.nameOrConfig"),b=new u.P("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const O=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:w,deps:[m,u.z,[new u.A,_]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",b.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:m,useValue:e},{provide:_,useValue:n}]}}}return t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({factory:function(e){return new(e||t)(u.Rb(u.B))},providers:[S]}),t})()}).call(this,n("3UD+")(t))},tS1D:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("D0XW");const i=(()=>{function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t})();var o=n("mlxB"),s=n("zx2A");class a{constructor(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}call(t,e){return e.subscribe(new u(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class u extends s.b{constructor(t,e,n,r,i){super(t),this.absoluteTimeout=e,this.waitFor=n,this.withObservable=r,this.scheduler=i,this.scheduleTimeout()}static dispatchTimeout(t){const{withObservable:e}=t;t._unsubscribeAndRecycle(),t.add(Object(s.c)(e,new s.a(t)))}scheduleTimeout(){const{action:t}=this;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(u.dispatchTimeout,this.waitFor,this))}_next(t){this.absoluteTimeout||this.scheduleTimeout(),super._next(t)}_unsubscribe(){this.action=void 0,this.scheduler=null,this.withObservable=null}}var c=n("z6cu");function l(t,e=r.a){return function(t,e,n=r.a){return r=>{let i=Object(o.a)(t),s=i?+t-n.now():Math.abs(t);return r.lift(new a(s,i,e,n))}}(t,Object(c.a)(new i),e)}},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new v(t,e))}}class v{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function d(){return new r.a}function p(){return t=>{return a()((e=d,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},z6cu:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("os0x"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.2.9",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.k)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.o)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.u)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var b=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new v(t)},"PRIVATE")),t.registerVersion(h,"0.6.15",void 0),t.registerVersion("fire-js","")}(b),e.a=b},zP0r:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t){return e=>e.lift(new o(t))}class o{constructor(t){this.total=t}call(t,e){return e.subscribe(new s(t,this.total))}}class s extends r.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyCCbpJIglbgAP6CNo48NBZPPbG7p9B9egg",authDomain:"photos-3bd12.firebaseapp.com",databaseURL:"https://photos-3bd12-default-rtdb.firebaseio.com",projectId:"photos-3bd12",storageBucket:"photos-3bd12.appspot.com"};let o=null;function s(){return o}const a=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Rb)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){f()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){f()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a))},t.\u0275prov=Object(r.Gb)({factory:d,token:t,providedIn:"platform"}),t})();function f(){return!!window.history.pushState}function d(){return new h(Object(r.Rb)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function g(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function y(t){return t&&"?"!==t[0]?"?"+t:t}let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Rb)(a).location;return new b(Object(r.Rb)(u),e&&e.origin||"")}const _=new r.q("appBaseHref");let b=(()=>{class t extends v{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(u),r.Rb(_,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends v{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(u),r.Rb(_,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),O=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=g(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+y(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(v),r.Rb(u))},t.normalizeQueryParams=y,t.joinWithSlash=p,t.stripTrailingSlash=g,t.\u0275prov=Object(r.Gb)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new O(Object(r.Rb)(v),Object(r.Rb)(u))}function E(t){return t.replace(/\/index.html$/,"")}var S=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const T=r.mb;class x{}let I=(()=>{class t extends x{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(T(e||this.locale)(t)){case S.Zero:return"zero";case S.One:return"one";case S.Two:return"two";case S.Few:return"few";case S.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.u))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function P(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let j=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.pb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r.ub)(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.s),r.Kb(r.t),r.Kb(r.l),r.Kb(r.D))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class A{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let R=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new A(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new k(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new k(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L),r.Kb(r.s))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class k{constructor(t,e){this.record=t,this.view=e}}let N=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new M,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){D("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){D("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class M{constructor(){this.$implicit=null,this.ngIf=null}}function D(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.ub)(e)}'.`)}let L=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[{provide:x,useClass:I}]}),t})();function F(t){return"browser"===t}function U(t){return"server"===t}let V=(()=>{class t{}return t.\u0275prov=Object(r.Gb)({token:t,providedIn:"root",factory:()=>new q(Object(r.Rb)(a),window,Object(r.Rb)(r.m))}),t})();class q{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=z(this.window.history)||z(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function z(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class B extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new B,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=W||(W=document.querySelector("base"),W)?W.getAttribute("href"):null;return null==e?null:(n=e,H||(H=document.createElement("a")),H.setAttribute("href",n),"/"===H.pathname.charAt(0)?H.pathname:"/"+H.pathname);var n}resetBaseElement(){W=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return P(document.cookie,t)}}let H,W=null;const G=new r.q("TRANSITION_ID"),K=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[G,a,r.r],multi:!0}];class Q{static init(){Object(r.X)(new Q)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const $=new r.q("EventManagerPlugins");let Y=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb($),r.Rb(r.z))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class X{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Z=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),J=(()=>{class t extends Z{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const tt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},et=/%COMP%/g;function nt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?nt(t,i,n):(i=i.replace(et,t),n.push(i))}return n}function rt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let it=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ot(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new st(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new at(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=nt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Y),r.Rb(J),r.Rb(r.c))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class ot{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(tt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=tt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=tt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.F.DashCase|r.F.Important)?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,rt(n)):this.eventManager.addEventListener(t,e,rt(n))}}class st extends ot{constructor(t,e,n,r){super(t),this.component=n;const i=nt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(et,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(et,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class at extends ot{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=nt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ut=(()=>{class t extends X{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const ct=["alt","control","meta","shift"],lt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ht={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ft={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let dt=(()=>{class t extends X{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(ct.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ht.hasOwnProperty(e)&&(e=ht[e]))}return lt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ct.forEach(r=>{r!=n&&(0,ft[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const pt=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){B.makeCurrent(),Q.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.tb)(document),document},deps:[]}],gt=Object(r.S)(r.W,"browser",pt),yt=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:$,useClass:ut,multi:!0,deps:[a,r.z,r.B]},{provide:$,useClass:dt,multi:!0,deps:[a]},[],{provide:it,useClass:it,deps:[Y,J,r.c]},{provide:r.E,useExisting:it},{provide:Z,useExisting:J},{provide:J,useClass:J,deps:[a]},{provide:r.M,useClass:r.M,deps:[r.z]},{provide:Y,useClass:Y,deps:[$,r.z]},[]];let vt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:G,useExisting:r.c},K]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Rb(t,12))},providers:yt,imports:[L,r.f]}),t})();"undefined"!=typeof window&&window;var mt=n("HDdC"),_t=n("DH7j"),bt=n("lJxs"),wt=n("XoHu"),Ot=n("Cfvw");function Ct(t,e){return new mt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(Ot.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const Et=new r.q("NgValueAccessor"),St={provide:Et,useExisting:Object(r.U)(()=>Tt),multi:!0};let Tt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.D),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.yb([St])]}),t})();const xt={provide:Et,useExisting:Object(r.U)(()=>Pt),multi:!0},It=new r.q("CompositionEventMode");let Pt=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.D),r.Kb(r.l),r.Kb(It,8))},t.\u0275dir=r.Fb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Ub("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.yb([xt])]}),t})();function jt(t){return null==t||0===t.length}function At(t){return null!=t&&"number"==typeof t.length}const Rt=new r.q("NgValidators"),kt=new r.q("NgAsyncValidators"),Nt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Mt{static min(t){return e=>{if(jt(e.value)||jt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(jt(e.value)||jt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return jt(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return jt(t.value)||Nt.test(t.value)?null:{email:!0}}static minLength(t){return e=>jt(e.value)||!At(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>At(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Mt.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(jt(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(Dt);return 0==e.length?null:function(t){return Ft(Ut(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(Dt);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(_t.a)(e))return Ct(e,null);if(Object(wt.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Ct(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Ct(t=1===t.length&&Object(_t.a)(t[0])?t[0]:t,null).pipe(Object(bt.a)(t=>e(...t)))}return Ct(t,null)}(Ut(t,e).map(Lt)).pipe(Object(bt.a)(Ft))}}}function Dt(t){return null!=t}function Lt(t){const e=Object(r.rb)(t)?Object(Ot.a)(t):t;return Object(r.qb)(e),e}function Ft(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ut(t,e){return e.map(e=>e(t))}function Vt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function qt(t){return null!=t?Mt.compose(Vt(t)):null}function zt(t){return null!=t?Mt.composeAsync(Vt(t)):null}function Bt(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ht(t){return t._rawValidators}function Wt(t){return t._rawAsyncValidators}let Gt=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=qt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=zt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})(),Kt=(()=>{class t extends Gt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Qt(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.wb]}),t})();const Qt=r.Pb(Kt);class $t extends Gt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Yt{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let Xt=(()=>{class t extends Yt{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb($t,2))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.wb]}),t})(),Zt=(()=>{class t extends Yt{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Kt,2))},t.\u0275dir=r.Fb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.wb]}),t})();const Jt={provide:Et,useExisting:Object(r.U)(()=>te),multi:!0};let te=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.D),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.yb([Jt])]}),t})();const ee={provide:Et,useExisting:Object(r.U)(()=>re),multi:!0};let ne=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),re=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get($t),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.D),r.Kb(r.l),r.Kb(ne),r.Kb(r.r))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.yb([ee])]}),t})();const ie={provide:Et,useExisting:Object(r.U)(()=>oe),multi:!0};let oe=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.D),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.yb([ie])]}),t})();const se={provide:Et,useExisting:Object(r.U)(()=>ae),multi:!0};let ae=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.D),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.yb([se])]}),t})();const ue={provide:Et,useExisting:Object(r.U)(()=>ce),multi:!0};let ce=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.D),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.yb([ue])]}),t})();function le(t,e){fe(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&pe(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&pe(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function he(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function fe(t,e,n){const r=Ht(t);null!==e.validator?t.setValidators(Bt(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=Wt(t);if(null!==e.asyncValidator?t.setAsyncValidators(Bt(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();he(e._rawValidators,n),he(e._rawAsyncValidators,n)}}function de(t,e,n){if(null!==t){if(null!==e.validator){const n=Ht(t);Array.isArray(n)&&n.length>0&&t.setValidators(n.filter(t=>t!==e.validator))}if(null!==e.asyncValidator){const n=Wt(t);Array.isArray(n)&&n.length>0&&t.setAsyncValidators(n.filter(t=>t!==e.asyncValidator))}}if(n){const t=()=>{};he(e._rawValidators,t),he(e._rawAsyncValidators,t)}}function pe(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ge(t,e){fe(t,e,!1)}const ye=[Tt,oe,te,ae,ce,re];function ve(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const me="VALID",_e="INVALID",be="PENDING",we="DISABLED";function Oe(t){return(Te(t)?t.validators:t)||null}function Ce(t){return Array.isArray(t)?qt(t):t||null}function Ee(t,e){return(Te(e)?e.asyncValidators:t)||null}function Se(t){return Array.isArray(t)?zt(t):t||null}function Te(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class xe{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Ce(this._rawValidators),this._composedAsyncValidatorFn=Se(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===me}get invalid(){return this.status===_e}get pending(){return this.status==be}get disabled(){return this.status===we}get enabled(){return this.status!==we}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Ce(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Se(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=be,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=we,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=me,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==me&&this.status!==be||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?we:me}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=be,this._hasOwnPendingAsyncValidator=!0;const e=Lt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Pe?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof je&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?we:this.errors?_e:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(be)?be:this._anyControlsHaveStatus(_e)?_e:me}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Te(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ie extends xe{constructor(t=null,e,n){super(Oe(e),Ee(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ve(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ve(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Pe extends xe{constructor(t,e,n){super(Oe(e),Ee(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Ie?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class je extends xe{constructor(t,e,n){super(Oe(e),Ee(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Ie?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let Ae=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Re=new r.q("NgModelWithFormControlWarning"),ke={provide:Kt,useExisting:Object(r.U)(()=>Ne)};let Ne=(()=>{class t extends Kt{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return le(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){ve(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);ge(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);ge(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){const n=()=>{};e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n),de(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}(t.control||null,t),e&&le(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){fe(this.form,this,!1),this._oldForm&&de(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Rt,10),r.Kb(kt,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Ub("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.yb([ke]),r.wb,r.xb]}),t})();const Me={provide:$t,useExisting:Object(r.U)(()=>De)};let De=(()=>{class t extends $t{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===Pt?n=t:(e=t,ye.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return t=null==this.name?this.name:this.name.toString(),[...this._parent.path,t];var t}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Kt,13),r.Kb(Rt,10),r.Kb(kt,10),r.Kb(Et,10),r.Kb(Re,8))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.yb([Me]),r.wb,r.xb]}),t._ngModelWarningSentOnce=!1,t})();const Le={provide:Rt,useExisting:Object(r.U)(()=>Fe),multi:!0};let Fe=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()}validate(t){return this.required?Mt.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.Ab("required",e.required?"":null)},inputs:{required:"required"},features:[r.yb([Le])]}),t})(),Ue=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})(),Ve=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new Pe(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new Ie(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new je(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Ie||t instanceof Pe||t instanceof je?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),qe=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[ne],imports:[Ue]}),t})(),ze=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Re,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[Ve,ne],imports:[Ue]}),t})();var Be=function(t){const e=t.get("password"),n=t.get("repeatPassword");return e.value!==n.value?{repeatPassword:!0}:null},He=n("LRne"),We=n("2Vo4"),Ge=n("z+Ro"),Ke=n("l7GE"),Qe=n("ZUHj"),$e=n("yCtX");const Ye={};class Xe{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Ze(t,this.resultSelector))}}class Ze extends Ke.a{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Ye),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(Object(Qe.a)(this,e,void 0,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Ye?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Je=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var tn=n("EY2u");function en(t){return new mt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(Ot.a)(n):Object(tn.b)()).subscribe(e)})}var nn=n("XNiG"),rn=n("bHdf");function on(){return Object(rn.a)(1)}var sn=n("pLZG"),an=n("7o/Q"),un=n("4I5i");function cn(t){return function(e){return 0===t?Object(tn.b)():e.lift(new ln(t))}}class ln{constructor(t){if(this.total=t,this.total<0)throw new un.a}call(t,e){return e.subscribe(new hn(t,this.total))}}class hn extends an.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function fn(t=gn){return e=>e.lift(new dn(t))}class dn{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new pn(t,this.errorFactory))}}class pn extends an.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Uw){t=Uw}this.destination.error(t)}}}function gn(){return new Je}function yn(t=null){return e=>e.lift(new vn(t))}class vn{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new mn(t,this.defaultValue))}}class mn extends an.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var _n=n("SpAZ"),bn=n("eIep"),wn=n("IzEk");function On(...t){return on()(Object(He.a)(...t))}function Cn(...t){const e=t[t.length-1];return Object(Ge.a)(e)?(t.pop(),n=>On(t,n,e)):e=>On(t,e)}var En=n("Kqap"),Sn=n("JIr8"),Tn=n("bOdf");function xn(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Object(sn.a)((e,n)=>t(e,n,r)):_n.a,Object(wn.a)(1),n?yn(e):fn(()=>new Je))}var In=n("5+tZ"),Pn=n("vkgz"),jn=n("quSY");class An{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Rn(t,this.callback))}}class Rn extends an.a{constructor(t,e){super(t),this.add(new jn.a(e))}}class kn{constructor(t,e){this.id=t,this.url=e}}class Nn extends kn{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mn extends kn{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Dn extends kn{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ln extends kn{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Fn extends kn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Un extends kn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vn extends kn{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qn extends kn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zn extends kn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bn{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hn{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Wn{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gn{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qn{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $n{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Yn="primary";class Xn{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Zn(t){return new Xn(t)}function Jn(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function tr(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function er(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!nr(t[i],e[i]))return!1;return!0}function nr(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function rr(t){return Array.prototype.concat.apply([],t)}function ir(t){return t.length>0?t[t.length-1]:null}function or(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function sr(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(Ot.a)(Promise.resolve(t)):Object(He.a)(t)}function ar(t,e,n){return n?function(t,e){return er(t,e)}(t.queryParams,e.queryParams)&&ur(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>nr(t[n],e[n]))}(t.queryParams,e.queryParams)&&cr(t.root,e.root)}function ur(t,e){if(!pr(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!ur(t.children[n],e.children[n]))return!1}return!0}function cr(t,e){return lr(t,e,e.segments)}function lr(t,e,n){if(t.segments.length>n.length)return!!pr(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!pr(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!cr(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!pr(t.segments,r)&&!!t.children.primary&&lr(t.children.primary,e,i)}}class hr{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zn(this.queryParams)),this._queryParamMap}toString(){return mr.serialize(this)}}class fr{constructor(t,e){this.segments=t,this.children=e,this.parent=null,or(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _r(this)}}class dr{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Zn(this.parameters)),this._parameterMap}toString(){return Tr(this)}}function pr(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function gr(t,e){let n=[];return or(t.children,(t,r)=>{r===Yn&&(n=n.concat(e(t,r)))}),or(t.children,(t,r)=>{r!==Yn&&(n=n.concat(e(t,r)))}),n}class yr{}class vr{parse(t){const e=new Ar(t);return new hr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+br(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Or(e)}=${Or(t)}`).join("&"):`${Or(e)}=${Or(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const mr=new vr;function _r(t){return t.segments.map(t=>Tr(t)).join("/")}function br(t,e){if(!t.hasChildren())return _r(t);if(e){const e=t.children.primary?br(t.children.primary,!1):"",n=[];return or(t.children,(t,e)=>{e!==Yn&&n.push(`${e}:${br(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=gr(t,(e,n)=>n===Yn?[br(t.children.primary,!1)]:[`${n}:${br(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${_r(t)}/${e[0]}`:`${_r(t)}/(${e.join("//")})`}}function wr(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Or(t){return wr(t).replace(/%3B/gi,";")}function Cr(t){return wr(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Er(t){return decodeURIComponent(t)}function Sr(t){return Er(t.replace(/\+/g,"%20"))}function Tr(t){return`${Cr(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Cr(t)}=${Cr(e[t])}`).join("")}`;var e}const xr=/^[^\/()?;=#]+/;function Ir(t){const e=t.match(xr);return e?e[0]:""}const Pr=/^[^=?&#]+/,jr=/^[^?&#]+/;class Ar{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fr([],{}):new fr([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new fr(t,e)),n}parseSegment(){const t=Ir(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new dr(Er(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Ir(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Ir(this.remaining);t&&(n=t,this.capture(n))}t[Er(e)]=Er(n)}parseQueryParam(t){const e=function(t){const e=t.match(Pr);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(jr);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Sr(e),i=Sr(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Ir(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Yn);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new fr([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Rr{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=kr(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=kr(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Nr(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Nr(t,this._root).map(t=>t.value)}}function kr(t,e){if(t===e.value)return e;for(const n of e.children){const e=kr(t,n);if(e)return e}return null}function Nr(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Nr(t,n);if(r.length)return r.unshift(e),r}return[]}class Mr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Dr(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Lr extends Rr{constructor(t,e){super(t),this.snapshot=e,Br(this,t)}toString(){return this.snapshot.toString()}}function Fr(t,e){const n=function(t,e){const n=new qr([],{},{},"",{},Yn,e,null,t.root,-1,{});return new zr("",new Mr(n,[]))}(t,e),r=new We.a([new dr("",{})]),i=new We.a({}),o=new We.a({}),s=new We.a({}),a=new We.a(""),u=new Ur(r,i,s,a,o,Yn,e,n.root);return u.snapshot=n.root,new Lr(new Mr(u,[]),n)}class Ur{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(bt.a)(t=>Zn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(bt.a)(t=>Zn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Vr(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class qr{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zr extends Rr{constructor(t,e){super(e),this.url=t,Br(this,e)}toString(){return Hr(this._root)}}function Br(t,e){e.value._routerState=t,e.children.forEach(e=>Br(t,e))}function Hr(t){const e=t.children.length>0?` { ${t.children.map(Hr).join(", ")} } `:"";return`${t.value}${e}`}function Wr(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,er(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),er(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!er(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),er(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Gr(t,e){return er(t.params,e.params)&&function(t,e){return pr(t,e)&&t.every((t,n)=>er(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Gr(t.parent,e.parent))}function Kr(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Kr(t,e,r);return Kr(t,e)})}(t,e,n);return new Mr(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Qr(e,t),t}{const n=new Ur(new We.a((r=e.value).url),new We.a(r.params),new We.a(r.queryParams),new We.a(r.fragment),new We.a(r.data),r.outlet,r.component,r),i=e.children.map(e=>Kr(t,e));return new Mr(n,i)}}var r}function Qr(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Qr(t.children[n],e.children[n])}function $r(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Yr(t){return"object"==typeof t&&null!=t&&t.outlets}function Xr(t,e,n,r,i){let o={};return r&&or(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new hr(n.root===t?e:Zr(n.root,t,e),o,i)}function Zr(t,e,n){const r={};return or(t.children,(t,i)=>{r[i]=t===e?n:Zr(t,e,n)}),new fr(t.segments,r)}class Jr{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&$r(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Yr);if(r&&r!==ir(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ti{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ei(t,e,n){if(t||(t=new fr([],{})),0===t.segments.length&&t.hasChildren())return ni(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Yr(s))break;const a=""+s,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!si(a,u,e))return o;r+=2}else{if(!si(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new fr(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new fr(t.segments.slice(r.pathIndex),t.children),ni(e,0,i)}return r.match&&0===i.length?new fr(t.segments,{}):r.match&&!t.hasChildren()?ri(t,e,n):r.match?ni(t,0,i):ri(t,e,n)}function ni(t,e,n){if(0===n.length)return new fr(t.segments,{});{const r=function(t){return Yr(t[0])?t[0].outlets:{[Yn]:t}}(n),i={};return or(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=ei(t.children[r],e,n))}),or(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new fr(t.segments,i)}}function ri(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Yr(o)){const t=ii(o.outlets);return new fr(r,t)}if(0===i&&$r(n[0])){r.push(new dr(t.segments[e].path,n[0])),i++;continue}const s=Yr(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&$r(a)?(r.push(new dr(s,oi(a))),i+=2):(r.push(new dr(s,{})),i++)}return new fr(r,{})}function ii(t){const e={};return or(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=ri(new fr([],{}),0,t))}),e}function oi(t){const e={};return or(t,(t,n)=>e[n]=""+t),e}function si(t,e,n){return t==n.path&&er(e,n.parameters)}class ai{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Wr(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Dr(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),or(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Dr(t),i=t.value.component?n.children:e;or(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Dr(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Qn(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Gn(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Wr(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),ui(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function ui(t){Wr(t.value),t.children.forEach(ui)}class ci{constructor(t,e){this.routes=t,this.module=e}}function li(t){return"function"==typeof t}function hi(t){return t instanceof hr}const fi=Symbol("INITIAL_VALUE");function di(){return Object(bn.a)(t=>function(...t){let e=void 0,n=void 0;return Object(Ge.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(_t.a)(t[0])&&(t=t[0]),Object($e.a)(t,n).lift(new Xe(e))}(...t.map(t=>t.pipe(Object(wn.a)(1),Cn(fi)))).pipe(Object(En.a)((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==fi)return t;if(r===fi&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||hi(r))return r}return t},t)},fi),Object(sn.a)(t=>t!==fi),Object(bt.a)(t=>hi(t)?t:!0===t),Object(wn.a)(1)))}let pi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:function(){return[so]},encapsulation:2}),t})();function gi(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];yi(r,vi(e,r))}}function yi(t,e){t.children&&gi(t.children,e)}function vi(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function mi(t){const e=t.children&&t.children.map(mi),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Yn&&(n.component=pi),n}function _i(t){return t.outlet||Yn}class bi{constructor(t){this.segmentGroup=t||null}}class wi{constructor(t){this.urlTree=t}}function Oi(t){return new mt.a(e=>e.error(new bi(t)))}function Ci(t){return new mt.a(e=>e.error(new wi(t)))}function Ei(t){return new mt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Si{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Yn).pipe(Object(bt.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Object(Sn.a)(t=>{if(t instanceof wi)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof bi)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Yn).pipe(Object(bt.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Object(Sn.a)(t=>{if(t instanceof bi)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new fr([],{[Yn]:t}):t;return new hr(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(bt.a)(t=>new fr([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(He.a)({});const n=[],r=[],i={};return or(t,(t,o)=>{const s=e(o,t).pipe(Object(bt.a)(t=>i[o]=t));o===Yn?n.push(s):r.push(s)}),He.a.apply(null,n.concat(r)).pipe(on(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Object(sn.a)((e,n)=>t(e,n,r)):_n.a,cn(1),n?yn(e):fn(()=>new Je))}(),Object(bt.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){const s=function(t){return t.reduce((t,e)=>{const n=_i(e);return t.has(n)?t.get(n).push(e):t.set(n,[e]),t},new Map)}(n);s.has(i)||s.set(i,[]);const a=n=>Object(Ot.a)(n).pipe(Object(Tn.a)(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Object(Sn.a)(t=>{if(t instanceof bi)return Object(He.a)(null);throw t}))),xn(t=>null!==t),Object(Sn.a)(t=>{if(t instanceof Je||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(He.a)(new fr([],{}));throw new bi(e)}throw t})),u=Array.from(s.entries()).map(([t,e])=>{const n=a(e);return t===i?n:n.pipe(Object(bt.a)(()=>null),Object(Sn.a)(()=>Object(He.a)(null)))});return Object(Ot.a)(u).pipe(t=>t.lift(new Xe(void 0)),xn(),Object(bt.a)(t=>t.find(t=>null!==t)))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return _i(r)!==o&&""!==r.path?Oi(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Oi(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Ci(i):this.lineralizeSegments(n,i).pipe(Object(In.a)(n=>{const i=new fr(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Ti(e,r,i);if(!s)return Oi(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Ci(l):this.lineralizeSegments(r,l).pipe(Object(In.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(bt.a)(t=>(n._loadedConfig=t,new fr(r,{})))):Object(He.a)(new fr(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=Ti(e,n,r);if(!i)return Oi(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(In.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Ii(t,e,n)&&_i(n)!==Yn)}(t,n,r)?{segmentGroup:xi(new fr(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&_i(r)!==Yn&&(n[_i(r)]=new fr([],{}));return n}(r,new fr(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Ii(t,e,n))}(t,n,r)?{segmentGroup:xi(new fr(t.segments,function(t,e,n,r){const i={};for(const o of n)Ii(t,e,o)&&!r[_i(o)]&&(i[_i(o)]=new fr([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(bt.a)(t=>new fr(o,t))):0===r.length&&0===s.length?Object(He.a)(new fr(o,{})):this.expandSegment(n,i,r,s,Yn,!0).pipe(Object(bt.a)(t=>new fr(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(He.a)(new ci(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(He.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(In.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(bt.a)(t=>(e._loadedConfig=t,t))):function(t){return new mt.a(e=>e.error(Jn(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(He.a)(new ci([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(He.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&li(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!li(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return sr(o)});return Object(He.a)(i).pipe(di(),Object(Pn.a)(t=>{if(!hi(t))return;const e=Jn(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(bt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(He.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Ei(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new hr(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return or(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return or(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new fr(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Ti(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||tr)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function xi(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new fr(t.segments.concat(e.segments),e.children)}return t}function Ii(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}class Pi{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ji{constructor(t,e){this.component=t,this.route=e}}function Ai(t,e,n){const r=t._root;return ki(r,e?e._root:null,n,[r.value])}function Ri(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function ki(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Dr(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!pr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!pr(t.url,e.url)||!er(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gr(t,e)||!er(t.queryParams,e.queryParams);case"paramsChange":default:return!Gr(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Pi(r)):(o.data=s.data,o._resolvedData=s._resolvedData),ki(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ji(a.outlet.component,s))}else s&&Ni(e,a,i),i.canActivateChecks.push(new Pi(r)),ki(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),or(o,(t,e)=>Ni(t,n.getContext(e),i)),i}function Ni(t,e,n){const r=Dr(t),i=t.value;or(r,(t,r)=>{Ni(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new ji(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Mi(t,e){return null!==t&&e&&e(new Kn(t)),Object(He.a)(!0)}function Di(t,e){return null!==t&&e&&e(new Wn(t)),Object(He.a)(!0)}function Li(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(He.a)(!0);const i=r.map(r=>en(()=>{const i=Ri(r,e,n);let o;if(function(t){return t&&li(t.canActivate)}(i))o=sr(i.canActivate(e,t));else{if(!li(i))throw new Error("Invalid CanActivate guard");o=sr(i(e,t))}return o.pipe(xn())}));return Object(He.a)(i).pipe(di())}function Fi(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>en(()=>{const i=e.guards.map(i=>{const o=Ri(i,e.node,n);let s;if(function(t){return t&&li(t.canActivateChild)}(o))s=sr(o.canActivateChild(r,t));else{if(!li(o))throw new Error("Invalid CanActivateChild guard");s=sr(o(r,t))}return s.pipe(xn())});return Object(He.a)(i).pipe(di())}));return Object(He.a)(i).pipe(di())}class Ui{}class Vi{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=Bi(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Yn),n=new qr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Yn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Mr(n,e),i=new zr(this.url,r);return this.inheritParamsAndData(i._root),Object(He.a)(i)}catch(Uw){return new mt.a(e=>e.error(Uw))}}inheritParamsAndData(t){const e=t.value,n=Vr(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=gr(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===Yn?-1:e.value.outlet===Yn?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(Uw){if(!(Uw instanceof Ui))throw Uw}if(this.noLeftoversInUrl(e,n,r))return[];throw new Ui}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Ui;if((t.outlet||Yn)!==r)throw new Ui;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?ir(n).parameters:{};i=new qr(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Wi(t),r,t.component,t,qi(e),zi(e)+n.length,Gi(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Ui;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||tr)(n,t,e);if(!r)throw new Ui;const i={};or(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new qr(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Wi(t),r,t.component,t,qi(e),zi(e)+o.length,Gi(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Bi(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new Mr(i,t)]}if(0===a.length&&0===c.length)return[new Mr(i,[])];const l=this.processSegment(a,u,c,Yn);return[new Mr(i,l)]}}function qi(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function zi(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Bi(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Hi(t,e,n)&&_i(n)!==Yn)}(t,n,r)){const i=new fr(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&_i(o)!==Yn){const n=new fr([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[_i(o)]=n}return i}(t,e,r,new fr(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Hi(t,e,n))}(t,n,r)){const o=new fr(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Hi(t,n,a)&&!i[_i(a)]){const n=new fr([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[_i(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new fr(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Hi(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Wi(t){return t.data||{}}function Gi(t){return t.resolve||{}}function Ki(t){return function(e){return e.pipe(Object(bn.a)(e=>{const n=t(e);return n?Object(Ot.a)(n).pipe(Object(bt.a)(()=>e)):Object(Ot.a)([e])}))}}class Qi extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const $i=new r.q("ROUTES");class Yi{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(bt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new ci(rr(r.injector.get($i)).map(mi),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(Ot.a)(this.loader.load(t)):sr(t()).pipe(Object(In.a)(t=>t instanceof r.v?Object(He.a)(t):Object(Ot.a)(this.compiler.compileModuleAsync(t))))}}class Xi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Zi,this.attachRef=null}}class Zi{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Xi,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Ji{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function to(t){throw t}function eo(t,e,n){return e.parse("/")}function no(t,e){return Object(He.a)(null)}let ro=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new nn.a,this.errorHandler=to,this.malformedUriErrorHandler=eo,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:no,afterPreactivation:no},this.urlHandlingStrategy=new Ji,this.routeReuseStrategy=new Qi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.x),this.console=o.get(r.Y);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z,this.resetConfig(u),this.currentUrlTree=new hr(new fr([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Yi(s,a,t=>this.triggerEvent(new Bn(t)),t=>this.triggerEvent(new Hn(t))),this.routerState=Fr(this.currentUrlTree,this.rootComponentType),this.transitions=new We.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Object(sn.a)(t=>0!==t.id),Object(bt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Object(bn.a)(t=>{let n=!1,r=!1;return Object(He.a)(t).pipe(Object(Pn.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Object(bn.a)(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(He.a)(t).pipe(Object(bn.a)(t=>{const n=this.transitions.getValue();return e.next(new Nn(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?tn.a:[t]}),Object(bn.a)(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(Object(bn.a)(t=>function(t,e,n,r,i){return new Si(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(bt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(Pn.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(In.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new Vi(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(bt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Pn.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(Pn.a)(t=>{const n=new Fn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Nn(n,this.serializeUrl(r),i,o);e.next(a);const u=Fr(r,this.rootComponentType).snapshot;return Object(He.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),tn.a}),Ki(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Pn.a)(t=>{const e=new Un(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(bt.a)(t=>Object.assign(Object.assign({},t),{guards:Ai(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(In.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(He.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Ot.a)(t).pipe(Object(In.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(He.a)(!0);const s=o.map(o=>{const s=Ri(o,e,i);let a;if(function(t){return t&&li(t.canDeactivate)}(s))a=sr(s.canDeactivate(t,e,n,r));else{if(!li(s))throw new Error("Invalid CanDeactivate guard");a=sr(s(t,e,n,r))}return a.pipe(xn())});return Object(He.a)(s).pipe(di())}(t.component,t.route,n,e,r)),xn(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(In.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(Ot.a)(e).pipe(Object(Tn.a)(e=>Object(Ot.a)([Di(e.route.parent,r),Mi(e.route,r),Fi(t,e.path,n),Li(t,e.route,n)]).pipe(on(),xn(t=>!0!==t,!0))),xn(t=>!0!==t,!0))}(r,o,t,e):Object(He.a)(n)),Object(bt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Pn.a)(t=>{if(hi(t.guardsResult)){const e=Jn(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(Pn.a)(t=>{const e=new Vn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Object(sn.a)(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Dn(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Ki(t=>{if(t.guards.canActivateChecks.length)return Object(He.a)(t).pipe(Object(Pn.a)(t=>{const e=new qn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(bn.a)(t=>{let n=!1;return Object(He.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(In.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(He.a)(t);let o=0;return Object(Ot.a)(n).pipe(Object(Tn.a)(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(He.a)({});const o={};return Object(Ot.a)(i).pipe(Object(In.a)(i=>function(t,e,n,r){const i=Ri(t,e,r);return sr(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Pn.a)(t=>{o[i]=t}))),cn(1),Object(In.a)(()=>Object.keys(o).length===i.length?Object(He.a)(o):tn.a))}(t._resolve,t,e,r).pipe(Object(bt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Vr(t,n).resolve),null)))}(t.route,e,r,i)),Object(Pn.a)(()=>o++),cn(1),Object(In.a)(e=>o===n.length?Object(He.a)(t):tn.a))}))}),Object(Pn.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Dn(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Pn.a)(t=>{const e=new zn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Ki(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(bt.a)(t=>{const e=function(t,e,n){const r=Kr(t,e._root,n?n._root:void 0);return new Lr(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Pn.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(bt.a)(t=>(new ai(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(Pn.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Dn(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new An(i))),Object(Sn.a)(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=hi(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Dn(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ln(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(ud){t.reject(ud)}}var i;return tn.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){gi(t),this.config=t.map(mi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Xr(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Jr(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return or(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Jr(n,e,r)}(n);if(o.toRoot())return Xr(e.root,new fr([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new ti(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new ti(t,t===e.root,0)}const r=$r(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new ti(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?ni(s.segmentGroup,s.index,o.commands):ei(s.segmentGroup,s.index,o.commands);return Xr(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=hi(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Uw){e=this.malformedUriErrorHandler(Uw,this.urlSerializer,t)}return e}isActive(t,e){if(hi(t))return ar(this.currentUrlTree,t,e);const n=this.parseUrl(t);return ar(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Mn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.N),r.Rb(yr),r.Rb(Zi),r.Rb(O),r.Rb(r.r),r.Rb(r.w),r.Rb(r.i),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),io=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new nn.a,this.subscription=t.events.subscribe(t=>{t instanceof Mn&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:oo(this.skipLocationChange),replaceUrl:oo(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:oo(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(ro),r.Kb(Ur),r.Kb(v))},t.\u0275dir=r.Fb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Ub("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Qb("href",e.href,r.dc),r.Ab("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[r.xb]}),t})();function oo(t){return""===t||!!t}let so=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Yn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ao(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Zi),r.Kb(r.Q),r.Kb(r.j),r.Sb("name"),r.Kb(r.h))},t.\u0275dir=r.Fb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ao{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Ur?this.route:t===Zi?this.childContexts:this.parent.get(t,e)}}class uo{}class co{preload(t,e){return Object(He.a)(null)}}let lo=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Yi(e,n,e=>t.triggerEvent(new Bn(e)),e=>t.triggerEvent(new Hn(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(sn.a)(t=>t instanceof Mn),Object(Tn.a)(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(Ot.a)(n).pipe(Object(rn.a)(),Object(bt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(In.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ro),r.Rb(r.w),r.Rb(r.i),r.Rb(r.r),r.Rb(uo))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),ho=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Nn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Mn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $n&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new $n(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ro),r.Rb(V),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const fo=new r.q("ROUTER_CONFIGURATION"),po=new r.q("ROUTER_FORROOT_GUARD"),go=[O,{provide:yr,useClass:vr},{provide:ro,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new ro(null,t,e,n,r,i,o,rr(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[yr,Zi,O,r.r,r.w,r.i,$i,fo,[class{},new r.A],[class{},new r.A]]},Zi,{provide:Ur,useFactory:function(t){return t.routerState.root},deps:[ro]},{provide:r.w,useClass:r.K},lo,co,class{preload(t,e){return e().pipe(Object(Sn.a)(()=>Object(He.a)(null)))}},{provide:fo,useValue:{enableTracing:!1}}];function yo(){return new r.y("Router",ro)}let vo=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[go,wo(e),{provide:po,useFactory:bo,deps:[[ro,new r.A,new r.J]]},{provide:fo,useValue:n||{}},{provide:v,useFactory:_o,deps:[u,[new r.p(_),new r.A],fo]},{provide:ho,useFactory:mo,deps:[ro,V,fo]},{provide:uo,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:co},{provide:r.y,multi:!0,useFactory:yo},[Oo,{provide:r.d,multi:!0,useFactory:Co,deps:[Oo]},{provide:So,useFactory:Eo,deps:[Oo]},{provide:r.b,multi:!0,useExisting:So}]]}}static forChild(e){return{ngModule:t,providers:[wo(e)]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Rb(po,8),r.Rb(ro,8))}}),t})();function mo(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ho(t,e,n)}function _o(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function bo(t){return"guarded"}function wo(t){return[{provide:r.a,multi:!0,useValue:t},{provide:$i,multi:!0,useValue:t}]}let Oo=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new nn.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(ro),r=this.injector.get(fo);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(He.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(fo),n=this.injector.get(lo),i=this.injector.get(ho),o=this.injector.get(ro),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.r))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function Co(t){return t.appInitializer.bind(t)}function Eo(t){return t.bootstrapListener.bind(t)}const So=new r.q("Router Initializer");var To=n("D0XW"),xo=n("VRyK"),Io=n("w1tV"),Po=n("/uUt"),jo=n("zp1y");class Ao{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Ro(t,this.predicate))}}class Ro extends an.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var ko=n("spgP"),No=(n("6Uf2"),n("pxpQ")),Mo=n("jtHE");function Do(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Mo.a(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}})):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Lo(t,e){return e?Object(bn.a)(()=>t,e):Object(bn.a)(()=>t)}var Fo=n("tf+s");const Uo=new r.q("angularfire2.auth.use-emulator"),Vo=new r.q("angularfire2.auth.settings"),qo=new r.q("angularfire2.auth.tenant-id"),zo=new r.q("angularfire2.auth.langugage-code"),Bo=new r.q("angularfire2.auth.use-device-language"),Ho=new r.q("angularfire.auth.persistence");let Wo=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new ko.d(i),f=Object(ko.h)(h),d=new nn.a,p=Object(He.a)(void 0).pipe(Object(No.b)(h.outsideAngular),Object(bn.a)(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(bt.a)(()=>Object(ko.g)(t,i,e)),Object(bt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(ko.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator("http://"+e.join(":")),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Do({bufferSize:1,refCount:!1}));if(U(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(He.a)(null);else{p.pipe(xn()).subscribe();const t=p.pipe(Object(bn.a)(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Do({bufferSize:1,refCount:!1})),e=t=>new mt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Object(bn.a)(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Object(bn.a)(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Lo(n),Object(Fo.a)(h.outsideAngular),Object(No.b)(h.insideAngular)),this.user=t.pipe(Lo(r),Object(Fo.a)(h.outsideAngular),Object(No.b)(h.insideAngular)),this.idToken=this.user.pipe(Object(bn.a)(t=>t?Object(Ot.a)(t.getIdToken()):Object(He.a)(null))),this.idTokenResult=this.user.pipe(Object(bn.a)(t=>t?Object(Ot.a)(t.getIdTokenResult()):Object(He.a)(null))),this.credential=Object(xo.a)(t,d,this.authState.pipe(Object(sn.a)(t=>!t))).pipe(Object(bt.a)(t=>(null==t?void 0:t.user)?t:null),Object(Fo.a)(h.outsideAngular),Object(No.b)(h.insideAngular))}return Object(ko.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ko.c),r.Rb(ko.b,8),r.Rb(r.B),r.Rb(r.z),r.Rb(Uo,8),r.Rb(Vo,8),r.Rb(qo,8),r.Rb(zo,8),r.Rb(Bo,8),r.Rb(Ho,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(ko.c),Object(r.Rb)(ko.b,8),Object(r.Rb)(r.B),Object(r.Rb)(r.z),Object(r.Rb)(Uo,8),Object(r.Rb)(Vo,8),Object(r.Rb)(qo,8),Object(r.Rb)(zo,8),Object(r.Rb)(Bo,8),Object(r.Rb)(Ho,8))},token:t,providedIn:"any"}),t})();Object(ko.e)(Wo,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var Go=n("Jgta");function Ko(t){return null==t}function Qo(t){return"function"==typeof t.set}function $o(t,e){return Qo(e)?e:t.ref(e)}function Yo(t,e){if("string"==typeof t)return e.stringCase();if(Qo(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Xo(t,e,n="on",r=To.b){return new mt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(bt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(Io.a)())}function Zo(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Jo(t,e){const{payload:n,prevKey:r,key:i}=e,o=Zo(t,i),s=function(t,e){if(Ko(e))return 0;{const n=Zo(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function ts(t){return(Ko(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function es(t,e,n){return function(t,e,n){return Xo(t,"value","once",n).pipe(Object(bn.a)(r=>{const i=[Object(He.a)(r)];return e.forEach(e=>i.push(Xo(t,e,"on",n))),Object(xo.a)(...i).pipe(Object(En.a)(Jo,[]))}),Object(Po.a)())}(t,e=ts(e),n)}function ns(t,e,n){const r=(e=ts(e)).map(e=>Xo(t,e,"on",n));return Object(xo.a)(...r)}function rs(t,e){return function(n,r){return Yo(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function is(t,e){return function(){return Xo(t,"value","on",e)}}const os=new r.q("angularfire2.realtimeDatabaseURL"),ss=new r.q("angularfire2.database.use-emulator");let as=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new ko.d(i),this.keepUnstableUntilFirst=Object(ko.h)(this.schedulers);const a=o,u=Object(ko.g)(t,i,e);!Go.a.auth&&s&&Object(ko.j)(),this.database=Object(ko.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>$o(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:rs(r,"update"),set:rs(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Yo(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>es(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>ns(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Xo(t,"value","on",e).pipe(Object(bt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(Object(jo.a)(e),Object(bt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Ao(r))),Object(bt.a)(t=>t.actions));var r}(t,ns(t,e).pipe(Object(En.a)((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>es(t,r,n).pipe(Object(bt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>$o(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>is(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>is(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(bt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ko.c),r.Rb(ko.b,8),r.Rb(os,8),r.Rb(r.B),r.Rb(r.z),r.Rb(ss,8),r.Rb(Uo,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(ko.c),Object(r.Rb)(ko.b,8),Object(r.Rb)(os,8),Object(r.Rb)(r.B),Object(r.Rb)(r.z),Object(r.Rb)(ss,8),Object(r.Rb)(Uo,8))},token:t,providedIn:"any"}),t})(),us=(()=>{class t{constructor(t){this.db=t}createUser(t){if(null==t?void 0:t.login)return this.db.list("users").push(t)}getUser(t){if(t)return this.db.list("/users",e=>e.orderByChild("login").equalTo(t)).valueChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(as))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function cs(t,e){1&t&&(r.Nb(0,"small"),r.gc(1," \u041f\u043e\u043b\u0435 email \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c "),r.Mb())}function ls(t,e){1&t&&(r.Nb(0,"small"),r.gc(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email "),r.Mb())}function hs(t,e){1&t&&(r.Nb(0,"small"),r.gc(1," \u041f\u043e\u043b\u0435 \u041b\u043e\u0433\u0438\u043d \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c "),r.Mb())}function fs(t,e){if(1&t&&(r.Nb(0,"small"),r.gc(1),r.Mb()),2&t){const t=r.Wb();r.zb(1),r.hc(" \u0414\u043b\u0438\u043d\u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 ",t.form.get("login").errors.minlength.requiredLength," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 ")}}function ds(t,e){1&t&&(r.Nb(0,"small"),r.gc(1," \u041f\u043e\u043b\u0435 \u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c "),r.Mb())}function ps(t,e){if(1&t&&(r.Nb(0,"small"),r.gc(1),r.Mb()),2&t){const t=r.Wb();r.zb(1),r.hc(" \u0414\u043b\u0438\u043d\u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 ",t.form.get("password").errors.minlength.requiredLength," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 ")}}function gs(t,e){1&t&&(r.Nb(0,"small"),r.gc(1," \u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442 "),r.Mb())}const ys=function(t){return{"alert-validate":t}};let vs=(()=>{class t{constructor(t,e){this.router=t,this.firebaseService=e}ngOnInit(){this.form=new Pe({email:new Ie("",[Mt.email,Mt.required]),login:new Ie("",[Mt.required,Mt.minLength(4)]),password:new Ie(null,[Mt.required,Mt.minLength(8)]),repeatPassword:new Ie(null,[])},{validators:Be})}submit(){if(this.form.valid){const t=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(this.form.value,["repeatPassword"]),e=Object.assign(Object.assign({},t),{photoIds:[]});this.firebaseService.createUser(e).then(()=>this.router.navigate(["/"])).catch(console.log)}else this.form.markAllAsTouched()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(ro),r.Kb(us))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-registration"]],decls:40,vars:20,consts:[[1,"container-auth"],[1,"wrap-auth"],[1,"card",3,"formGroup","ngSubmit"],[1,"p-card"],[1,"logo"],["data-icon","\udb81\udde3"],[1,"title"],[1,"input-block",3,"ngClass"],["type","text","placeholder","E-mail","formControlName","email","required","required",1,"input"],["data-placeholder","\udb80\uddee",1,"focus-input"],[1,"validation"],[4,"ngIf"],["type","text","placeholder","\u041b\u043e\u0433\u0438\u043d","formControlName","login","required","required",1,"input"],["data-placeholder","\udb80\udc04",1,"focus-input"],["type","password","placeholder","\u041f\u0430\u0440\u043e\u043b\u044c","formControlName","password","required","required",1,"input"],["data-placeholder","\udb80\udf3e",1,"focus-input"],["type","password","placeholder","\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c","formControlName","repeatPassword","required","required",1,"input"],[1,"control"],["type","submit",1,"btn"],[1,"forgot"],["routerLink","/login"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"form",2),r.Ub("ngSubmit",function(){return e.submit()}),r.Nb(3,"div",3),r.Nb(4,"span",4),r.Lb(5,"i",5),r.Mb(),r.Nb(6,"span",6),r.gc(7,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.Mb(),r.Nb(8,"div",7),r.Lb(9,"input",8),r.Lb(10,"span",9),r.Nb(11,"div",10),r.fc(12,cs,2,0,"small",11),r.fc(13,ls,2,0,"small",11),r.Mb(),r.Mb(),r.Nb(14,"div",7),r.Lb(15,"input",12),r.Lb(16,"span",13),r.Nb(17,"div",10),r.fc(18,hs,2,0,"small",11),r.fc(19,fs,2,1,"small",11),r.Mb(),r.Mb(),r.Nb(20,"div",7),r.Lb(21,"input",14),r.Lb(22,"span",15),r.Nb(23,"div",10),r.fc(24,ds,2,0,"small",11),r.fc(25,ps,2,1,"small",11),r.Mb(),r.Mb(),r.Nb(26,"div",7),r.Lb(27,"input",16),r.Lb(28,"span",15),r.Nb(29,"div",10),r.fc(30,gs,2,0,"small",11),r.Mb(),r.Mb(),r.Nb(31,"div",17),r.Nb(32,"button",18),r.gc(33,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.Mb(),r.Mb(),r.Mb(),r.Lb(34,"hr"),r.Nb(35,"div",19),r.Nb(36,"small"),r.gc(37,"\u0415\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"),r.Mb(),r.Nb(38,"a",20),r.gc(39,"\u0412\u0445\u043e\u0434"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.zb(2),r.Zb("formGroup",e.form),r.zb(6),r.Zb("ngClass",r.ac(12,ys,e.form.get("email").invalid&&e.form.get("email").touched)),r.zb(4),r.Zb("ngIf",null==e.form.get("email").errors?null:e.form.get("email").errors.required),r.zb(1),r.Zb("ngIf",null==e.form.get("email").errors?null:e.form.get("email").errors.email),r.zb(1),r.Zb("ngClass",r.ac(14,ys,e.form.get("login").invalid&&e.form.get("login").touched)),r.zb(4),r.Zb("ngIf",null==e.form.get("login").errors?null:e.form.get("login").errors.required),r.zb(1),r.Zb("ngIf",null==e.form.get("login").errors?null:e.form.get("login").errors.minlength),r.zb(1),r.Zb("ngClass",r.ac(16,ys,e.form.get("password").invalid&&e.form.get("password").touched)),r.zb(4),r.Zb("ngIf",null==e.form.get("password").errors?null:e.form.get("password").errors.required),r.zb(1),r.Zb("ngIf",null==e.form.get("password").errors?null:e.form.get("password").errors.minlength),r.zb(1),r.Zb("ngClass",r.ac(18,ys,(null==e.form.errors?null:e.form.errors.repeatPassword)&&e.form.get("repeatPassword").touched)),r.zb(4),r.Zb("ngIf",null==e.form.errors?null:e.form.errors.repeatPassword))},directives:[Ae,Zt,Ne,j,Pt,Xt,De,Fe,N,io],styles:['.container-auth[_ngcontent-%COMP%]{width:100%;min-height:100vh;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;background-repeat:no-repeat;background-position:50%;background-size:cover;position:relative;z-index:1;background-image:url(/assets/images/bg-01.jpg)}.container-auth[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;z-index:-1;width:100%;height:100%;top:0;left:0;background-color:hsla(0,0%,100%,.9)}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]{width:500px;border-radius:10px;padding-top:55px;padding-bottom:37px;background:-webkit-linear-gradient(top,#7579ff,#b224ef)}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .p-card[_ngcontent-%COMP%]{padding-left:55px;padding-right:55px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:120px;height:120px;border-radius:50%;background-color:#fff;margin:0 auto}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:before{content:attr(data-icon);font:normal normal normal 14px/1 Material-Design;font-size:60px;color:#333}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff;line-height:1.2;text-align:center;text-transform:uppercase;display:block;font-size:30px;padding-top:34px;padding-bottom:27px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]{width:100%;position:relative;border-bottom:2px solid hsla(0,0%,100%,.24);margin-bottom:30px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{font-size:16px;color:#fff;line-height:1.2;display:block;width:100%;height:45px;padding:0 5px 0 38px;outline:none;border:none;background:transparent}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus, .container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:valid{padding-left:5px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .focus-input[_ngcontent-%COMP%]{position:absolute;display:block;width:100%;height:100%;top:0;left:0;pointer-events:none}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .focus-input[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;bottom:-2px;left:0;width:0;height:2px;transition:all .4s;background:#fff}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .focus-input[_ngcontent-%COMP%]:after{font-family:Material-Design;content:attr(data-placeholder);font-size:22px;color:#fff;display:block;width:100%;position:absolute;top:6px;left:0;padding-left:5px;transition:all .4s}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus + .focus-input[_ngcontent-%COMP%]:after, .container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:valid + .focus-input[_ngcontent-%COMP%]:after{top:-22px;font-size:18px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus + .focus-input[_ngcontent-%COMP%]:before, .container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:valid + .focus-input[_ngcontent-%COMP%]:before{width:100%}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:16px;color:#555;line-height:1.2;display:flex;justify-content:center;align-items:center;padding:0 20px;margin-top:15px;min-width:120px;height:50px;border-radius:25px;background:-webkit-linear-gradient(bottom,#7579ff,#b224ef);position:relative;z-index:1;transition:all .4s}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;z-index:-1;width:100%;height:100%;border-radius:25px;background-color:#fff;top:0;left:0;opacity:1;transition:all .4s}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{color:#fff}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:before{opacity:0}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:0;height:1px;background:hsla(0,0%,100%,.24);margin-top:40px}@media (max-width:576px){.container-auth[_ngcontent-%COMP%]   .p-card[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}}@keyframes fadein{0%{opacity:0}to{opacity:1}}','@charset "UTF-8";.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .alert-validate[_ngcontent-%COMP%]:after{content:"\udb84\ude38";position:absolute;font:normal normal normal 14px/1 Material-Design;font-size:20px;top:50%;right:5px;color:#c80000;transform:translateY(-50%)}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .alert-validate[_ngcontent-%COMP%]   .validation[_ngcontent-%COMP%]{max-width:70%;background-color:#fff;border:1px solid #c80000;border-radius:2px;padding:4px 25px 4px 10px;top:50%;transform:translateY(-50%);right:0;pointer-events:none;color:#c80000;font-size:13px;line-height:1.4;text-align:left;visibility:hidden;opacity:0;transition:opacity .4s}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .alert-validate[_ngcontent-%COMP%]:hover   .validation[_ngcontent-%COMP%]{visibility:visible;opacity:1}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .validation[_ngcontent-%COMP%]{position:absolute;visibility:hidden;opacity:0}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .forgot[_ngcontent-%COMP%]{padding-top:30px;text-align:center}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .forgot[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:13px;color:#e5e5e5;line-height:1.5}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .forgot[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px;color:#fff;line-height:1.5;padding-left:5px}']}),t})();var ms=n("l7P3"),_s=function(t){return t.setUser="[USER] set user",t.updateIsAuth="[USER] update isAuth",t}({});const bs="user",ws={user:null,isAuth:!1},Os=Object(ms.o)(bs),Cs=Object(ms.p)(Os,t=>t.user),Es=Object(ms.p)(Os,t=>t.isAuth);let Ss=(()=>{class t{constructor(t,e,n){this.router=t,this.firebaseService=e,this.store$=n,this.user$=this.store$.pipe(Object(ms.r)(Cs)),this.isAuth$=this.store$.pipe(Object(ms.r)(Es))}ngOnInit(){this.form=new Pe({login:new Ie("",[Mt.required]),password:new Ie(null,[Mt.required,Mt.minLength(6)])})}submit(){this.form.valid?this.firebaseService.getUser(this.form.value.login).subscribe(t=>{var e;(null===(e=t[0])||void 0===e?void 0:e.password)===this.form.value.password?this.router.navigate(["/"]):console.log("\u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}):this.form.markAllAsTouched()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(ro),r.Kb(us),r.Kb(ms.h))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-login"]],decls:24,vars:2,consts:[[1,"container-auth"],[1,"wrap-auth"],[1,"card",3,"formGroup","ngSubmit"],[1,"p-card"],[1,"logo"],["data-icon","\udb80\udef5"],[1,"title"],[1,"input-block"],["type","text","placeholder","\u041b\u043e\u0433\u0438\u043d","formControlName","login","required","required",1,"input"],["data-placeholder","\udb80\udc04",1,"focus-input"],["type","password","placeholder","\u041f\u0430\u0440\u043e\u043b\u044c","formControlName","password","required","required",1,"input"],["data-placeholder","\udb80\udf3e",1,"focus-input"],[1,"control"],["type","submit",1,"btn",3,"disabled"],[1,"forgot"],["routerLink","/registration"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"form",2),r.Ub("ngSubmit",function(){return e.submit()}),r.Nb(3,"div",3),r.Nb(4,"span",4),r.Lb(5,"i",5),r.Mb(),r.Nb(6,"span",6),r.gc(7,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.Mb(),r.Nb(8,"div",7),r.Lb(9,"input",8),r.Lb(10,"span",9),r.Mb(),r.Nb(11,"div",7),r.Lb(12,"input",10),r.Lb(13,"span",11),r.Mb(),r.Nb(14,"div",12),r.Nb(15,"button",13),r.gc(16,"\u0412\u0445\u043e\u0434"),r.Mb(),r.Mb(),r.Mb(),r.Lb(17,"hr"),r.Nb(18,"div",14),r.Nb(19,"a"),r.gc(20,"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"),r.Mb(),r.Lb(21,"br"),r.Nb(22,"a",15),r.gc(23,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.zb(2),r.Zb("formGroup",e.form),r.zb(13),r.Zb("disabled",e.form.pending))},directives:[Ae,Zt,Ne,Pt,Xt,De,Fe,io],styles:['.container-auth[_ngcontent-%COMP%]{width:100%;min-height:100vh;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;background-repeat:no-repeat;background-position:50%;background-size:cover;position:relative;z-index:1;background-image:url(/assets/images/bg-01.jpg)}.container-auth[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;z-index:-1;width:100%;height:100%;top:0;left:0;background-color:hsla(0,0%,100%,.9)}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]{width:500px;border-radius:10px;padding-top:55px;padding-bottom:37px;background:-webkit-linear-gradient(top,#7579ff,#b224ef)}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .p-card[_ngcontent-%COMP%]{padding-left:55px;padding-right:55px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:120px;height:120px;border-radius:50%;background-color:#fff;margin:0 auto}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:before{content:attr(data-icon);font:normal normal normal 14px/1 Material-Design;font-size:60px;color:#333}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff;line-height:1.2;text-align:center;text-transform:uppercase;display:block;font-size:30px;padding-top:34px;padding-bottom:27px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]{width:100%;position:relative;border-bottom:2px solid hsla(0,0%,100%,.24);margin-bottom:30px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{font-size:16px;color:#fff;line-height:1.2;display:block;width:100%;height:45px;padding:0 5px 0 38px;outline:none;border:none;background:transparent}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus, .container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:valid{padding-left:5px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .focus-input[_ngcontent-%COMP%]{position:absolute;display:block;width:100%;height:100%;top:0;left:0;pointer-events:none}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .focus-input[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;bottom:-2px;left:0;width:0;height:2px;transition:all .4s;background:#fff}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .focus-input[_ngcontent-%COMP%]:after{font-family:Material-Design;content:attr(data-placeholder);font-size:22px;color:#fff;display:block;width:100%;position:absolute;top:6px;left:0;padding-left:5px;transition:all .4s}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus + .focus-input[_ngcontent-%COMP%]:after, .container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:valid + .focus-input[_ngcontent-%COMP%]:after{top:-22px;font-size:18px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus + .focus-input[_ngcontent-%COMP%]:before, .container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:valid + .focus-input[_ngcontent-%COMP%]:before{width:100%}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:16px;color:#555;line-height:1.2;display:flex;justify-content:center;align-items:center;padding:0 20px;margin-top:15px;min-width:120px;height:50px;border-radius:25px;background:-webkit-linear-gradient(bottom,#7579ff,#b224ef);position:relative;z-index:1;transition:all .4s}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;z-index:-1;width:100%;height:100%;border-radius:25px;background-color:#fff;top:0;left:0;opacity:1;transition:all .4s}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{color:#fff}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:before{opacity:0}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:0;height:1px;background:hsla(0,0%,100%,.24);margin-top:40px}@media (max-width:576px){.container-auth[_ngcontent-%COMP%]   .p-card[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}}@keyframes fadein{0%{opacity:0}to{opacity:1}}',".container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .forgot[_ngcontent-%COMP%]{padding-top:30px;text-align:center}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .forgot[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:13px;color:#e5e5e5;line-height:1.5}"]}),t})();class Ts{}class xs{}class Is{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Is?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Is;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Is?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Ps{encodeKey(t){return js(t)}encodeValue(t){return js(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function js(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class As{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Ps,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new As({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Rs(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function ks(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Ns(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Ms{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Is),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new As,this.urlWithParams=e}serializeBody(){return null===this.body?null:Rs(this.body)||ks(this.body)||Ns(this.body)||"string"==typeof this.body?this.body:this.body instanceof As?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ns(this.body)?null:ks(this.body)?this.body.type||null:Rs(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof As?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new Ms(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var Ds=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Ls{constructor(t,e=200,n="OK"){this.headers=t.headers||new Is,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Fs extends Ls{constructor(t={}){super(t),this.type=Ds.ResponseHeader}clone(t={}){return new Fs({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Us extends Ls{constructor(t={}){super(t),this.type=Ds.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Us({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Vs extends Ls{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function qs(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let zs=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Ms)r=t;else{let i=void 0;i=n.headers instanceof Is?n.headers:new Is(n.headers);let o=void 0;n.params&&(o=n.params instanceof As?n.params:new As({fromObject:n.params})),r=new Ms(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(He.a)(r).pipe(Object(Tn.a)(t=>this.handler.handle(t)));if(t instanceof Ms||"events"===n.observe)return i;const o=i.pipe(Object(sn.a)(t=>t instanceof Us));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(bt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(bt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(bt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(bt.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new As).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,qs(n,e))}post(t,e,n={}){return this.request("POST",t,qs(n,e))}put(t,e,n={}){return this.request("PUT",t,qs(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Ts))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class Bs{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Hs=new r.q("HTTP_INTERCEPTORS");let Ws=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Gs=/^\)\]\}',?\n/;class Ks{}let Qs=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),$s=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new mt.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Is(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new Fs({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(Gs,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Us({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Vs({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Vs({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:Ds.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:Ds.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:Ds.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Ks))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Ys=new r.q("XSRF_COOKIE_NAME"),Xs=new r.q("XSRF_HEADER_NAME");class Zs{}let Js=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=P(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(r.B),r.Rb(Ys))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),ta=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Zs),r.Rb(Xs))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),ea=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Hs,[]);this.chain=t.reduceRight((t,e)=>new Bs(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(xs),r.Rb(r.r))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),na=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:ta,useClass:Ws}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Ys,useValue:e.cookieName}:[],e.headerName?{provide:Xs,useValue:e.headerName}:[]]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[ta,{provide:Hs,useExisting:ta,multi:!0},{provide:Zs,useClass:Js},{provide:Ys,useValue:"XSRF-TOKEN"},{provide:Xs,useValue:"X-XSRF-TOKEN"}]}),t})(),ra=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[zs,{provide:Ts,useClass:ea},$s,{provide:xs,useExisting:$s},Qs,{provide:Ks,useExisting:Qs}],imports:[[na.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var ia=n("mlxB"),oa=n("WMd4");class sa{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new aa(t,this.delay,this.scheduler))}}class aa extends an.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(aa.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new ua(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(oa.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(oa.a.createComplete()),this.unsubscribe()}}class ua{constructor(t,e){this.time=t,this.notification=e}}let ca=(()=>{class t{constructor(t){this.http=t}addTodo(t){const e=new Is({MyCustomHeader:Math.random().toString()});return this.http.post("https://jsonplaceholder.typicode.com/todos",t,{headers:e})}fetchPhotos(t){let e=new As;return e=e.append("client_id","0bd7304d669c2a900ff77e181962efac03911ab095bbb9ed817a92323ea30d63"),e=e.append("page",t.toString()),this.http.get("https://api.unsplash.com/photos",{params:e}).pipe(function(t,e=To.a){const n=Object(ia.a)(t)?+t-e.now():Math.abs(t);return t=>t.lift(new sa(n,e))}(1!==t?3e3:0))}removeTodo(t){return this.http.delete("https://jsonplaceholder.typicode.com/todos/"+t)}completeTodo(t){return this.http.put("https://jsonplaceholder.typicode.com/todos/"+t,{completed:!0})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(zs))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const la=["anchor"],ha=["*"];let fa=(()=>{class t{constructor(t,e){this.host=t,this.platformId=e,this.options={},this.scrolled=new r.n}ngOnDestroy(){F(this.platformId)&&this.observer.disconnect()}ngAfterViewInit(){F(this.platformId)&&(this.observer=new IntersectionObserver(([t])=>t.isIntersecting&&this.scrolled.emit(),Object.assign({root:this.isHostScrollable()?this.host.nativeElement:null},this.options)),this.observer.observe(this.anchor.nativeElement))}isHostScrollable(){if(F(this.platformId)){const t=window.getComputedStyle(this.host.nativeElement);return"auto"===t.getPropertyValue("overflow")||"scroll"===t.getPropertyValue("overflow-y")}return!1}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.B))},t.\u0275cmp=r.Eb({type:t,selectors:[["ms-infinite-scroll"]],viewQuery:function(t,e){if(1&t&&r.ic(la,!0),2&t){let t;r.bc(t=r.Vb())&&(e.anchor=t.first)}},inputs:{options:"options"},outputs:{scrolled:"scrolled"},ngContentSelectors:ha,decls:8,vars:0,consts:[[1,"loader"],["anchor",""],[1,"box"]],template:function(t,e){1&t&&(r.Yb(),r.Xb(0),r.Nb(1,"div",0,1),r.Lb(3,"div",2),r.Lb(4,"div",2),r.Lb(5,"div",2),r.Lb(6,"div",2),r.Lb(7,"div",2),r.Mb())},styles:['[_nghost-%COMP%]{display:block}.loader[_ngcontent-%COMP%]{width:250px;display:flex;justify-content:space-between;align-items:center;margin:0 auto;padding:45px 0}.box[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]{position:relative}.box[_ngcontent-%COMP%]{width:33px;height:33px;display:block;transform-origin:-50% center}.box[_ngcontent-%COMP%], .box[_ngcontent-%COMP%]:after{border-radius:25%}.box[_ngcontent-%COMP%]:after{content:"";width:100%;height:100%;position:absolute;top:0;right:0;background-color:#add8e6;box-shadow:0 0 10px 0 rgba(28,159,255,.4)}.box[_ngcontent-%COMP%]:first-child{animation:slide 1.5s ease-in-out infinite alternate}.box[_ngcontent-%COMP%]:first-child:after{animation:color-change 1.5s ease-in-out infinite alternate}.box[_ngcontent-%COMP%]:nth-child(2){animation:flip-1 1.5s ease-in-out infinite alternate}.box[_ngcontent-%COMP%]:nth-child(2):after{animation:squidge-1 1.5s ease-in-out infinite alternate}.box[_ngcontent-%COMP%]:nth-child(3){animation:flip-2 1.5s ease-in-out infinite alternate}.box[_ngcontent-%COMP%]:nth-child(3):after{animation:squidge-2 1.5s ease-in-out infinite alternate}.box[_ngcontent-%COMP%]:nth-child(4){animation:flip-3 1.5s ease-in-out infinite alternate}.box[_ngcontent-%COMP%]:nth-child(4):after{animation:squidge-3 1.5s ease-in-out infinite alternate}.box[_ngcontent-%COMP%]:nth-child(5){animation:flip-4 1.5s ease-in-out infinite alternate}.box[_ngcontent-%COMP%]:nth-child(5):after{animation:squidge-4 1.5s ease-in-out infinite alternate}.box[_ngcontent-%COMP%]:nth-child(2):after{background-color:#1c9fff}.box[_ngcontent-%COMP%]:nth-child(3):after{background-color:#1fb1fd}.box[_ngcontent-%COMP%]:nth-child(4):after{background-color:#22c7fb}.box[_ngcontent-%COMP%]:nth-child(5):after{background-color:#23d3fb}@keyframes slide{0%{background-color:#1795ff;transform:translatex(0)}to{background-color:#23d3fb;transform:translatex(calc(250px - (33px * 1.25)))}}@keyframes color-change{0%{background-color:#1795ff}to{background-color:#23d3fb}}@keyframes flip-1{0%,15%{transform:rotate(0)}35%,to{transform:rotate(-180deg)}}@keyframes squidge-1{5%{transform-origin:center bottom;transform:scalex(1) scaley(1)}15%{transform-origin:center bottom;transform:scalex(1.3) scaley(.7)}20%,25%{transform-origin:center bottom;transform:scalex(.8) scaley(1.4)}55%,to{transform-origin:center top;transform:scalex(1) scaley(1)}40%{transform-origin:center top;transform:scalex(1.3) scaley(.7)}}@keyframes flip-2{0%,30%{transform:rotate(0)}50%,to{transform:rotate(-180deg)}}@keyframes squidge-2{20%{transform-origin:center bottom;transform:scalex(1) scaley(1)}30%{transform-origin:center bottom;transform:scalex(1.3) scaley(.7)}35%,40%{transform-origin:center bottom;transform:scalex(.8) scaley(1.4)}70%,to{transform-origin:center top;transform:scalex(1) scaley(1)}55%{transform-origin:center top;transform:scalex(1.3) scaley(.7)}}@keyframes flip-3{0%,45%{transform:rotate(0)}65%,to{transform:rotate(-180deg)}}@keyframes squidge-3{35%{transform-origin:center bottom;transform:scalex(1) scaley(1)}45%{transform-origin:center bottom;transform:scalex(1.3) scaley(.7)}50%,55%{transform-origin:center bottom;transform:scalex(.8) scaley(1.4)}85%,to{transform-origin:center top;transform:scalex(1) scaley(1)}70%{transform-origin:center top;transform:scalex(1.3) scaley(.7)}}@keyframes flip-4{0%,60%{transform:rotate(0)}80%,to{transform:rotate(-180deg)}}@keyframes squidge-4{50%{transform-origin:center bottom;transform:scalex(1) scaley(1)}60%{transform-origin:center bottom;transform:scalex(1.3) scaley(.7)}65%,70%{transform-origin:center bottom;transform:scalex(.8) scaley(1.4)}to{transform-origin:center top;transform:scalex(1) scaley(1)}85%{transform-origin:center top;transform:scalex(1.3) scaley(.7)}}'],changeDetection:0}),t})();const da=["ref"];function pa(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div"),r.Nb(1,"div",7),r.Lb(2,"img",8),r.Nb(3,"i",9),r.Ub("click",function(){r.cc(t);const n=e.$implicit;return r.Wb(2).onClick(n.id)}),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit,n=r.Wb(2);r.zb(1),r.Bb(n.likePhotoIds.includes(t.id)?"like":""),r.zb(1),r.Zb("src",t.urls.small,r.dc)}}function ga(t,e){if(1&t&&(r.Nb(0,"div",5),r.fc(1,pa,4,3,"div",6),r.Mb()),2&t){const t=r.Wb();r.zb(1),r.Zb("ngForOf",t.photos)}}const ya=[{path:"",component:(()=>{class t{constructor(t){this.photosService=t,this.title="photos",this.page=0,this.style={color:"red"},this.photos=[],this.likePhotoIds=[]}ngOnInit(){this.getPhotos()}getPhotos(){this.page=this.page+1,console.log(this.page),this.photosService.fetchPhotos(this.page).subscribe(t=>{console.log(t),this.photos=[...this.photos,...t]},t=>{console.log(t)})}onInput(t){}onClick(t){this.likePhotoIds.includes(t)?this.likePhotoIds=this.likePhotoIds.filter(e=>e!==t):this.likePhotoIds.push(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(ca))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-photos"]],viewQuery:function(t,e){if(1&t&&r.ic(da,!0),2&t){let t;r.bc(t=r.Vb())&&(e.ref=t.first)}},decls:6,vars:1,consts:[[1,"content"],[2,"background-color","#a7b4b4","height","100px","display","flex","justify-content","flex-end","align-items","center","padding-right","20px"],["routerLink","login"],[1,"infinite-scroll-with-root",3,"scrolled"],["class","photos",4,"ngIf"],[1,"photos"],[4,"ngFor","ngForOf"],[1,"photo"],[3,"src"],[3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"a",2),r.gc(3,"\u0412\u044b\u0445\u043e\u0434"),r.Mb(),r.Mb(),r.Nb(4,"ms-infinite-scroll",3),r.Ub("scrolled",function(){return e.getPhotos()}),r.fc(5,ga,2,1,"div",4),r.Mb(),r.Mb()),2&t&&(r.zb(5),r.Zb("ngIf",e.photos.length))},directives:[io,fa,N,R],styles:['@charset "UTF-8";.content[_ngcontent-%COMP%]{margin:auto 20px}.content[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(400px,1fr));grid-auto-flow:dense;grid-gap:15px;margin-top:20px}.content[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{background:#000;overflow:hidden;position:relative;display:flex;justify-content:center;align-items:center;transition:.2s;animation:fadein .5s;border-radius:4px;box-shadow:1px 1px 10px rgba(0,0,0,.5)}.content[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]:hover{box-shadow:5px 5px 15px rgba(0,0,0,.4)}.content[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{opacity:1;visibility:visible}.content[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:.7;transform:scale(1.05)}.content[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translateX(-50%) translateY(-50%);transition:.2s;animation:fadein .5s;opacity:0;visibility:hidden;height:70px;width:70px;background-color:rgba(0,0,0,.4);border-radius:35px;display:flex;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer}.content[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:before{content:"\udb80\uded5";font:normal normal normal 14px/1 Material-Design;font-size:40px;color:#fff}.content[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo.like[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:before{content:"\udb80\uded1";color:#b224ef}.content[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:1;transition:opacity 124ms linear,transform 124ms linear;width:100%;height:auto;display:block}']}),t})()},{path:"login",component:Ss},{path:"registration",component:vs}];let va=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[vo.forRoot(ya)],vo]}),t})(),ma=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:[so],styles:['.container-auth[_ngcontent-%COMP%]{width:100%;min-height:100vh;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;background-repeat:no-repeat;background-position:50%;background-size:cover;position:relative;z-index:1;background-image:url(/assets/images/bg-01.jpg)}.container-auth[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;z-index:-1;width:100%;height:100%;top:0;left:0;background-color:hsla(0,0%,100%,.9)}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]{width:500px;border-radius:10px;padding-top:55px;padding-bottom:37px;background:-webkit-linear-gradient(top,#7579ff,#b224ef)}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .p-card[_ngcontent-%COMP%]{padding-left:55px;padding-right:55px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:120px;height:120px;border-radius:50%;background-color:#fff;margin:0 auto}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:before{content:attr(data-icon);font:normal normal normal 14px/1 Material-Design;font-size:60px;color:#333}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff;line-height:1.2;text-align:center;text-transform:uppercase;display:block;font-size:30px;padding-top:34px;padding-bottom:27px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]{width:100%;position:relative;border-bottom:2px solid hsla(0,0%,100%,.24);margin-bottom:30px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{font-size:16px;color:#fff;line-height:1.2;display:block;width:100%;height:45px;padding:0 5px 0 38px;outline:none;border:none;background:transparent}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus, .container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:valid{padding-left:5px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .focus-input[_ngcontent-%COMP%]{position:absolute;display:block;width:100%;height:100%;top:0;left:0;pointer-events:none}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .focus-input[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;bottom:-2px;left:0;width:0;height:2px;transition:all .4s;background:#fff}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .focus-input[_ngcontent-%COMP%]:after{font-family:Material-Design;content:attr(data-placeholder);font-size:22px;color:#fff;display:block;width:100%;position:absolute;top:6px;left:0;padding-left:5px;transition:all .4s}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus + .focus-input[_ngcontent-%COMP%]:after, .container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:valid + .focus-input[_ngcontent-%COMP%]:after{top:-22px;font-size:18px}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus + .focus-input[_ngcontent-%COMP%]:before, .container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:valid + .focus-input[_ngcontent-%COMP%]:before{width:100%}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:16px;color:#555;line-height:1.2;display:flex;justify-content:center;align-items:center;padding:0 20px;margin-top:15px;min-width:120px;height:50px;border-radius:25px;background:-webkit-linear-gradient(bottom,#7579ff,#b224ef);position:relative;z-index:1;transition:all .4s}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;z-index:-1;width:100%;height:100%;border-radius:25px;background-color:#fff;top:0;left:0;opacity:1;transition:all .4s}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{color:#fff}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:before{opacity:0}.container-auth[_ngcontent-%COMP%]   .wrap-auth[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:0;height:1px;background:hsla(0,0%,100%,.24);margin-top:40px}@media (max-width:576px){.container-auth[_ngcontent-%COMP%]   .p-card[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}}@keyframes fadein{0%{opacity:0}to{opacity:1}}']}),t})();function _a(){return t=>t.lift(new ba)}class ba{call(t,e){return e.subscribe(new wa(t))}}class wa extends an.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Oa=n("zIRd"),Ca=n("q/0M"),Ea=n("qOnz"),Sa=function(t,e){return(Sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ta(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var xa,Ia="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Pa=Pa||{},ja=Ia||self;function Aa(){}function Ra(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ka(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Na="closure_uid_"+(1e9*Math.random()>>>0),Ma=0;function Da(t,e,n){return t.call.apply(t.bind,arguments)}function La(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Fa(t,e,n){return(Fa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Da:La).apply(null,arguments)}function Ua(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Va(){return Date.now()}function qa(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function za(){this.j=this.j,this.i=this.i}za.prototype.j=!1,za.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Na)&&t[Na]||(t[Na]=++Ma)}(this)},za.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ba=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ha=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Wa(t){return Array.prototype.concat.apply([],arguments)}function Ga(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ka(t){return/^[\s\xa0]*$/.test(t)}var Qa,$a=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ya(t,e){return-1!=t.indexOf(e)}function Xa(t,e){return t<e?-1:t>e?1:0}t:{var Za=ja.navigator;if(Za){var Ja=Za.userAgent;if(Ja){Qa=Ja;break t}}Qa=""}function tu(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function eu(t){var e={};for(var n in t)e[n]=t[n];return e}var nu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ru(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<nu.length;o++)n=nu[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function iu(t){return iu[" "](t),t}iu[" "]=Aa;var ou,su,au=Ya(Qa,"Opera"),uu=Ya(Qa,"Trident")||Ya(Qa,"MSIE"),cu=Ya(Qa,"Edge"),lu=cu||uu,hu=Ya(Qa,"Gecko")&&!(Ya(Qa.toLowerCase(),"webkit")&&!Ya(Qa,"Edge"))&&!(Ya(Qa,"Trident")||Ya(Qa,"MSIE"))&&!Ya(Qa,"Edge"),fu=Ya(Qa.toLowerCase(),"webkit")&&!Ya(Qa,"Edge");function du(){var t=ja.document;return t?t.documentMode:void 0}t:{var pu="",gu=(su=Qa,hu?/rv:([^\);]+)(\)|;)/.exec(su):cu?/Edge\/([\d\.]+)/.exec(su):uu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(su):fu?/WebKit\/(\S+)/.exec(su):au?/(?:Version)[ \/]?(\S+)/.exec(su):void 0);if(gu&&(pu=gu?gu[1]:""),uu){var yu=du();if(null!=yu&&yu>parseFloat(pu)){ou=String(yu);break t}}ou=pu}var vu={};function mu(t){return function(t,e){var n=vu;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=$a(String(ou)).split("."),r=$a(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Xa(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Xa(0==s[2].length,0==a[2].length)||Xa(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var _u=ja.document&&uu&&(du()||parseInt(ou,10))||void 0,bu=!uu||9<=Number(_u),wu=uu&&!mu("9"),Ou=function(){if(!ja.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ja.addEventListener("test",Aa,e),ja.removeEventListener("test",Aa,e)}catch(n){}return t}();function Cu(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Eu(t,e){if(Cu.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(hu){t:{try{iu(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Su[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Cu.prototype.b=function(){this.defaultPrevented=!0},qa(Eu,Cu);var Su={2:"touch",3:"pen",4:"mouse"};Eu.prototype.b=function(){Eu.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,wu)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Tu="closure_listenable_"+(1e6*Math.random()|0),xu=0;function Iu(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++xu,this.Y=this.Z=!1}function Pu(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ju(t){this.src=t,this.a={},this.b=0}function Au(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Ba(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Pu(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Ru(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ju.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ru(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Iu(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ku="closure_lm_"+(1e6*Math.random()|0),Nu={};function Mu(t,e,n,r,i){if(r&&r.once)return Lu(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Mu(t,e[o],n,r,i);return null}return n=Wu(n),t&&t[Tu]?t.va(e,n,ka(r)?!!r.capture:!!r,i):Du(t,e,n,!1,r,i)}function Du(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ka(i)?!!i.capture:!!i;if(s&&!bu)return null;var a=Bu(t);if(a||(t[ku]=a=new ju(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=zu,e=bu?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ou||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Vu(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Lu(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Lu(t,e[o],n,r,i);return null}return n=Wu(n),t&&t[Tu]?t.wa(e,n,ka(r)?!!r.capture:!!r,i):Du(t,e,n,!0,r,i)}function Fu(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Fu(t,e[o],n,r,i);else r=ka(r)?!!r.capture:!!r,n=Wu(n),t&&t[Tu]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Ru(o=t.a[e],n,r,i))&&(Pu(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Bu(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ru(e,n,r,i)),(n=-1<t?e[t]:null)&&Uu(n))}function Uu(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Tu])Au(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Vu(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Bu(e))?(Au(n,t),0==n.b&&(n.src=null,e[ku]=null)):Pu(t)}}}function Vu(t){return t in Nu?Nu[t]:Nu[t]="on"+t}function qu(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Uu(t),n.call(r,e)}function zu(t,e){if(t.Y)return!0;if(!bu){if(!e)t:{e=["window","event"];for(var n=ja,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return qu(t,e=new Eu(e,this))}return qu(t,new Eu(e,this))}function Bu(t){return(t=t[ku])instanceof ju?t:null}var Hu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wu(t){return"function"==typeof t?t:(t[Hu]||(t[Hu]=function(e){return t.handleEvent(e)}),t[Hu])}function Gu(){za.call(this),this.c=new ju(this),this.J=this,this.C=null}function Ku(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Cu(e,t);else if(e instanceof Cu)e.target=e.target||t;else{var i=e;ru(e=new Cu(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Qu(s,r,!0,e)&&i}if(i=Qu(s=e.a=t,r,!0,e)&&i,i=Qu(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Qu(s=e.a=n[o],r,!1,e)&&i}function Qu(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Au(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}qa(Gu,za),Gu.prototype[Tu]=!0,(xa=Gu.prototype).addEventListener=function(t,e,n,r){Mu(this,t,e,n,r)},xa.removeEventListener=function(t,e,n,r){Fu(this,t,e,n,r)},xa.G=function(){if(Gu.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Pu(n[r]);delete e.a[t],e.b--}}this.C=null},xa.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},xa.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var $u=ja.JSON.stringify;function Yu(){this.b=this.a=null}var Xu,Zu=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new tc},function(t){t.reset()});function Ju(){var t=ic,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function tc(){this.next=this.b=this.a=null}function ec(t){ja.setTimeout(function(){throw t},0)}function nc(t,e){Xu||function(){var t=ja.Promise.resolve(void 0);Xu=function(){t.then(oc)}}(),rc||(Xu(),rc=!0),ic.add(t,e)}Yu.prototype.add=function(t,e){var n=Zu.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},tc.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},tc.prototype.reset=function(){this.next=this.b=this.a=null};var rc=!1,ic=new Yu;function oc(){for(var t;t=Ju();){try{t.a.call(t.b)}catch(n){ec(n)}var e=Zu;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}rc=!1}function sc(t,e){Gu.call(this),this.b=t||1,this.a=e||ja,this.f=Fa(this.Za,this),this.g=Va()}function ac(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function uc(t,e,n){if("function"==typeof t)n&&(t=Fa(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Fa(t.handleEvent,t)}return 2147483647<Number(e)?-1:ja.setTimeout(t,e||0)}function cc(t){t.a=uc(function(){t.a=null,t.c&&(t.c=!1,cc(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}qa(sc,Gu),(xa=sc.prototype).aa=!1,xa.M=null,xa.Za=function(){if(this.aa){var t=Va()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ku(this,"tick"),this.aa&&(ac(this),this.start()))}},xa.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Va())},xa.G=function(){sc.X.G.call(this),ac(this),delete this.a};var lc=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Sa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:cc(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(ja.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(za);function hc(t){za.call(this),this.b=t,this.a={}}qa(hc,za);var fc=[];function dc(t,e,n,r){Array.isArray(n)||(n&&(fc[0]=n.toString()),n=fc);for(var i=0;i<n.length;i++){var o=Mu(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function pc(t){tu(t.a,function(t,e){this.a.hasOwnProperty(e)&&Uu(t)},t),t.a={}}function gc(){this.a=!0}function yc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return $u(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}hc.prototype.G=function(){hc.X.G.call(this),pc(this)},hc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gc.prototype.info=function(){};var vc={},mc=null;function _c(){return mc=mc||new Gu}function bc(t){Cu.call(this,vc.Fa,t)}function wc(t){var e=_c();Ku(e,new bc(e,t))}function Oc(t,e){Cu.call(this,vc.STAT_EVENT,t),this.stat=e}function Cc(t){var e=_c();Ku(e,new Oc(e,t))}function Ec(t){Cu.call(this,vc.Ga,t)}function Sc(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ja.setTimeout(function(){t()},e)}vc.Fa="serverreachability",qa(bc,Cu),vc.STAT_EVENT="statevent",qa(Oc,Cu),vc.Ga="timingevent",qa(Ec,Cu);var Tc={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},xc={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ic(){}function Pc(){}Ic.prototype.a=null;var jc,Ac={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Rc(){Cu.call(this,"d")}function kc(){Cu.call(this,"c")}function Nc(){}function Mc(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new hc(this),this.P=Dc,this.R=new sc(t=lu?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}qa(Rc,Cu),qa(kc,Cu),qa(Nc,Ic),jc=new Nc;var Dc=45e3,Lc={},Fc={};function Uc(t,e,n){t.H=1,t.i=al(el(e)),t.j=n,t.I=!0,Vc(t,null)}function Vc(t,e){t.u=Va(),Bc(t),t.l=el(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),bl(n.b,"t",r),t.D=0,t.a=ph(t.g,t.g.C?e:null),0<t.O&&(t.F=new lc(Fa(t.Ca,t,t.a),t.O)),dc(t.J,t.a,"readystatechange",t.Xa),e=t.B?eu(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),wc(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function qc(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=zc(t,n);if(i==Fc){4==e&&(t.h=4,Cc(14),r=!1),yc(t.c,t.f,null,"[Incomplete Response]");break}if(i==Lc){t.h=4,Cc(15),yc(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}yc(t.c,t.f,i,null),Qc(t,i)}4==e&&0==n.length&&(t.h=1,Cc(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),sh(e),e.F=!0,Cc(11))):(yc(t.c,t.f,n,"[Invalid Chunked Response]"),Kc(t),Gc(t))}function zc(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Fc:(n=Number(e.substring(n,r)),isNaN(n)?Lc:(r+=1)+n>e.length?Fc:(e=e.substr(r,n),t.D=r+n,e))}function Bc(t){t.T=Va()+t.P,Hc(t,t.P)}function Hc(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Sc(Fa(t.Va,t),e)}function Wc(t){t.o&&(ja.clearTimeout(t.o),t.o=null)}function Gc(t){0==t.g.v||t.A||ch(t.g,t)}function Kc(t){Wc(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ac(t.R),pc(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Qc(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||xl(n.b,t)))if(n.I=t.N,!t.C&&xl(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Zb){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;uh(n),Xl(n)}oh(n),Cc(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Sc(Fa(n.Sa,n),6e3));if(1>=Tl(n.b)&&n.ea){try{n.ea()}catch(Zb){}n.ea=void 0}}else hh(n,11)}else if((t.C||n.a==t)&&uh(n),!Ka(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Ya(l,"spdy")||Ya(l,"quic")||Ya(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Il(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,sl(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Va()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=dh(u,u.C?u.ga:null,u.fa),d.C){Pl(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Wc(p),Bc(p)),u.a=d}else ih(u);0<n.g.length&&th(n)}else"stop"!=i[0]&&"close"!=i[0]||hh(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?hh(n,7):Yl(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);wc(4)}catch(Zb){}}function $c(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ra(t)||"string"==typeof t)Ha(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ra(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ra(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Yc(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Yc)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Xc(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Zc(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Zc(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Zc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(xa=Mc.prototype).setTimeout=function(t){this.P=t},xa.Xa=function(t){t=t.target;var e=this.F;e&&3==Gl(t)?e.f():this.Ca(t)},xa.Ca=function(t){try{if(t==this.a)t:{var e=Gl(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!lu&&!this.a.$())){this.A||4!=e||7==n||wc(8==n||0>=r?3:2),Wc(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ka(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Cc(12),Kc(this),Gc(this);break t}yc(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Qc(this,u)}this.I?(qc(this,e,o),lu&&this.b&&3==e&&(dc(this.J,this.R,"tick",this.Wa),this.R.start())):(yc(this.c,this.f,o,null),Qc(this,o)),4==e&&Kc(this),this.b&&!this.A&&(4==e?ch(this.g,this):(this.b=!1,Bc(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Cc(12)):(this.h=0,Cc(13)),Kc(this),Gc(this)}}}catch(c){}},xa.Wa=function(){if(this.a){var t=Gl(this.a),e=this.a.$();this.D<e.length&&(Wc(this),qc(this,t,e),this.b&&4!=t&&Bc(this))}},xa.cancel=function(){this.A=!0,Kc(this)},xa.Va=function(){this.o=null;var t=Va();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(wc(3),Cc(17)),Kc(this),this.h=2,Gc(this)):Hc(this,this.T-t)},(xa=Yc.prototype).K=function(){Xc(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},xa.L=function(){return Xc(this),this.a.concat()},xa.get=function(t,e){return Zc(this.b,t)?this.b[t]:e},xa.set=function(t,e){Zc(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},xa.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Jc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tl(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof tl){this.a=void 0!==e?e:t.a,nl(this,t.f),this.j=t.j,rl(this,t.c),il(this,t.h),this.g=t.g,e=t.b;var n=new yl;n.c=e.c,e.a&&(n.a=new Yc(e.a),n.b=e.b),ol(this,n),this.i=t.i}else t&&(n=String(t).match(Jc))?(this.a=!!e,nl(this,n[1]||"",!0),this.j=ul(n[2]||""),rl(this,n[3]||"",!0),il(this,n[4]),this.g=ul(n[5]||"",!0),ol(this,n[6]||"",!0),this.i=ul(n[7]||"")):(this.a=!!e,this.b=new yl(null,this.a))}function el(t){return new tl(t)}function nl(t,e,n){t.f=n?ul(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function rl(t,e,n){t.c=n?ul(e,!0):e}function il(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ol(t,e,n){e instanceof yl?(t.b=e,function(t,e){e&&!t.f&&(vl(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ml(this,e),bl(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=cl(e,pl)),t.b=new yl(e,t.a))}function sl(t,e,n){t.b.set(e,n)}function al(t){return sl(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Va()).toString(36)),t}function ul(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function cl(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ll),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ll(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}tl.prototype.toString=function(){var t=[],e=this.f;e&&t.push(cl(e,hl,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(cl(e,hl,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(cl(n,"/"==n.charAt(0)?dl:fl,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",cl(n,gl)),t.join("")};var hl=/[#\/\?@]/g,fl=/[#\?:]/g,dl=/[#\?]/g,pl=/[#\?@]/g,gl=/#/g;function yl(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function vl(t){t.a||(t.a=new Yc,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function ml(t,e){vl(t),e=wl(t,e),Zc(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Zc((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Xc(t)))}function _l(t,e){return vl(t),e=wl(t,e),Zc(t.a.b,e)}function bl(t,e,n){ml(t,e),0<n.length&&(t.c=null,t.a.set(wl(t,e),Ga(n)),t.b+=n.length)}function wl(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(xa=yl.prototype).add=function(t,e){vl(this),this.c=null,t=wl(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},xa.forEach=function(t,e){vl(this),this.a.forEach(function(n,r){Ha(n,function(n){t.call(e,n,r,this)},this)},this)},xa.L=function(){vl(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},xa.K=function(t){vl(this);var e=[];if("string"==typeof t)_l(this,t)&&(e=Wa(e,this.a.get(wl(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Wa(e,t[n])}return e},xa.set=function(t,e){return vl(this),this.c=null,_l(this,t=wl(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},xa.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},xa.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Ol=function(){return function(t,e){this.b=t,this.a=e}}();function Cl(t){this.g=t||El,t=ja.PerformanceNavigationTiming?0<(t=ja.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ja.ia&&ja.ia.ya&&ja.ia.ya()&&ja.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var El=10;function Sl(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Tl(t){return t.b?1:t.a?t.a.size:0}function xl(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Il(t,e){t.a?t.a.add(e):t.b=e}function Pl(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function jl(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ta(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ga(t.c)}function Al(){}function Rl(){this.a=new Al}function kl(t,e,n){var r=n||"";try{$c(t,function(t,n){var i=t;ka(t)&&(i=$u(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Uw){throw e.push(r+"type="+encodeURIComponent("_badmap")),Uw}}function Nl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Cl.prototype.cancel=function(){var t,e;if(this.c=jl(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ta(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Al.prototype.stringify=function(t){return ja.JSON.stringify(t,void 0)},Al.prototype.parse=function(t){return ja.JSON.parse(t,void 0)};var Ml=ja.JSON.parse;function Dl(t){Gu.call(this),this.headers=new Yc,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Ll,this.D=this.F=!1}qa(Dl,Gu);var Ll="",Fl=/^https?$/i,Ul=["POST","PUT"];function Vl(t){return"content-type"==t.toLowerCase()}function ql(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,zl(t),Hl(t)}function zl(t){t.u||(t.u=!0,Ku(t,"complete"),Ku(t,"error"))}function Bl(t){if(t.b&&void 0!==Pa&&(!t.s[1]||4!=Gl(t)||2!=t.W()))if(t.l&&4==Gl(t))uc(t.za,0,t);else if(Ku(t,"readystatechange"),4==Gl(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Jc)[1]||null;if(!o&&ja.self&&ja.self.location){var s=ja.self.location.protocol;o=s.substr(0,s.length-1)}i=!Fl.test(o?o.toLowerCase():"")}e=i}if(e)Ku(t,"complete"),Ku(t,"success");else{t.h=6;try{var a=2<Gl(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",zl(t)}}finally{Hl(t)}}}function Hl(t,e){if(t.a){Wl(t);var n=t.a,r=t.s[0]?Aa:null;t.a=null,t.s=null,e||Ku(t,"ready");try{n.onreadystatechange=r}catch(Uw){}}}function Wl(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(ja.clearTimeout(t.m),t.m=null)}function Gl(t){return t.a?t.a.readyState:0}function Kl(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return tu(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):sl(t,e,n))}function Ql(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function $l(t){this.pa=0,this.g=[],this.c=new gc,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Ql("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Ql("baseRetryDelayMs",5e3,t),this.Ra=Ql("retryDelaySeedMs",1e4,t),this.Ma=Ql("forwardChannelMaxRetries",2,t),this.ma=Ql("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Cl(t&&t.concurrentRequestLimit),this.ka=new Rl,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Yl(t){if(Zl(t),3==t.v){var e=t.R++,n=el(t.B);sl(n,"SID",t.J),sl(n,"RID",e),sl(n,"TYPE","terminate"),nh(t,n),(e=new Mc(t,t.c,e,void 0)).H=2,e.i=al(el(n)),n=!1,ja.navigator&&ja.navigator.sendBeacon&&(n=ja.navigator.sendBeacon(e.i.toString(),"")),!n&&ja.Image&&((new Image).src=e.i,n=!0),n||(e.a=ph(e.g,null),e.a.ba(e.i)),e.u=Va(),Bc(e)}fh(t)}function Xl(t){t.a&&(sh(t),t.a.cancel(),t.a=null)}function Zl(t){Xl(t),t.j&&(ja.clearTimeout(t.j),t.j=null),uh(t),t.b.cancel(),t.h&&("number"==typeof t.h&&ja.clearTimeout(t.h),t.h=null)}function Jl(t,e){t.g.push(new Ol(t.Oa++,e)),3==t.v&&th(t)}function th(t){Sl(t.b)||t.h||(t.h=!0,nc(t.Ba,t),t.u=0)}function eh(t,e){var n;n=e?e.f:t.R++;var r=el(t.B);sl(r,"SID",t.J),sl(r,"RID",n),sl(r,"AID",t.P),nh(t,r),t.i&&t.l&&Kl(r,t.i,t.l),n=new Mc(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=rh(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Il(t.b,n),Uc(n,r,e)}function nh(t,e){t.f&&$c({},function(t,n){sl(e,n,t)})}function rh(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Fa(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{kl(l,s,"req"+c+"_")}catch(Yh){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function ih(t){t.a||t.j||(t.T=1,nc(t.Aa,t),t.o=0)}function oh(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Sc(Fa(t.Aa,t),lh(t,t.o)),t.o++,0))}function sh(t){null!=t.s&&(ja.clearTimeout(t.s),t.s=null)}function ah(t){t.a=new Mc(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=el(t.la);sl(e,"RID","rpc"),sl(e,"SID",t.J),sl(e,"CI",t.H?"0":"1"),sl(e,"AID",t.P),nh(t,e),sl(e,"TYPE","xmlhttp"),t.i&&t.l&&Kl(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=al(el(e)),n.j=null,n.I=!0,Vc(n,t)}function uh(t){null!=t.m&&(ja.clearTimeout(t.m),t.m=null)}function ch(t,e){var n=null;if(t.a==e){uh(t),sh(t),t.a=null;var r=2}else{if(!xl(t.b,e))return;n=e.s,Pl(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Va()-e.u;var i=t.u;Ku(r=_c(),new Ec(r,n,e,i)),th(t)}else ih(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Tl(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Sc(Fa(t.Ba,t,e),lh(t,t.u)),t.u++,0)))}(t,e)||2==r&&oh(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:hh(t,5);break;case 4:hh(t,10);break;case 3:hh(t,6);break;default:hh(t,2)}}function lh(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function hh(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Fa(t.Ya,t);n||(n=new tl("//www.google.com/images/cleardot.gif"),ja.location&&"http"==ja.location.protocol||nl(n,"https"),al(n)),function(t,e){var n=new gc;if(ja.Image){var r=new Image;r.onload=Ua(Nl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ua(Nl,n,r,"TestLoadImage: error",!1,e),r.onabort=Ua(Nl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ua(Nl,n,r,"TestLoadImage: timeout",!1,e),ja.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Cc(2);t.v=0,t.f&&t.f.ra(e),fh(t),Zl(t)}function fh(t){t.v=0,t.I=-1,t.f&&(0==jl(t.b).length&&0==t.g.length||(t.b.c.length=0,Ga(t.g),t.g.length=0),t.f.qa())}function dh(t,e,n){var r=function(t){return t instanceof tl?el(t):new tl(t,void 0)}(n);if(""!=r.c)e&&rl(r,e+"."+r.c),il(r,r.h);else{var i=ja.location;r=function(t,e,n,r){var i=new tl(null,void 0);return t&&nl(i,t),e&&rl(i,e),n&&il(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&tu(t.V,function(t,e){sl(r,e,t)}),n=t.na,(e=t.A)&&n&&sl(r,e,n),sl(r,"VER",t.ha),nh(t,r),r}function ph(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Dl(t.Na)).F=t.C,e}function gh(){}function yh(){if(uu&&!(10<=Number(_u)))throw Error("Environmental error: no available transport.")}function vh(t,e){Gu.call(this),this.a=new $l(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ka(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ka(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new bh(this)}function mh(t){Rc.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function _h(){kc.call(this),this.status=1}function bh(t){this.a=t}(xa=Dl.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:jc),this.a.onreadystatechange=Fa(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void ql(this,o)}t=n||"";var i=new Yc(this.headers);r&&$c(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Vl,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=ja.FormData&&t instanceof ja.FormData,!(0<=Ba(Ul,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Wl(this),0<this.o&&((this.D=function(t){return uu&&mu(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Fa(this.xa,this)):this.m=uc(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){ql(this,o)}},xa.xa=function(){void 0!==Pa&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ku(this,"timeout"),this.abort(8))},xa.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ku(this,"complete"),Ku(this,"abort"),Hl(this))},xa.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Hl(this,!0)),Dl.X.G.call(this)},xa.za=function(){this.j||(this.A||this.l||this.g?Bl(this):this.Ua())},xa.Ua=function(){Bl(this)},xa.W=function(){try{return 2<Gl(this)?this.a.status:-1}catch(su){return-1}},xa.$=function(){try{return this.a?this.a.responseText:""}catch(su){return""}},xa.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ml(e)}},xa.ua=function(){return this.h},xa.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(xa=$l.prototype).ha=8,xa.v=1,xa.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Mc(this,this.c,t,void 0),r=this.l;if(this.O&&(r?ru(r=eu(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=rh(this,n,e),sl(i=el(this.B),"RID",t),sl(i,"CVER",22),this.A&&sl(i,"X-HTTP-Session-Id",this.A),nh(this,i),this.i&&r&&Kl(i,this.i,r),Il(this.b,n),this.Ia&&sl(i,"TYPE","init"),this.da?(sl(i,"$req",e),sl(i,"SID","null"),n.U=!0,Uc(n,i,null)):Uc(n,i,e),this.v=2}}else 3==this.v&&(t?eh(this,t):0==this.g.length||Sl(this.b)||eh(this))},xa.Aa=function(){if(this.j=null,ah(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Sc(Fa(this.Ta,this),t)}},xa.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Cc(10),Xl(this),ah(this))},xa.Sa=function(){null!=this.m&&(this.m=null,Xl(this),oh(this),Cc(19))},xa.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Cc(2)):(this.c.info("Failed to ping google.com"),Cc(1))},(xa=gh.prototype).ta=function(){},xa.sa=function(){},xa.ra=function(){},xa.qa=function(){},xa.Ja=function(){},yh.prototype.a=function(t,e){return new vh(t,e)},qa(vh,Gu),vh.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Cc(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=dh(t,null,t.fa),th(t)},vh.prototype.close=function(){Yl(this.a)},vh.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Jl(this.a,e)}else this.l?((e={}).__data__=$u(t),Jl(this.a,e)):Jl(this.a,t)},vh.prototype.G=function(){this.a.f=null,delete this.f,Yl(this.a),delete this.a,vh.X.G.call(this)},qa(mh,Rc),qa(_h,kc),qa(bh,gh),bh.prototype.ta=function(){Ku(this.a,"a")},bh.prototype.sa=function(t){Ku(this.a,new mh(t))},bh.prototype.ra=function(t){Ku(this.a,new _h(t))},bh.prototype.qa=function(){Ku(this.a,"b")},yh.prototype.createWebChannel=yh.prototype.a,vh.prototype.send=vh.prototype.h,vh.prototype.open=vh.prototype.g,vh.prototype.close=vh.prototype.close,Tc.NO_ERROR=0,Tc.TIMEOUT=8,Tc.HTTP_ERROR=6,xc.COMPLETE="complete",Pc.EventType=Ac,Ac.OPEN="a",Ac.CLOSE="b",Ac.ERROR="c",Ac.MESSAGE="d",Gu.prototype.listen=Gu.prototype.va,Dl.prototype.listenOnce=Dl.prototype.wa,Dl.prototype.getLastError=Dl.prototype.Qa,Dl.prototype.getLastErrorCode=Dl.prototype.ua,Dl.prototype.getStatus=Dl.prototype.W,Dl.prototype.getResponseJson=Dl.prototype.Pa,Dl.prototype.getResponseText=Dl.prototype.$,Dl.prototype.send=Dl.prototype.ba;var wh=Tc,Oh=xc,Ch=vc,Eh=Pc,Sh=Dl,Th=n("os0x"),xh=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Ih=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Ph=new Ca.b("@firebase/firestore");function jh(){return Ph.logLevel}function Ah(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ph.logLevel<=Ca.a.DEBUG){var r=e.map(Nh);Ph.debug.apply(Ph,Object(Th.g)(["Firestore (8.2.9): "+t],r))}}function Rh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ph.logLevel<=Ca.a.ERROR){var r=e.map(Nh);Ph.error.apply(Ph,Object(Th.g)(["Firestore (8.2.9): "+t],r))}}function kh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ph.logLevel<=Ca.a.WARN){var r=e.map(Nh);Ph.warn.apply(Ph,Object(Th.g)(["Firestore (8.2.9): "+t],r))}}function Nh(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Uw){return t}}function Mh(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.9) INTERNAL ASSERTION FAILED: "+t;throw Rh(e),new Error(e)}function Dh(t,e){t||Mh()}function Lh(t,e){return t}function Fh(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Uh=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Fh(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Vh(t,e){return t<e?-1:t>e?1:0}function qh(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function zh(t){return t+"\0"}var Bh=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.h)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return Vh(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();Bh.T=new Bh("");var Hh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Wh=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Th.c)(e,t),e}(Error),Gh=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(Bh.fromBase64String(e))}catch(e){throw new Wh(Hh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Bh.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),Kh=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Kh.UNAUTHENTICATED=new Kh(null),Kh.R=new Kh("google-credentials-uid"),Kh.P=new Kh("first-party-uid");var Qh=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},$h=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(Kh.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),Yh=function(){function t(t){var e=this;this.D=null,this.currentUser=Kh.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then(function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.N!==e?(Ah("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Dh("string"==typeof n.accessToken),new Qh(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return Dh(null===t||"string"==typeof t),new Kh(t)},t}(),Xh=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=Kh.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Zh=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new Xh(this.F,this.O))},t.prototype.v=function(t){t(Kh.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),Jh=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();Jh.q=-1;var tf=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Wh(Hh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Wh(Hh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Wh(Hh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wh(Hh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?Vh(this.nanoseconds,t.nanoseconds):Vh(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ef=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new tf(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),nf=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Mh(),void 0===n?n=t.length-e:n>t.length-e&&Mh(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return this.J(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),rf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Th.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Wh(Hh.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.ct=function(){return new e([])},e}(nf),of=/^[_a-zA-Z][_a-zA-Z0-9]*$/,sf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Th.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return of.test(t)},e.prototype.rt=function(){return this.it().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Wh(Hh.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Wh(Hh.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Wh(Hh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Wh(Hh.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(nf),af=function(){function t(t){this.path=t}return t._t=function(e){return new t(rf.ot(e))},t.ft=function(e){return new t(rf.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===rf.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return rf.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new rf(e.slice()))},t}();function uf(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cf(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lf(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var hf=function(){function t(t){this.fields=t,t.sort(sf.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return qh(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),ff=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function df(t){if(Dh(!!t),"string"==typeof t){var e=0,n=ff.exec(t);if(Dh(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:pf(t.seconds),nanos:pf(t.nanos)}}function pf(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function gf(t){return"string"==typeof t?Bh.fromBase64String(t):Bh.fromUint8Array(t)}function yf(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function vf(t){var e=t.mapValue.fields.__previous_value__;return yf(e)?vf(e):e}function mf(t){var e=df(t.mapValue.fields.__local_write_time__.timestampValue);return new tf(e.seconds,e.nanos)}function _f(t){return null==t}function bf(t){return 0===t&&1/t==-1/0}function wf(t){return"number"==typeof t&&Number.isInteger(t)&&!bf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Of(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yf(t)?4:10:Mh()}function Cf(t,e){var n=Of(t);if(n!==Of(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mf(t).isEqual(mf(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=df(t.timestampValue),r=df(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return gf(t.bytesValue).isEqual(gf(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return pf(t.geoPointValue.latitude)===pf(e.geoPointValue.latitude)&&pf(t.geoPointValue.longitude)===pf(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return pf(t.integerValue)===pf(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=pf(t.doubleValue),r=pf(e.doubleValue);return n===r?bf(n)===bf(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return qh(t.arrayValue.values||[],e.arrayValue.values||[],Cf);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(uf(n)!==uf(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Cf(n[i],r[i])))return!1;return!0}(t,e);default:return Mh()}}function Ef(t,e){return void 0!==(t.values||[]).find(function(t){return Cf(t,e)})}function Sf(t,e){var n=Of(t),r=Of(e);if(n!==r)return Vh(n,r);switch(n){case 0:return 0;case 1:return Vh(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=pf(t.integerValue||t.doubleValue),r=pf(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Tf(t.timestampValue,e.timestampValue);case 4:return Tf(mf(t),mf(e));case 5:return Vh(t.stringValue,e.stringValue);case 6:return function(t,e){var n=gf(t),r=gf(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Vh(n[i],r[i]);if(0!==o)return o}return Vh(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Vh(pf(t.latitude),pf(e.latitude));return 0!==n?n:Vh(pf(t.longitude),pf(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Sf(n[i],r[i]);if(o)return o}return Vh(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Vh(r[s],o[s]);if(0!==a)return a;var u=Sf(n[r[s]],i[o[s]]);if(0!==u)return u}return Vh(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Mh()}}function Tf(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Vh(t,e);var n=df(t),r=df(e),i=Vh(n.seconds,r.seconds);return 0!==i?i:Vh(n.nanos,r.nanos)}function xf(t){return If(t)}function If(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=df(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?gf(t.bytesValue).toBase64():"referenceValue"in t?af.ft(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=If(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+If(t.fields[o])}return e+"}"}(t.mapValue):Mh();var e}function Pf(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function jf(t){return!!t&&"integerValue"in t}function Af(t){return!!t&&"arrayValue"in t}function Rf(t){return!!t&&"nullValue"in t}function kf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nf(t){return!!t&&"mapValue"in t}var Mf=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Nf(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return Cf(this.proto,t.proto)},t}(),Df=function(){function t(t){void 0===t&&(t=Mf.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Of(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(sf.ct(),this.At);return null!=t?new Mf(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=Nf(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function Lf(t){var e=[];return cf(t.fields||{},function(t,n){var r=new sf([t]);if(Nf(n)){var i=Lf(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new hf(e)}var Ff=function(t,e){this.key=t,this.version=e},Uf=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Th.c)(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Ff),Vf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Th.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ff),qf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Th.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ff),zf=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function Bf(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new zf(t,e,n,r,i,o,s)}function Hf(t){var e=Lh(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.rt()+t.op.toString()+xf(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.rt()+t.dir}(t)}).join(","),_f(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=rd(e.startAt)),e.endAt&&(n+="|ub:",n+=rd(e.endAt)),e.vt=n}return e.vt}function Wf(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!od(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Cf(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ad(t.startAt,e.startAt)&&ad(t.endAt,e.endAt)}function Gf(t){return af.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Kf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Th.c)(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new Qf(t,n,r):"array-contains"===n?new Zf(t,r):"in"===n?new Jf(t,r):"not-in"===n?new td(t,r):"array-contains-any"===n?new ed(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new $f(t,n):new Yf(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(Sf(e,this.value)):null!==e&&Of(this.value)===Of(e)&&this.Dt(Sf(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Mh()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Qf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=af.ft(r.referenceValue),i}return Object(Th.c)(e,t),e.prototype.matches=function(t){var e=af.H(t.key,this.key);return this.Dt(e)},e}(Kf),$f=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Xf(0,n),r}return Object(Th.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Kf),Yf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Xf(0,n),r}return Object(Th.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Kf);function Xf(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return af.ft(t.referenceValue)})}var Zf=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Th.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Af(e)&&Ef(e.arrayValue,this.value)},e}(Kf),Jf=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Th.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Ef(this.value.arrayValue,e)},e}(Kf),td=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Th.c)(e,t),e.prototype.matches=function(t){if(Ef(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Ef(this.value.arrayValue,e)},e}(Kf),ed=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Th.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Af(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Ef(e.value.arrayValue,t)})},e}(Kf),nd=function(t,e){this.position=t,this.before=e};function rd(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return xf(t)}).join(",")}var id=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function od(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function sd(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?af.H(af.ft(s.referenceValue),n.key):Sf(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ad(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Cf(t.position[n],e.position[n]))return!1;return!0}var ud=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null};function cd(t,e,n,r,i,o,s,a){return new ud(t,e,n,r,i,o,s,a)}function ld(t){return new ud(t)}function hd(t){return!_f(t.limit)&&"F"===t.limitType}function fd(t){return!_f(t.limit)&&"L"===t.limitType}function dd(t){return t.xt.length>0?t.xt[0].field:null}function pd(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function gd(t){return null!==t.collectionGroup}function yd(t){var e=Lh(t);if(null===e.Nt){e.Nt=[];var n=pd(e),r=dd(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new id(n)),e.Nt.push(new id(sf.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new id(sf.ht(),u))}}}return e.Nt}function vd(t){var e=Lh(t);if(!e.$t)if("F"===e.limitType)e.$t=Bf(e.path,e.collectionGroup,yd(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=yd(e);r<i.length;r++){var o=i[r];n.push(new id(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new nd(e.endAt.position,!e.endAt.before):null,a=e.startAt?new nd(e.startAt.position,!e.startAt.before):null;e.$t=Bf(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.$t}function md(t,e,n){return new ud(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _d(t,e){return Wf(vd(t),vd(e))&&t.limitType===e.limitType}function bd(t){return Hf(vd(t))+"|lt:"+t.limitType}function wd(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.rt()+" "+e.op+" "+xf(e.value);var e}).join(", ")+"]"),_f(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+rd(t.startAt)),t.endAt&&(e+=", endAt: "+rd(t.endAt)),"Target("+e+")"}(vd(t))+"; limitType="+t.limitType+")"}function Od(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):af.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!sd(t.startAt,yd(t),e)||t.endAt&&sd(t.endAt,yd(t),e))}(t,e)}function Cd(t){return function(e,n){for(var r=!1,i=0,o=yd(t);i<o.length;i++){var s=o[i],a=Ed(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function Ed(t,e,n){var r=t.field.ut()?af.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Sf(r,i):Mh()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Mh()}}var Sd=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ef.min()),void 0===o&&(o=ef.min()),void 0===s&&(s=Bh.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();function Td(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bf(e)?"-0":e}}function xd(t){return{integerValue:""+t}}function Id(t,e){return wf(e)?xd(e):Td(t,e)}var Pd=function(){this.qt=void 0};function jd(t,e,n){return t instanceof kd?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Nd?Md(t,e):t instanceof Dd?Ld(t,e):function(t,e){var n=Rd(t,e),r=Ud(n)+Ud(t.Ut);return jf(n)&&jf(t.Ut)?xd(r):Td(t.Qt,r)}(t,e)}function Ad(t,e,n){return t instanceof Nd?Md(t,e):t instanceof Dd?Ld(t,e):n}function Rd(t,e){return t instanceof Fd?jf(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var kd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Th.c)(e,t),e}(Pd),Nd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Th.c)(e,t),e}(Pd);function Md(t,e){for(var n=Vd(e),r=function(t){n.some(function(e){return Cf(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Dd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Th.c)(e,t),e}(Pd);function Ld(t,e){for(var n=Vd(e),r=function(t){n=n.filter(function(e){return!Cf(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Fd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return Object(Th.c)(e,t),e}(Pd);function Ud(t){return pf(t.integerValue||t.doubleValue)}function Vd(t){return Af(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var qd=function(t,e){this.field=t,this.transform=e},zd=function(t,e){this.version=t,this.transformResults=e},Bd=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Hd(t,e){return void 0!==t.updateTime?e instanceof Uf&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Uf}var Wd=function(){};function Gd(t,e,n){return t instanceof Xd?function(t,e,n){var r=t.value;if(n.transformResults){var i=tp(t.fieldTransforms,e,n.transformResults);r=np(t.fieldTransforms,r,i)}return new Uf(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Zd?function(t,e,n){if(!Hd(t.jt,e))return new qf(t.key,n.version);var r=Jd(t,e,n.transformResults?tp(t.fieldTransforms,e,n.transformResults):[]);return new Uf(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Vf(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Kd(t,e,n){return t instanceof Xd?function(t,e,n){if(!Hd(t.jt,e))return e;var r=t.value,i=ep(t.fieldTransforms,n,e);r=np(t.fieldTransforms,r,i);var o=Yd(e);return new Uf(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof Zd?function(t,e,n){if(!Hd(t.jt,e))return e;var r=Yd(e),i=Jd(t,e,ep(t.fieldTransforms,n,e));return new Uf(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return Hd(t.jt,e)?new Vf(t.key,ef.min()):e}(t,e)}function Qd(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Uf?e.field(o.field):void 0,a=Rd(o.transform,s||null);null!=a&&(n=null==n?(new Df).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function $d(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&qh(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Nd&&e instanceof Nd||t instanceof Dd&&e instanceof Dd?qh(t.elements,e.elements,Cf):t instanceof Fd&&e instanceof Fd?Cf(t.Ut,e.Ut):t instanceof kd&&e instanceof kd}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function Yd(t){return t instanceof Uf?t.version:ef.min()}var Xd=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return Object(Th.c)(e,t),e}(Wd),Zd=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return Object(Th.c)(e,t),e}(Wd);function Jd(t,e,n){var r;return r=function(t,e){var n=new Df(e);return t.Gt.fields.forEach(function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.Pt()}(t,r=e instanceof Uf?e.data():Mf.empty()),np(t.fieldTransforms,r,n)}function tp(t,e,n){var r=[];Dh(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Uf&&(a=e.field(o.field)),r.push(Ad(s,a,n[i]))}return r}function ep(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof Uf&&(u=n.field(s.field)),r.push(jd(a,u,e))}return r}function np(t,e,n){for(var r=new Df(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.Pt()}var rp,ip,op=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return Object(Th.c)(e,t),e}(Wd),sp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return Object(Th.c)(e,t),e}(Wd),ap=function(t){this.count=t};function up(t){switch(t){case Hh.OK:return Mh();case Hh.CANCELLED:case Hh.UNKNOWN:case Hh.DEADLINE_EXCEEDED:case Hh.RESOURCE_EXHAUSTED:case Hh.INTERNAL:case Hh.UNAVAILABLE:case Hh.UNAUTHENTICATED:return!1;case Hh.INVALID_ARGUMENT:case Hh.NOT_FOUND:case Hh.ALREADY_EXISTS:case Hh.PERMISSION_DENIED:case Hh.FAILED_PRECONDITION:case Hh.ABORTED:case Hh.OUT_OF_RANGE:case Hh.UNIMPLEMENTED:case Hh.DATA_LOSS:return!0;default:return Mh()}}function cp(t){if(void 0===t)return Rh("GRPC error has no .code"),Hh.UNKNOWN;switch(t){case rp.OK:return Hh.OK;case rp.CANCELLED:return Hh.CANCELLED;case rp.UNKNOWN:return Hh.UNKNOWN;case rp.DEADLINE_EXCEEDED:return Hh.DEADLINE_EXCEEDED;case rp.RESOURCE_EXHAUSTED:return Hh.RESOURCE_EXHAUSTED;case rp.INTERNAL:return Hh.INTERNAL;case rp.UNAVAILABLE:return Hh.UNAVAILABLE;case rp.UNAUTHENTICATED:return Hh.UNAUTHENTICATED;case rp.INVALID_ARGUMENT:return Hh.INVALID_ARGUMENT;case rp.NOT_FOUND:return Hh.NOT_FOUND;case rp.ALREADY_EXISTS:return Hh.ALREADY_EXISTS;case rp.PERMISSION_DENIED:return Hh.PERMISSION_DENIED;case rp.FAILED_PRECONDITION:return Hh.FAILED_PRECONDITION;case rp.ABORTED:return Hh.ABORTED;case rp.OUT_OF_RANGE:return Hh.OUT_OF_RANGE;case rp.UNIMPLEMENTED:return Hh.UNIMPLEMENTED;case rp.DATA_LOSS:return Hh.DATA_LOSS;default:return Mh()}}(ip=rp||(rp={}))[ip.OK=0]="OK",ip[ip.CANCELLED=1]="CANCELLED",ip[ip.UNKNOWN=2]="UNKNOWN",ip[ip.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ip[ip.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ip[ip.NOT_FOUND=5]="NOT_FOUND",ip[ip.ALREADY_EXISTS=6]="ALREADY_EXISTS",ip[ip.PERMISSION_DENIED=7]="PERMISSION_DENIED",ip[ip.UNAUTHENTICATED=16]="UNAUTHENTICATED",ip[ip.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ip[ip.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ip[ip.ABORTED=10]="ABORTED",ip[ip.OUT_OF_RANGE=11]="OUT_OF_RANGE",ip[ip.UNIMPLEMENTED=12]="UNIMPLEMENTED",ip[ip.INTERNAL=13]="INTERNAL",ip[ip.UNAVAILABLE=14]="UNAVAILABLE",ip[ip.DATA_LOSS=15]="DATA_LOSS";var lp=function(){function t(t,e){this.H=t,this.root=e||fp.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,fp.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,fp.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Xt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new hp(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new hp(this.root,t,this.H,!1)},t.prototype.ne=function(){return new hp(this.root,null,this.H,!0)},t.prototype.se=function(t){return new hp(this.root,t,this.H,!0)},t}(),hp=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),fp=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw Mh();if(this.right.le())throw Mh();var t=this.left.Ie();if(t!==this.right.Ie())throw Mh();return t+(this.le()?0:1)},t}();fp.EMPTY=null,fp.RED=!0,fp.Ht=!1,fp.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Mh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Mh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Mh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Mh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Mh()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new fp(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());var dp=function(){function t(t){this.H=t,this.data=new lp(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt(function(e,n){return t(e),!1})},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new pp(this.data.te())},t.prototype.ee=function(t){return new pp(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),pp=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),gp=new lp(af.H);function yp(){return gp}function vp(){return yp()}var mp=new lp(af.H);function _p(){return mp}var bp=new lp(af.H);function wp(){return bp}var Op=new dp(af.H);function Cp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Op,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ep=new dp(Vh);function Sp(){return Ep}var Tp=function(){function t(t){this.H=t?function(e,n){return t(e,n)||af.H(e.key,n.key)}:function(t,e){return af.H(t.key,e.key)},this.ge=_p(),this.Ve=new lp(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),xp=function(){function t(){this.be=new lp(af.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):Mh():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt(function(e,n){t.push(n)}),t},t}(),Ip=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Tp.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&_d(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Pp=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,jp.Le(e,n)),new t(ef.min(),r,Sp(),yp(),Cp())},t}(),jp=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(Bh.T,n,Cp(),Cp(),Cp())},t}(),Ap=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},Rp=function(t,e){this.targetId=t,this.je=e},kp=function(t,e,n,r){void 0===n&&(n=Bh.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Np=function(){function t(){this.Ge=0,this.ze=Lp(),this.He=Bh.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=Cp(),e=Cp(),n=Cp();return this.ze.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Mh()}}),new jp(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=Lp()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),Mp=function(){function t(t){this.un=t,this.hn=new Map,this.ln=yp(),this._n=Dp(),this.fn=new dp(Vh)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof Uf?this.wn(r,t.We):t.We instanceof Vf&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.En(r=o[i],t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:Mh()}})},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach(function(t,r){n.An(r)&&e(r)})},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(Gf(i))if(0===n){var o=new af(i.path);this.En(e,o,new Vf(o,ef.min()))}else Dh(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach(function(r,i){var o=e.yn(i);if(o){if(r.Be&&Gf(o.target)){var s=new af(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new Vf(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}});var r=Cp();this._n.forEach(function(t,n){var i=!0;n.Ae(function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Pp(t,n,this.fn,this.ln,r);return this.ln=yp(),this._n=Dp(),this.fn=new dp(Vh),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new Np,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new dp(Vh),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||Ah("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new Np),this.un.vn(t).forEach(function(n){e.En(t,n,null)})},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();function Dp(){return new lp(af.H)}function Lp(){return new lp(af.H)}var Fp={asc:"ASCENDING",desc:"DESCENDING"},Up={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vp=function(t,e){this.t=t,this.Bt=e};function qp(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function zp(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function Bp(t,e){return qp(t,e.j())}function Hp(t){return Dh(!!t),ef.K(function(t){var e=df(t);return new tf(e.seconds,e.nanos)}(t))}function Wp(t,e){return function(t){return new rf(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function Gp(t){var e=rf.ot(t);return Dh(yg(e)),e}function Kp(t,e){return Wp(t.t,e.path)}function Qp(t,e){var n=Gp(e);if(n.get(1)!==t.t.projectId)throw new Wh(Hh.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new Wh(Hh.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new af(Zp(n))}function $p(t,e){return Wp(t.t,e)}function Yp(t){var e=Gp(t);return 4===e.length?rf.ct():Zp(e)}function Xp(t){return new rf(["projects",t.t.projectId,"databases",t.t.database]).rt()}function Zp(t){return Dh(t.length>4&&"documents"===t.get(4)),t.Y(5)}function Jp(t,e,n){return{name:Kp(t,e),fields:n.proto.mapValue.fields}}function tg(t,e,n){var r=Qp(t,e.name),i=Hp(e.updateTime),o=new Mf({mapValue:{fields:e.fields}});return new Uf(r,i,o,{hasCommittedMutations:!!n})}function eg(t,e){var n;if(e instanceof Xd)n={update:Jp(t,e.key,e.value)};else if(e instanceof op)n={delete:Kp(t,e.key)};else if(e instanceof Zd)n={update:Jp(t,e.key,e.data),updateMask:gg(e.Gt)};else{if(!(e instanceof sp))return Mh();n={verify:Kp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof kd)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof Nd)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof Dd)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof Fd)return{fieldPath:e.field.rt(),increment:n.Ut};throw Mh()}(0,t)})),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Bp(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Mh()}(t,e.jt)),n}function ng(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Bd.updateTime(Hp(t.updateTime)):void 0!==t.exists?Bd.exists(t.exists):Bd.Kt()}(e.currentDocument):Bd.Kt(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Dh("REQUEST_TIME"===e.setToServerValue),n=new kd):"appendMissingElements"in e?n=new Nd(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Dd(e.removeAllFromArray.values||[]):"increment"in e?n=new Fd(t,e.increment):Mh();var r=sf.lt(e.fieldPath);return new qd(r,n)}(t,e)}):[];if(e.update){var i=Qp(t,e.update.name),o=new Mf({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new hf((t.fieldPaths||[]).map(function(t){return sf.lt(t)}))}(e.updateMask);return new Zd(i,o,s,n,r)}return new Xd(i,o,n,r)}if(e.delete){var a=Qp(t,e.delete);return new op(a,n)}if(e.verify){var u=Qp(t,e.verify);return new sp(u,n)}return Mh()}function rg(t,e){return{documents:[$p(t,e.path)]}}function ig(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=$p(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=$p(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(kf(t.value))return{unaryFilter:{field:hg(t.field),op:"IS_NAN"}};if(Rf(t.value))return{unaryFilter:{field:hg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(kf(t.value))return{unaryFilter:{field:hg(t.field),op:"IS_NOT_NAN"}};if(Rf(t.value))return{unaryFilter:{field:hg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hg(t.field),op:lg(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:hg(t.field),direction:cg(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||_f(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=ag(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ag(e.endAt)),n}function og(t){var e=Yp(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Dh(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=sg(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new id(fg(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return _f(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=ug(n.startAt));var l=null;return n.endAt&&(l=ug(n.endAt)),cd(e,i,a,s,u,"F",c,l)}function sg(t){return t?void 0!==t.unaryFilter?[pg(t)]:void 0!==t.fieldFilter?[dg(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return sg(t)}).reduce(function(t,e){return t.concat(e)}):Mh():[]}function ag(t){return{before:t.before,values:t.position}}function ug(t){return new nd(t.values||[],!!t.before)}function cg(t){return Fp[t]}function lg(t){return Up[t]}function hg(t){return{fieldPath:t.rt()}}function fg(t){return sf.lt(t.fieldPath)}function dg(t){return Kf.create(fg(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Mh()}}(t.fieldFilter.op),t.fieldFilter.value)}function pg(t){switch(t.unaryFilter.op){case"IS_NAN":var e=fg(t.unaryFilter.field);return Kf.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=fg(t.unaryFilter.field);return Kf.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=fg(t.unaryFilter.field);return Kf.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=fg(t.unaryFilter.field);return Kf.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Mh()}}function gg(t){var e=[];return t.fields.forEach(function(t){return e.push(t.rt())}),{fieldPaths:e}}function yg(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var vg=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},mg=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t(function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)},function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&Mh(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t(function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}})},t.prototype.On=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn(function(){return e(n)}):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.Mn=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.Mn(r)},t}(),_g=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new vg,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new Og(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=xg(e.target.error);n.Bn.reject(new Og(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Og(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(Ah("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Eg(e)},t}(),bg=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(Object(Ea.m)())&&Rh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ah("SimpleDb","Removing database:",t),Sg(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=Object(Ea.m)(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return Object(Th.b)(this,void 0,void 0,function(){var e,n=this;return Object(Th.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Ah("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Og(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Wh(Hh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Og(t,n))},i.onupgradeneeded=function(t){Ah("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Un.Jn(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Ah("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}})})},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Th.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Th.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Th.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=h.sent(),e=_g.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),mg.reject(t)}).On(),u={},s.catch(function(){}),[4,e.qn];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Ah("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),wg=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return Sg(this.Zn.delete())},t}(),Og=function(t){function e(e,n){var r=this;return(r=t.call(this,Hh.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Th.c)(e,t),e}(Wh);function Cg(t){return"IndexedDbTransactionError"===t.name}var Eg=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ah("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ah("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Sg(n)},t.prototype.add=function(t){return Ah("SimpleDb","ADD",this.store.name,t,t),Sg(this.store.add(t))},t.prototype.get=function(t){var e=this;return Sg(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Ah("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Ah("SimpleDb","DELETE",this.store.name,t),Sg(this.store.delete(t))},t.prototype.count=function(){return Ah("SimpleDb","COUNT",this.store.name),Sg(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.cs=function(t,e){Ah("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,function(t,e,n){return n.delete()})},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new mg(function(n,r){e.onerror=function(t){var e=xg(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.os=function(t,e){var n=[];return new mg(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new wg(i),s=e(i.primaryKey,i.value,o);if(s instanceof mg){var a=s.catch(function(t){return o.done(),mg.reject(t)});n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}}).next(function(){return mg.Mn(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Sg(t){return new mg(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=xg(t.target.error);n(e)}})}var Tg=!1;function xg(t){var e=bg.Qn(Object(Ea.m)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Wh("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Tg||(Tg=!0,setTimeout(function(){throw r},0)),r}}return t}var Ig=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new vg,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch(function(t){})}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout(function(){return e.As()},t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new Wh(Hh.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps(function(){return null!==t.Is?(t.clearTimeout(),t.op().then(function(e){return t.Es.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function Pg(t,e){if(Rh("AsyncQueue",e+": "+t),Cg(t))return new Wh(Hh.UNAVAILABLE,e+": "+t);throw t}var jg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ag=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach(function(t){return t()})},t}();function Rg(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ng(e)),e=kg(t.get(n),e);return Ng(e)}function kg(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ng(t){return t+"\x01\x01"}function Mg(t){var e=t.length;if(Dh(e>=2),2===e)return Dh("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),rf.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Mh(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Mh()}o=s+2}return new rf(r)}var Dg=function(t,e){this.seconds=t,this.nanoseconds=e},Lg=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Lg.store="owner",Lg.key="owner";var Fg=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Fg.store="mutationQueues",Fg.keyPath="userId";var Ug=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ug.store="mutations",Ug.keyPath="batchId",Ug.userMutationsIndex="userMutationsIndex",Ug.userMutationsKeyPath=["userId","batchId"];var Vg=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Rg(e)]},t.key=function(t,e,n){return[t,Rg(e),n]},t}();Vg.store="documentMutations",Vg.PLACEHOLDER=new Vg;var qg=function(t,e){this.path=t,this.readTime=e},zg=function(t,e){this.path=t,this.version=e},Bg=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Bg.store="remoteDocuments",Bg.readTimeIndex="readTimeIndex",Bg.readTimeIndexPath="readTime",Bg.collectionReadTimeIndex="collectionReadTimeIndex",Bg.collectionReadTimeIndexPath=["parentPath","readTime"];var Hg=function(t){this.byteSize=t};Hg.store="remoteDocumentGlobal",Hg.key="remoteDocumentGlobalKey";var Wg=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Wg.store="targets",Wg.keyPath="targetId",Wg.queryTargetsIndexName="queryTargetsIndex",Wg.queryTargetsKeyPath=["canonicalId","targetId"];var Gg=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Gg.store="targetDocuments",Gg.keyPath=["targetId","path"],Gg.documentTargetsIndex="documentTargetsIndex",Gg.documentTargetsKeyPath=["path","targetId"];var Kg=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Kg.key="targetGlobalKey",Kg.store="targetGlobal";var Qg=function(t,e){this.collectionId=t,this.parent=e};Qg.store="collectionParents",Qg.keyPath=["collectionId","parent"];var $g=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};$g.store="clientMetadata",$g.keyPath="clientId";var Yg=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Yg.store="bundles",Yg.keyPath="bundleId";var Xg=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Xg.store="namedQueries",Xg.keyPath="name";var Zg=Object(Th.g)(Object(Th.g)(Object(Th.g)(Object(Th.g)([Fg.store,Ug.store,Vg.store,Bg.store,Wg.store,Lg.store,Kg.store,Gg.store],[$g.store]),[Hg.store]),[Qg.store]),[Yg.store,Xg.store]),Jg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return Object(Th.c)(e,t),e}(Ag);function ty(t,e){var n=Lh(t);return bg.zn(n.ps,e)}var ey=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Gd(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Kd(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Kd(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Cp())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&qh(this.mutations,t.mutations,function(t,e){return $d(t,e)})&&qh(this.baseMutations,t.baseMutations,function(t,e){return $d(t,e)})},t}(),ny=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){Dh(e.mutations.length===r.length);for(var i=wp(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),ry=function(t){this.Fs=t};function iy(t,e){if(e.document)return tg(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=af.Et(e.noDocument.path),r=cy(e.noDocument.readTime);return new Vf(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=af.Et(e.unknownDocument.path);return r=cy(e.unknownDocument.version),new qf(i,r)}return Mh()}function oy(t,e,n){var r=sy(n),i=e.key.path.X().it();if(e instanceof Uf){var o=function(t,e){return{name:Kp(t,e.key),fields:e.bt().mapValue.fields,updateTime:qp(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new Bg(null,null,o,s,r,i)}if(e instanceof Vf){var a=e.key.path.it(),u=uy(e.version);return s=e.hasCommittedMutations,new Bg(null,new qg(a,u),null,s,r,i)}if(e instanceof qf){var c=e.key.path.it(),l=uy(e.version);return new Bg(new zg(c,l),null,null,!0,r,i)}return Mh()}function sy(t){var e=t.j();return[e.seconds,e.nanoseconds]}function ay(t){var e=new tf(t[0],t[1]);return ef.K(e)}function uy(t){var e=t.j();return new Dg(e.seconds,e.nanoseconds)}function cy(t){var e=new tf(t.seconds,t.nanoseconds);return ef.K(e)}function ly(t,e){for(var n=(e.baseMutations||[]).map(function(e){return ng(t.Fs,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return ng(t.Fs,e)}),o=tf.fromMillis(e.localWriteTimeMs);return new ey(e.batchId,o,n,i)}function hy(t){var e,n,r=cy(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?cy(t.lastLimboFreeSnapshotVersion):ef.min();return void 0!==t.query.documents?(Dh(1===(n=t.query).documents.length),e=vd(ld(Yp(n.documents[0])))):e=function(t){return vd(og(t))}(t.query),new Sd(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Bh.fromBase64String(t.resumeToken))}function fy(t,e){var n,r=uy(e.Ot),i=uy(e.lastLimboFreeSnapshotVersion);n=Gf(e.target)?rg(t.Fs,e.target):ig(t.Fs,e.target);var o=e.resumeToken.toBase64();return new Wg(e.targetId,Hf(e.target),r,o,e.sequenceNumber,i,n)}function dy(t){var e=og({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?md(e,e.limit,"L"):e}var py=function(){function t(){}return t.prototype.Os=function(t,e){return gy(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:cy(e.createTime),version:e.version};var e})},t.prototype.ks=function(t,e){return gy(t).put({bundleId:(n=e).id,createTime:uy(Hp(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return yy(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:dy(e.bundledQuery),readTime:cy(e.readTime)};var e})},t.prototype.Ls=function(t,e){return yy(t).put(function(t){return{name:t.name,readTime:uy(Hp(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function gy(t){return ty(t,Yg.store)}function yy(t){return ty(t,Xg.store)}var vy=function(){function t(){this.Bs=new my}return t.prototype.qs=function(t,e){return this.Bs.add(e),mg.resolve()},t.prototype.Us=function(t,e){return mg.resolve(this.Bs.getEntries(e))},t}(),my=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new dp(rf.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new dp(rf.H)).it()},t}(),_y=function(){function t(){this.Qs=new my}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs(function(){n.Qs.add(e)});var o={collectionId:r,parent:Rg(i)};return by(t).put(o)}return mg.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[zh(e),""],!1,!0);return by(t).rs(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Mg(o.parent))}return n})},t}();function by(t){return ty(t,Qg.store)}var wy={Ks:!1,Ws:0,js:0,Gs:0},Oy=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();function Cy(t){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(e){if(t.code!==Hh.FAILED_PRECONDITION||t.message!==jg)throw t;return Ah("LocalStore","Unexpectedly lost primary lease"),[2]})})}Oy.Xs=10,Oy.Zs=1e3,Oy.ti=new Oy(41943040,Oy.Xs,Oy.Zs),Oy.ei=new Oy(-1,0,0);var Ey=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.si(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){cf(this.ii,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.et=function(){return lf(this.ii)},t}(),Sy=function(){function t(){this.ri=new Ey(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:ef.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?mg.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();function Ty(t,e,n){var r=t.store(Ug.store),i=t.store(Vg.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Dh(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Vg.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return mg.Mn(o).next(function(){return c})}function xy(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Mh();e=t.noDocument}return JSON.stringify(e).length}var Iy=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return Dh(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jy(t).hs({index:Ug.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Ri=function(t,e,n,r){var i=this,o=Ay(t),s=jy(t);return s.add({}).next(function(a){Dh("number"==typeof a);for(var u=new ey(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return eg(t.Fs,e)}),i=n.mutations.map(function(e){return eg(t.Fs,e)});return new Ug(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),l=[],h=new dp(function(t,e){return Vh(t.rt(),e.rt())}),f=0,d=r;f<d.length;f++){var p=d[f],g=Vg.key(i.userId,p.key.path,a);h=h.add(p.key.path.X()),l.push(s.put(c)),l.push(o.put(g,Vg.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ei.qs(t,e))}),t.gs(function(){i.Ii[a]=u.keys()}),mg.Mn(l).next(function(){return u})})},t.prototype.Pi=function(t,e){var n=this;return jy(t).get(e).next(function(t){return t?(Dh(t.userId===n.userId),ly(n.Qt,t)):null})},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?mg.resolve(this.Ii[e]):this.Pi(t,e).next(function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null})},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return jy(t).hs({index:Ug.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Dh(e.batchId>=r),o=ly(n.Qt,e)),i.done()}).next(function(){return o})},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return jy(t).hs({index:Ug.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jy(t).rs(Ug.userMutationsIndex,n).next(function(t){return t.map(function(t){return ly(e.Qt,t)})})},t.prototype.bi=function(t,e){var n=this,r=Vg.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Ay(t).hs({range:i},function(r,i,s){var a=r[0],u=r[2],c=Mg(r[1]);if(a===n.userId&&e.path.isEqual(c))return jy(t).get(u).next(function(t){if(!t)throw Mh();Dh(t.userId===n.userId),o.push(ly(n.Qt,t))});s.done()}).next(function(){return o})},t.prototype.vi=function(t,e){var n=this,r=new dp(Vh),i=[];return e.forEach(function(e){var o=Vg.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Ay(t).hs({range:s},function(t,i,o){var s=t[0],a=t[2],u=Mg(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),mg.Mn(i).next(function(){return n.Si(t,r)})},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=Vg.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new dp(Vh);return Ay(t).hs({range:s},function(t,e,o){var s=t[0],u=t[2],c=Mg(t[1]);s===n.userId&&r.nt(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Si(t,a)})},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(jy(t).get(e).next(function(t){if(null===t)throw Mh();Dh(t.userId===n.userId),r.push(ly(n.Qt,t))}))}),mg.Mn(i).next(function(){return r})},t.prototype.Ci=function(t,e){var n=this;return Ty(t.ps,this.userId,e).next(function(r){return t.gs(function(){n.xi(e.batchId)}),mg.forEach(r,function(e){return n.Ti.Ni(t,e)})})},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next(function(n){if(!n)return mg.resolve();var r=IDBKeyRange.lowerBound(Vg.prefixForUser(e.userId)),i=[];return Ay(t).hs({range:r},function(t,n,r){if(t[0]===e.userId){var o=Mg(t[1]);i.push(o)}else r.done()}).next(function(){Dh(0===i.length)})})},t.prototype.Fi=function(t,e){return Py(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return Ry(t).get(this.userId).next(function(t){return t||new Fg(e.userId,-1,"")})},t}();function Py(t,e,n){var r=Vg.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ay(t).hs({range:o,us:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function jy(t){return ty(t,Ug.store)}function Ay(t){return ty(t,Vg.store)}function Ry(t){return ty(t,Fg.store)}var ky=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),Ny=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next(function(n){var r=new ky(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next(function(){return n.highestTargetId})})},t.prototype.Qi=function(t){return this.qi(t).next(function(t){return ef.K(new tf(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Ki=function(t){return this.qi(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)})},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next(function(){return n.qi(t).next(function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)})})},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next(function(){return My(t).delete(e.targetId)}).next(function(){return n.qi(t)}).next(function(e){return Dh(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)})},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return My(t).hs(function(s,a){var u=hy(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))}).next(function(){return mg.Mn(o)}).next(function(){return i})},t.prototype.In=function(t,e){return My(t).hs(function(t,n){var r=hy(n);e(r)})},t.prototype.qi=function(t){return Dy(t).get(Kg.key).next(function(t){return Dh(null!==t),t})},t.prototype.Ui=function(t,e){return Dy(t).put(Kg.key,e)},t.prototype.Gi=function(t,e){return My(t).put(fy(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next(function(t){return t.targetCount})},t.prototype.tr=function(t,e){var n=Hf(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return My(t).hs({range:r,index:Wg.queryTargetsIndexName},function(t,n,r){var o=hy(n);Wf(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.er=function(t,e,n){var r=this,i=[],o=Ly(t);return e.forEach(function(e){var s=Rg(e.path);i.push(o.put(new Gg(n,s))),i.push(r.Ti.nr(t,n,e))}),mg.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=Ly(t);return mg.forEach(e,function(e){var o=Rg(e.path);return mg.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])})},t.prototype.Yi=function(t,e){var n=Ly(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ly(t),i=Cp();return r.hs({range:n,us:!0},function(t,e,n){var r=Mg(t[1]),o=new af(r);i=i.add(o)}).next(function(){return i})},t.prototype.Fi=function(t,e){var n=Rg(e.path),r=IDBKeyRange.bound([n],[zh(n)],!1,!0),i=0;return Ly(t).hs({index:Gg.documentTargetsIndex,us:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Sn=function(t,e){return My(t).get(e).next(function(t){return t?hy(t):null})},t}();function My(t){return ty(t,Wg.store)}function Dy(t){return ty(t,Kg.store)}function Ly(t){return ty(t,Gg.store)}function Fy(t,e){var n=t[1],r=e[1],i=Vh(t[0],e[0]);return 0===i?Vh(n,r):i}var Uy=function(){function t(t){this.cr=t,this.buffer=new dp(Fy),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Fy(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Vy=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;Ah("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,function(){return Object(Th.b)(e,void 0,void 0,function(){var e;return Object(Th.d)(this,function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return Cg(e=n.sent())?(Ah("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Cy(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}})})})},t}(),qy=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.Pr=function(t,e){var n=this;if(0===e)return mg.resolve(Jh.q);var r=new Uy(e);return this.mr.In(t,function(t){return r.hr(t.sequenceNumber)}).next(function(){return n.mr.yr(t,function(t){return r.hr(t)})}).next(function(){return r.maxValue})},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(Ah("LruGarbageCollector","Garbage collection skipped; disabled"),mg.resolve(wy)):this.pr(t).next(function(r){return r<n.params.zs?(Ah("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),wy):n.br(t,e)})},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Ar(t,this.params.Hs).next(function(e){return e>c.params.Js?(Ah("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)}).next(function(r){return n=r,s=Date.now(),c.Xi(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.gr(t,n)}).next(function(t){return u=Date.now(),jh()<=Ca.a.DEBUG&&Ah("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),mg.resolve({Ks:!0,Ws:r,js:i,Gs:t})})},t}(),zy=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new qy(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.vr=function(t){var e=0;return this.yr(t,function(t){e++}).next(function(){return e})},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,function(t,n){return e(n)})},t.prototype.nr=function(t,e,n){return By(t,n)},t.prototype.ir=function(t,e,n){return By(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return By(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return Ry(t).ls(function(r){return Py(t,r,e).next(function(t){return t&&(n=!0),mg.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,function(s,a){if(a<=e){var u=n.Cr(t,s).next(function(e){if(!e)return o++,r._i(t,s).next(function(){return r.li(s),Ly(t).delete([0,Rg(s.path)])})});i.push(u)}}).next(function(){return mg.Mn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return By(t,e)},t.prototype.Dr=function(t,e){var n,r=Ly(t),i=Jh.q;return r.hs({index:Gg.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Jh.q&&e(new af(Mg(n)),i),i=s,n=o):i=Jh.q}).next(function(){i!==Jh.q&&e(new af(Mg(n)),i)})},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function By(t,e){return Ly(t).put(function(t,e){return new Gg(0,Rg(t.path),e)}(e,t.bs))}var Hy=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return Ky(t).put(Qy(e),n)},t.prototype.li=function(t,e){var n=Ky(t),r=Qy(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.kr(t,r)})},t.prototype._i=function(t,e){var n=this;return Ky(t).get(Qy(e)).next(function(t){return n.Mr(t)})},t.prototype.Lr=function(t,e){var n=this;return Ky(t).get(Qy(e)).next(function(t){var e=n.Mr(t);return e?{hi:e,size:xy(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=vp();return this.Br(t,e,function(t,e){var i=n.Mr(e);r=r.zt(t,i)}).next(function(){return r})},t.prototype.qr=function(t,e){var n=this,r=vp(),i=new lp(af.H);return this.Br(t,e,function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,xy(e))):(r=r.zt(t,null),i=i.zt(t,0))}).next(function(){return{Ur:r,Qr:i}})},t.prototype.Br=function(t,e,n){if(e.et())return mg.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return Ky(t).hs({range:r},function(t,e,r){for(var s=af.Et(t);o&&af.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()}).next(function(){for(;o;)n(o,null),o=i.ce()?i.oe():null})},t.prototype.Kr=function(t,e,n){var r=this,i=_p(),o=e.path.length+1,s={};if(n.isEqual(ef.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=sy(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Bg.collectionReadTimeIndex}return Ky(t).hs(s,function(t,n,s){if(t.length===o){var a=iy(r.Qt,n);e.path.nt(a.key.path)?a instanceof Uf&&Od(e,a)&&(i=i.zt(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.Nr=function(t){return new Wy(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Gy(t).get(Hg.key).next(function(t){return Dh(!!t),t})},t.prototype.kr=function(t,e){return Gy(t).put(Hg.key,e)},t.prototype.Mr=function(t){if(t){var e=iy(this.Qt,t);return e instanceof Vf&&e.version.isEqual(ef.min())?null:e}return null},t}(),Wy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new Ey(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Th.c)(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new dp(function(t,e){return Vh(t.rt(),e.rt())});return this.ri.forEach(function(o,s){var a=e.Gr.get(o);if(s.hi){var u=oy(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=xy(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var l=oy(e.jr.Qt,new Vf(o,ef.min()),e.ci(o));n.push(e.jr.ai(t,o,l))}else n.push(e.jr.li(t,o))}),i.forEach(function(r){n.push(e.jr.Ei.qs(t,r))}),n.push(this.jr.updateMetadata(t,r)),mg.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next(function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)})},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next(function(t){var e=t.Ur;return t.Qr.forEach(function(t,e){n.Gr.set(t,e)}),e})},e}(Sy);function Gy(t){return ty(t,Hg.store)}function Ky(t){return ty(t,Bg.store)}function Qy(t){return t.path.it()}var $y=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;Dh(n<r&&n>=0&&r<=11);var o=new _g("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Lg.store)}(t),function(t){t.createObjectStore(Fg.store,{keyPath:Fg.keyPath}),t.createObjectStore(Ug.store,{keyPath:Ug.keyPath,autoIncrement:!0}).createIndex(Ug.userMutationsIndex,Ug.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Vg.store)}(t),Yy(t),function(t){t.createObjectStore(Bg.store)}(t));var s=mg.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Gg.store),t.deleteObjectStore(Wg.store),t.deleteObjectStore(Kg.store)}(t),Yy(t)),s=s.next(function(){return function(t){var e=t.store(Kg.store),n=new Kg(0,0,ef.min().j(),0);return e.put(Kg.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Ug.store).rs().next(function(n){t.deleteObjectStore(Ug.store),t.createObjectStore(Ug.store,{keyPath:Ug.keyPath,autoIncrement:!0}).createIndex(Ug.userMutationsIndex,Ug.userMutationsKeyPath,{unique:!0});var r=e.store(Ug.store),i=n.map(function(t){return r.put(t)});return mg.Mn(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore($g.store,{keyPath:$g.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.zr(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Hg.store)}(t),i.Hr(o)})),n<7&&r>=7&&(s=s.next(function(){return i.Jr(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Yr(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Bg.store);e.createIndex(Bg.readTimeIndex,Bg.readTimeIndexPath,{unique:!1}),e.createIndex(Bg.collectionReadTimeIndex,Bg.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Xr(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Yg.store,{keyPath:Yg.keyPath})}(t),function(t){t.createObjectStore(Xg.store,{keyPath:Xg.keyPath})}(t)})),s},t.prototype.Hr=function(t){var e=0;return t.store(Bg.store).hs(function(t,n){e+=xy(n)}).next(function(){var n=new Hg(e);return t.store(Hg.store).put(Hg.key,n)})},t.prototype.zr=function(t){var e=this,n=t.store(Fg.store),r=t.store(Ug.store);return n.rs().next(function(n){return mg.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(Ug.userMutationsIndex,i).next(function(r){return mg.forEach(r,function(r){Dh(r.userId===n.userId);var i=ly(e.Qt,r);return Ty(t,n.userId,i).next(function(){})})})})})},t.prototype.Jr=function(t){var e=t.store(Gg.store),n=t.store(Bg.store);return t.store(Kg.store).get(Kg.key).next(function(t){var r=[];return n.hs(function(n,i){var o=new rf(n),s=function(t){return[0,Rg(t)]}(o);r.push(e.get(s).next(function(n){return n?mg.resolve():function(n){return e.put(new Gg(0,Rg(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return mg.Mn(r)})})},t.prototype.Yr=function(t,e){t.createObjectStore(Qg.store,{keyPath:Qg.keyPath});var n=e.store(Qg.store),r=new my,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:Rg(i)})}};return e.store(Bg.store).hs({us:!0},function(t,e){var n=new rf(t);return i(n.X())}).next(function(){return e.store(Vg.store).hs({us:!0},function(t,e){var n=Mg(t[1]);return i(n.X())})})},t.prototype.Xr=function(t){var e=this,n=t.store(Wg.store);return n.hs(function(t,r){var i=hy(r),o=fy(e.Qt,i);return n.put(o)})},t}();function Yy(t){t.createObjectStore(Gg.store,{keyPath:Gg.keyPath}).createIndex(Gg.documentTargetsIndex,Gg.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Wg.store,{keyPath:Wg.keyPath}).createIndex(Wg.queryTargetsIndexName,Wg.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Kg.store)}var Xy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Zy=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=l,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new Wh(Hh.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new zy(this,i),this.ho=n+"main",this.Qt=new ry(u),this.lo=new bg(this.ho,11,new $y(this.Qt)),this._o=new Ny(this.Ti,this.Qt),this.Ei=new _y,this.fo=function(t,e){return new Hy(t,e)}(this.Qt,this.Ei),this.wo=new py,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===l&&Rh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Wh(Hh.FAILED_PRECONDITION,Xy);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t._o.Ki(e)})}).then(function(e){t.so=new Jh(e,t.eo)}).then(function(){t.io=!0}).catch(function(e){return t.lo&&t.lo.close(),Promise.reject(e)})},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return Object(Th.b)(e,void 0,void 0,function(){return Object(Th.d)(this,function(e){return this.Er?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn(function(n){return Object(Th.b)(e,void 0,void 0,function(){return Object(Th.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps(function(){return Object(Th.b)(e,void 0,void 0,function(){return Object(Th.d)(this,function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return tv(e).put(new $g(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Vo(e).next(function(e){e||(t.isPrimary=!1,t.Zr.po(function(){return t.uo(!1)}))})}).next(function(){return t.bo(e)}).next(function(n){return t.isPrimary&&!n?t.vo(e).next(function(){return!1}):!!n&&t.So(e).next(function(){return!0})})}).catch(function(e){if(Cg(e))return Ah("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ah("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Zr.po(function(){return t.uo(e)}),t.isPrimary=e})},t.prototype.Vo=function(t){var e=this;return Jy(t).get(Lg.key).next(function(t){return mg.resolve(e.Do(t))})},t.prototype.Co=function(t){return tv(t).delete(this.clientId)},t.prototype.xo=function(){return Object(Th.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Th.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=ty(t,$g.store);return e.rs().next(function(t){var n=r.$o(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return mg.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)this.Eo.removeItem(this.Fo(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,function(){return t.To().then(function(){return t.xo()}).then(function(){return t.Ao()})})},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?mg.resolve(!0):Jy(t).get(Lg.key).next(function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new Wh(Hh.FAILED_PRECONDITION,Xy);return!1}}return!(!e.networkEnabled||!e.inForeground)||tv(t).rs().next(function(t){return void 0===e.$o(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Ah("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.ko=function(){return Object(Th.b)(this,void 0,void 0,function(){var t=this;return Object(Th.d)(this,function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[Lg.store,$g.store],function(e){var n=new Jg(e,Jh.q);return t.vo(n).next(function(){return t.Co(n)})})];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}})})},t.prototype.$o=function(t,e){var n=this;return t.filter(function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)})},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return tv(e).rs().next(function(e){return t.$o(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return Iy.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Ah("IndexedDbPersistence","Starting transaction:",t),this.lo.runTransaction(t,"readonly"===e?"readonly":"readwrite",Zg,function(o){return r=new Jg(o,i.so?i.so.next():Jh.q),"readwrite-primary"===e?i.Vo(r).next(function(t){return!!t||i.bo(r)}).next(function(e){if(!e)throw Rh("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Zr.po(function(){return i.uo(!1)}),new Wh(Hh.FAILED_PRECONDITION,jg);return n(r)}).next(function(t){return i.So(r).next(function(){return t})}):i.jo(r).next(function(){return n(r)})}).then(function(t){return r.Vs(),t})},t.prototype.jo=function(t){var e=this;return Jy(t).get(Lg.key).next(function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Wh(Hh.FAILED_PRECONDITION,Xy)})},t.prototype.So=function(t){var e=new Lg(this.clientId,this.allowTabSynchronization,Date.now());return Jy(t).put(Lg.key,e)},t.Kn=function(){return bg.Kn()},t.prototype.vo=function(t){var e=this,n=Jy(t);return n.get(Lg.key).next(function(t){return e.Do(t)?(Ah("IndexedDbPersistence","Releasing primary lease."),n.delete(Lg.key)):mg.resolve()})},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Rh("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps(function(){return t.inForeground="visible"===t.document.visibilityState,t.To()})},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps(function(){return e.ko()})},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return Ah("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Rh("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){Rh("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Jy(t){return ty(t,Lg.store)}function tv(t){return ty(t,$g.store)}function ev(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var nv=function(t,e){this.progress=t,this.Go=e},rv=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next(function(r){return n.Jo(t,e,r)})},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t})},t.prototype.Yo=function(t,e,n){var r=vp();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)}),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next(function(e){return n.Zo(t,e)})},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next(function(r){var i=n.Yo(t,e,r),o=yp();return i.forEach(function(t,e){e||(e=new Vf(t,ef.min())),o=o.zt(t,e)}),o})},t.prototype.Kr=function(t,e,n){return function(t){return af.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):gd(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new af(e)).next(function(t){var e=_p();return t instanceof Uf&&(e=e.zt(t.key,t)),e})},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=_p();return this.Ei.Us(t,i).next(function(s){return mg.forEach(s,function(s){var a=function(t,e){return new ud(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next(function(t){t.forEach(function(t,e){o=o.zt(t,e)})})}).next(function(){return o})})},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next(function(n){return r=n,o.zo.Di(t,e)}).next(function(e){return o.sc(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=Kd(u,r.get(c),o.vs);r=l instanceof Uf?r.zt(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){Od(e,n)||(r=r.remove(t))}),r})},t.prototype.sc=function(t,e,n){for(var r=Cp(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Zd&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Uf&&(c=c.zt(t,e))}),c})},t}(),iv=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=Cp(),i=Cp(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ov=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(ef.min())?this.uc(t,e):this.ac.Xo(t,r).next(function(o){var s=i.hc(e,o);return(hd(e)||fd(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(jh()<=Ca.a.DEBUG&&Ah("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),wd(e)),i.ac.Kr(t,e,n).next(function(t){return s.forEach(function(e){t=t.zt(e.key,e)}),t}))})},t.prototype.hc=function(t,e){var n=new dp(Cd(t));return e.forEach(function(e,r){r instanceof Uf&&Od(t,r)&&(n=n.add(r))}),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return jh()<=Ca.a.DEBUG&&Ah("QueryEngine","Using full collection scan to execute query:",wd(e)),this.ac.Kr(t,e,ef.min())},t}(),sv=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new lp(Vh),this.dc=new Ey(function(t){return Hf(t)},Wf),this.wc=ef.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new rv(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.Vr(n,e.fc)})},t}();function av(t,e,n,r){return new sv(t,e,n,r)}function uv(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Th.d)(this,function(s){switch(s.label){case 0:return n=Lh(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.zo.pi(t).next(function(s){return o=s,r=n.persistence.Qo(e),i=new rv(n.Ec,r,n.persistence.Ko()),r.pi(t)}).next(function(e){for(var n=[],r=[],s=Cp(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.Xo(t,s).next(function(t){return{Ic:t,mc:n,Ac:r}})})})];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}})})}function cv(t,e){var n=Lh(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=mg.resolve();return o.forEach(function(t){s=s.next(function(){return r._i(e,t)}).next(function(e){var o=e,s=n.$s.get(t);Dh(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)})}),s.next(function(){return t.zo.Ci(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}function lv(t){var e=Lh(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e._o.Qi(t)})}function hv(t,e){var n=Lh(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach(function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next(function(){return n._o.er(t,e.qe,o)}));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return Dh(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}});var a=yp();if(e.Oe.forEach(function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))}),s.push(fv(t,o,e.Oe,r,void 0).next(function(t){a=t})),!r.isEqual(ef.min())){var u=n._o.Qi(t).next(function(e){return n._o.Wi(t,t.bs,r)});s.push(u)}return mg.Mn(s).next(function(){return o.apply(t)}).next(function(){return n.Tc.Zo(t,a)})}).then(function(t){return n.fc=i,t})}function fv(t,e,n,r,i){var o=Cp();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=yp();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Vf&&s.version.isEqual(ef.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):Ah("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function dv(t,e){var n=Lh(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)})}function pv(t,e){var n=Lh(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n._o.tr(t,e).next(function(i){return i?mg.resolve(r=i):n._o.Bi(t).next(function(i){return r=new Sd(e,i,0,t.bs),n._o.ji(t,r).next(function(){return r})})})}).then(function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t})}function gv(t,e,n){return Object(Th.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Th.d)(this,function(a){switch(a.label){case 0:r=Lh(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.Ti.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Cg(s=a.sent()))throw s;return Ah("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}})})}function yv(t,e,n){var r=Lh(t),i=ef.min(),o=Cp();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Lh(t),i=r.dc.get(n);return void 0!==i?mg.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,vd(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next(function(t){o=t})}).next(function(){return r._c.Kr(t,e,n?i:ef.min(),n?o:Cp())}).next(function(t){return{documents:t,Rc:o}})})}function vv(t,e){var n=Lh(t),r=Lh(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Sn(t,e).next(function(t){return t?t.target:null})})}function mv(t){var e=Lh(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Lh(t),i=yp(),o=sy(n),s=Ky(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:Bg.readTimeIndex,range:a},function(t,e){var n=iy(r.Qt,e);i=i.zt(n.key,n),o=e.readTime}).next(function(){return{Go:i,readTime:ay(o)}})}(e.Ec,t,e.wc)}).then(function(t){var n=t.Go;return e.wc=t.readTime,n})}function _v(t){return Object(Th.b)(this,void 0,void 0,function(){var e;return Object(Th.d)(this,function(n){return[2,(e=Lh(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Ky(t),n=ef.min();return e.hs({index:Bg.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=ay(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.wc=t})]})})}function bv(t,e,n,r){return Object(Th.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(Th.d)(this,function(p){switch(p.label){case 0:for(i=Lh(t),o=Cp(),s=yp(),a=wp(),u=0,c=n;u<c.length;u++)h=e.Pc((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.zt(h,e.yc(l)),a=a.zt(h,e.gc(l.metadata.readTime));return f=i.Ec.Nr({Wr:!0}),[4,pv(i,function(t){return vd(ld(rf.ot("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return fv(t,f,s,ef.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i._o.Yi(t,d.targetId).next(function(){return i._o.er(t,o,d.targetId)}).next(function(){return i.Tc.Zo(t,e)})})})]}})})}function wv(t,e,n){return void 0===n&&(n=Cp()),Object(Th.b)(this,void 0,void 0,function(){var r,i;return Object(Th.d)(this,function(o){switch(o.label){case 0:return[4,pv(t,vd(dy(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Lh(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Hp(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(Bh.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next(function(){return i._o.Yi(t,r.targetId)}).next(function(){return i._o.er(t,n,r.targetId)}).next(function(){return i.wo.Ls(t,e)})})]}})})}var Ov=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return mg.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:Hp(n.createTime)}),mg.resolve()},t.prototype.Ms=function(t,e){return mg.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:dy(t.bundledQuery),readTime:Hp(t.readTime)}}(e)),mg.resolve()},t}(),Cv=function(){function t(){this.vc=new dp(Ev.Sc),this.Dc=new dp(Ev.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new Ev(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach(function(t){return n.nr(t,e)})},t.prototype.ir=function(t,e){this.Nc(new Ev(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach(function(t){return n.ir(t,e)})},t.prototype.Fc=function(t){var e=this,n=new af(new rf([])),r=new Ev(n,t),i=new Ev(n,t+1),o=[];return this.Dc.me([r,i],function(t){e.Nc(t),o.push(t.key)}),o},t.prototype.Oc=function(){var t=this;this.vc.forEach(function(e){return t.Nc(e)})},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new af(new rf([])),n=new Ev(e,t),r=new Ev(e,t+1),i=Cp();return this.Dc.me([n,r],function(t){i=i.add(t.key)}),i},t.prototype.Fi=function(t){var e=new Ev(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),Ev=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return af.H(t.key,e.key)||Vh(t.Mc,e.Mc)},t.Cc=function(t,e){return Vh(t.Mc,e.Mc)||af.H(t.key,e.key)},t}(),Sv=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new dp(Ev.Sc)}return t.prototype.Ai=function(t){return mg.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++;var o=new ey(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new Ev(u.key,i)),this.Ei.qs(t,u.key.path.X())}return mg.resolve(o)},t.prototype.Pi=function(t,e){return mg.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=this.Uc(e+1),r=n<0?0:n;return mg.resolve(this.zo.length>r?this.zo[r]:null)},t.prototype.Vi=function(){return mg.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return mg.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new Ev(e,0),i=new Ev(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],function(t){var e=n.qc(t.Mc);o.push(e)}),mg.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new dp(Vh);return e.forEach(function(t){var e=new Ev(t,0),i=new Ev(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],function(t){r=r.add(t.Mc)})}),mg.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;af.wt(i)||(i=i.child(""));var o=new Ev(new af(i),0),s=new dp(Vh);return this.Bc.Ae(function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)},o),mg.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.qc(t);null!==r&&n.push(r)}),n},t.prototype.Ci=function(t,e){var n=this;Dh(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return mg.forEach(e.mutations,function(i){var o=new Ev(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)}).next(function(){n.Bc=r})},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new Ev(e,0),r=this.Bc.Re(n);return mg.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return mg.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),Tv=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new lp(af.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return mg.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=vp();return e.forEach(function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)}),mg.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=_p(),i=new af(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.value,u=a.hi,c=a.readTime;if(!e.path.nt(s.key.path))break;c._(n)<=0||u instanceof Uf&&Od(e,u)&&(r=r.zt(u.key,u))}return mg.resolve(r)},t.prototype.jc=function(t,e){return mg.forEach(this.docs,function(t){return e(t)})},t.prototype.Nr=function(t){return new xv(this)},t.prototype.Or=function(t){return mg.resolve(this.size)},t}(),xv=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return Object(Th.c)(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach(function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)}),mg.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(Sy),Iv=function(){function t(t){this.persistence=t,this.Gc=new Ey(function(t){return Hf(t)},Wf),this.lastRemoteSnapshotVersion=ef.min(),this.highestTargetId=0,this.zc=0,this.Hc=new Cv,this.targetCount=0,this.Jc=ky.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach(function(t,n){return e(n)}),mg.resolve()},t.prototype.Qi=function(t){return mg.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return mg.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),mg.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),mg.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new ky(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,mg.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),mg.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,mg.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)}),mg.Mn(o).next(function(){return i})},t.prototype.Zi=function(t){return mg.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return mg.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),mg.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach(function(e){i.push(r.Ni(t,e))}),mg.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),mg.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return mg.resolve(n)},t.prototype.Fi=function(t,e){return mg.resolve(this.Hc.Fi(e))},t}(),Pv=function(){function t(t,e){var n=this;this.Yc={},this.so=new Jh(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new Iv(this),this.Ei=new vy,this.fo=function(t,e){return new Tv(t,function(t){return n.Ti.Xc(t)})}(this.Ei),this.Qt=new ry(e),this.wo=new Ov(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new Sv(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;Ah("MemoryPersistence","Starting transaction:",t);var i=new jv(this.so.next());return this.Ti.Zc(),n(i).next(function(t){return r.Ti.ta(i).next(function(){return t})}).On().then(function(t){return i.Vs(),t})},t.prototype.ea=function(t,e){return mg.Ln(Object.values(this.Yc).map(function(n){return function(){return n.Fi(t,e)}}))},t}(),jv=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return Object(Th.c)(e,t),e}(Ag),Av=function(){function t(t){this.persistence=t,this.na=new Cv,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw Mh()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),mg.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),mg.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),mg.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach(function(t){return n.ra.add(t.toString())});var r=this.persistence.Sr();return r.rr(t,e.targetId).next(function(t){t.forEach(function(t){return n.ra.add(t.toString())})}).next(function(){return r.Ji(t,e)})},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return mg.forEach(this.ra,function(r){var i=af._t(r);return e.oa(t,i).next(function(t){t||n.li(i)})}).next(function(){return e.sa=null,n.apply(t)})},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next(function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())})},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return mg.Ln([function(){return mg.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();function Rv(t,e){return"firestore_clients_"+t+"_"+e}function kv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function Nv(t,e){return"firestore_targets_"+t+"_"+e}var Mv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Wh(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Rh("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Dv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Wh(i.error.code,i.error.message)),o?new t(e,i.state,r):(Rh("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Lv=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Sp(),s=0;i&&s<r.activeTargetIds.length;++s)i=wf(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Rh("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Fv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Rh("SharedClientState","Failed to parse online state: "+e),null)},t}(),Uv=function(){function t(){this.activeTargetIds=Sp()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Vv=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new lp(Vh),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=Rv(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new Uv),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Th.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Th.d)(this,function(h){switch(h.label){case 0:return[4,this._a.Uo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(Rv(this.persistenceKey,r)))&&(o=Lv.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)this.wa(c[u]);return this.Ta=[],this.window.addEventListener("unload",function(){return l.ko()}),this.Er=!0,[2]}})})},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(Nv(this.persistenceKey,t));if(n){var r=Dv.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(Nv(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach(function(t){r.$a(t)}),this.currentUser=t,n.forEach(function(t){r.Ca(t)})},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ah("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ah("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ah("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ah("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void Rh("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po(function(){return Object(Th.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Th.d)(this,function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=Jh.q;if(null!=t)try{var n=JSON.parse(t);Dh("number"==typeof n),e=n}catch(t){Rh("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Jh.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new Mv(this.currentUser,t,e,n),i=kv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=kv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){this.storage.setItem(this.ya,JSON.stringify({clientId:this.la,onlineState:t}))},t.prototype.qa=function(t,e,n){var r=Nv(this.persistenceKey,t),i=new Dv(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return Lv.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]);return Mv.ca(new Kh(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return Dv.ca(r,e)},t.prototype.pa=function(t){return Fv.ca(t)},t.prototype.Ya=function(t){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(Ah("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this._a.su(s,a).then(function(){n.Ea=r})},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=Sp();return t.forEach(function(t,n){e=e.Pe(n.activeTargetIds)}),e},t}(),qv=function(){function t(){this.iu=new Uv,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new Uv,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),zv=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),Bv=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){Ah("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){Ah("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Hv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Wv=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),Gv=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(Th.c)(e,t),e.prototype.Su=function(t,e,n,r){return new Promise(function(i,o){var s=new Sh;s.listenOnce(Oh.COMPLETE,function(){try{switch(s.getLastErrorCode()){case wh.NO_ERROR:var e=s.getResponseJson();Ah("Connection","XHR received:",JSON.stringify(e)),i(e);break;case wh.TIMEOUT:Ah("Connection",'RPC "'+t+'" timed out'),o(new Wh(Hh.DEADLINE_EXCEEDED,"Request time out"));break;case wh.HTTP_ERROR:var n=s.getStatus();if(Ah("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Hh).indexOf(e)>=0?e:Hh.UNKNOWN}(r.status);o(new Wh(a,r.message))}else o(new Wh(Hh.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Wh(Hh.UNAVAILABLE,"Connection failed."));break;default:Mh()}}finally{Ah("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new yh,i=_c(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(o.initMessageHeaders,e),Object(Ea.t)()||Object(Ea.w)()||Object(Ea.q)()||Object(Ea.s)()||Object(Ea.x)()||Object(Ea.p)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Ah("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Wv({fu:function(t){c?Ah("Connection","Not sending because WebChannel is closed:",t):(u||(Ah("Connection","Opening WebChannel transport."),a.open(),u=!0),Ah("Connection","WebChannel sending:",t),a.send(t))},du:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Eh.EventType.OPEN,function(){c||Ah("Connection","WebChannel transport opened.")}),h(a,Eh.EventType.CLOSE,function(){c||(c=!0,Ah("Connection","WebChannel transport closed"),l.Ru())}),h(a,Eh.EventType.ERROR,function(t){c||(c=!0,kh("Connection","WebChannel transport errored:",t),l.Ru(new Wh(Hh.UNAVAILABLE,"The operation could not be completed")))}),h(a,Eh.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Dh(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Ah("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=rp[t];if(void 0!==e)return cp(e)}(i),s=r.message;void 0===o&&(o=Hh.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Ru(new Wh(o,s)),a.close()}else Ah("Connection","WebChannel received:",n),l.Pu(n)}}),h(i,Ch.STAT_EVENT,function(t){10===t.stat?Ah("Connection","Detected buffering proxy"):11===t.stat&&Ah("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Au()},0),l},e}(function(){function t(t){this.yu=t,this.t=t.t,this.gu=(t.ssl?"https":"http")+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);Ah("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then(function(t){return Ah("RestConnection","Received: ",t),t},function(e){throw kh("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.9",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){return this.gu+"/v1/"+e+":"+Hv[t]},t}());function Kv(){return"undefined"!=typeof window?window:null}function Qv(){return"undefined"!=typeof document?document:null}function $v(t){return new Vp(t,!0)}var Yv=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&Ah("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,function(){return e.ku=Date.now(),t()}),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),Xv=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new Yv(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,function(){return t.Zu()}))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(t){return this.Hu()?[2,this.close(0)]:[2]})})},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===Hh.RESOURCE_EXHAUSTED?(Rh(e.toString()),Rh("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===Hh.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}})})},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then(function(e){t.Wu===n&&t.ih(e)},function(n){e(function(){var e=new Wh(Hh.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)})})},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu(function(){n(function(){return e.state=2,e.listener.wu()})}),this.stream.Tu(function(t){n(function(){return e.rh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu(function(){return Object(Th.b)(t,void 0,void 0,function(){return Object(Th.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.rh=function(t){return Ah("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps(function(){return e.Wu===t?n():(Ah("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Zv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return Object(Th.c)(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Mh()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(Dh(void 0===e||"string"==typeof e),Bh.fromBase64String(e||"")):(Dh(void 0===e||e instanceof Uint8Array),Bh.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Hh.UNKNOWN:cp(t.code);return new Wh(e,t.message||"")}(a);n=new kp(r,i,o,s||null)}else if("documentChange"in e){i=Qp(t,(r=e.documentChange).document.name),o=Hp(r.document.updateTime);var a=new Mf({mapValue:{fields:r.document.fields}}),u=(s=new Uf(i,o,a,{}),r.targetIds||[]);n=new Ap(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Qp(t,(r=e.documentDelete).document),o=r.readTime?Hp(r.readTime):ef.min(),a=new Vf(i,o),n=new Ap([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Qp(t,(r=e.documentRemove).document),n=new Ap([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Mh();var c=e.filter;i=new ap(r=c.count||0),n=new Rp(o=c.targetId,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return ef.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ef.min():e.readTime?Hp(e.readTime):ef.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=Xp(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=Gf(r)?{documents:rg(t,r)}:{query:ig(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=zp(t,e.resumeToken):e.Ot._(ef.min())>0&&(n.readTime=qp(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Mh()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=Xp(this.Qt),e.removeTarget=t,this.th(e)},e}(Xv),Jv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return Object(Th.c)(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(Dh(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(Dh(void 0!==e),t.map(function(t){return function(t,e){var n=Hp(t.updateTime?t.updateTime:e);n.isEqual(ef.min())&&(n=Hp(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new zd(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=Hp(t.commitTime);return this.listener.dh(n,e)}return Dh(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=Xp(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return eg(e.Qt,t)})};this.th(n)},e}(Xv),tm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return Object(Th.c)(e,t),e.prototype.Ih=function(){if(this.Th)throw new Wh(Hh.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.pu(t,e,n,i)}).catch(function(t){throw t.code===Hh.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.Du(t,e,n,i)}).catch(function(t){throw t.code===Hh.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.terminate=function(){this.Th=!1},e}(function(){}),em=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()}))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(Rh(e),this.Rh=!1):Ah("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),nm=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou(function(t){n.Ps(function(){return Object(Th.b)(o,void 0,void 0,function(){return Object(Th.d)(this,function(t){switch(t.label){case 0:return hm(this)?(Ah("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Th.b)(this,void 0,void 0,function(){var e;return Object(Th.d)(this,function(n){switch(n.label){case 0:return(e=Lh(t)).Nh.add(4),[4,im(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,rm(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Oh=new em(n,r)};function rm(t){return Object(Th.b)(this,void 0,void 0,function(){var e,n;return Object(Th.d)(this,function(r){switch(r.label){case 0:if(!hm(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function im(t){return Object(Th.b)(this,void 0,void 0,function(){var e,n;return Object(Th.d)(this,function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function om(t,e){var n=Lh(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),lm(n)?cm(n):Tm(n).Hu()&&am(n,e))}function sm(t,e){var n=Lh(t),r=Tm(n);n.xh.delete(e),r.Hu()&&um(n,e),0===n.xh.size&&(r.Hu()?r.Xu():hm(n)&&n.Oh.set("Unknown"))}function am(t,e){t.kh.on(e.targetId),Tm(t).uh(e)}function um(t,e){t.kh.on(e),Tm(t).hh(e)}function cm(t){t.kh=new Mp({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),Tm(t).start(),t.Oh.Ph()}function lm(t){return hm(t)&&!Tm(t).zu()&&t.xh.size>0}function hm(t){return 0===Lh(t).Nh.size}function fm(t){t.kh=void 0}function dm(t){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(e){return t.xh.forEach(function(e,n){am(t,e)}),[2]})})}function pm(t,e){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(n){return fm(t),lm(t)?(t.Oh.Vh(e),cm(t)):t.Oh.set("Unknown"),[2]})})}function gm(t,e,n){return Object(Th.b)(this,void 0,void 0,function(){var r,i,o;return Object(Th.d)(this,function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof kp&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Th.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.xh.has(o=i[r])?[4,t.Dh.Mh(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Ah("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ym(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ap?t.kh.dn(e):e instanceof Rp?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(ef.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,lv(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach(function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}}),n.Fe.forEach(function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(Bh.T,n.Ot)),um(t,e);var r=new Sd(n.target,e,1,n.sequenceNumber);am(t,r)}}),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Ah("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,ym(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function ym(t,e,n){return Object(Th.b)(this,void 0,void 0,function(){var r=this;return Object(Th.d)(this,function(i){switch(i.label){case 0:if(!Cg(e))throw e;return t.Nh.add(1),[4,im(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return lv(t.bh)}),t._s.po(function(){return Object(Th.b)(r,void 0,void 0,function(){return Object(Th.d)(this,function(e){switch(e.label){case 0:return Ah("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,rm(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function vm(t,e){return e().catch(function(n){return ym(t,n,e)})}function mm(t){return Object(Th.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Th.d)(this,function(s){switch(s.label){case 0:e=Lh(t),n=xm(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return hm(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,dv(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=xm(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,ym(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return _m(e)&&bm(e),[2]}})})}function _m(t){return hm(t)&&!xm(t).zu()&&t.Ch.length>0}function bm(t){xm(t).start()}function wm(t){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(e){return xm(t).Eh(),[2]})})}function Om(t){return Object(Th.b)(this,void 0,void 0,function(){var e,n,r;return Object(Th.d)(this,function(i){for(e=xm(t),n=0,r=t.Ch;n<r.length;n++)e.fh(r[n].mutations);return[2]})})}function Cm(t,e,n){return Object(Th.b)(this,void 0,void 0,function(){var r,i;return Object(Th.d)(this,function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=ny.from(r,e,n),[4,vm(t,function(){return t.Dh.Bh(i)})];case 1:return o.sent(),[4,mm(t)];case 2:return o.sent(),[2]}})})}function Em(t,e){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(n){switch(n.label){case 0:return e&&xm(t)._h?[4,function(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r;return Object(Th.d)(this,function(i){switch(i.label){case 0:return up(r=e.code)&&r!==Hh.ABORTED?(n=t.Ch.shift(),xm(t).Yu(),[4,vm(t,function(){return t.Dh.qh(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,mm(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return _m(t)&&bm(t),[2]}})})}function Sm(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n;return Object(Th.d)(this,function(r){switch(r.label){case 0:return n=Lh(t),e?(n.Nh.delete(2),[4,rm(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,im(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Tm(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=Lh(t);return r.Ih(),new Zv(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:dm.bind(null,t),Tu:pm.bind(null,t),ah:gm.bind(null,t)}),t.$h.push(function(n){return Object(Th.b)(e,void 0,void 0,function(){return Object(Th.d)(this,function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),lm(t)?cm(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),fm(t),e.label=3;case 3:return[2]}})})})),t.Uh}function xm(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=Lh(t);return r.Ih(),new Jv(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:wm.bind(null,t),Tu:Em.bind(null,t),wh:Om.bind(null,t),dh:Cm.bind(null,t)}),t.$h.push(function(n){return Object(Th.b)(e,void 0,void 0,function(){return Object(Th.d)(this,function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,mm(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(Ah("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}})})})),t.Qh}var Im=function(){this.Kh=void 0,this.listeners=[]},Pm=function(){this.queries=new Ey(function(t){return bd(t)},_d),this.onlineState="Unknown",this.Wh=new Set};function jm(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Th.d)(this,function(c){switch(c.label){case 0:if(n=Lh(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Im),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=Pg(a,"Initialization of query '"+wd(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&Nm(n),[2]}})})}function Am(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Th.d)(this,function(a){return n=Lh(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]})})}function Rm(t,e){for(var n=Lh(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].zh(s)&&(r=!0);a.Kh=s}}r&&Nm(n)}function km(t,e,n){var r=Lh(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Nm(t){t.Wh.forEach(function(t){t.next()})}var Mm=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ip(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){return!t.fromCache||!(this.options.nl&&"Offline"!==e||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){return t.docChanges.length>0||!!(t.Ce||this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=Ip.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),Dm=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),Lm=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return Qp(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?tg(this.Qt,t.document,!1):new Vf(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return Hp(t)},t}();!function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new Lm(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Cp()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Th.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Th.d)(this,function(o){switch(o.label){case 0:return[4,bv(this.bh,new Lm(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,wv(this.bh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new nv(Object.assign({},this.progress),t))]}})})}}();var Fm=function(t){this.key=t},Um=function(t){this.key=t},Vm=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=Cp(),this.De=Cp(),this.hl=Cd(t),this.ll=new Tp(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new xp,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=hd(this.query)&&i.size===this.query.limit?i.last():null,c=fd(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt(function(t,e){var l=i.get(t),h=e instanceof Uf?e:null;h&&(h=Od(n.query,h)?h:null);var f=!!l&&n.De.has(l.key),d=!!h&&(h.Vt||n.De.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.wl(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.hl(h,u)>0||c&&n.hl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),hd(this.query)||fd(this.query))for(;s.size>this.query.limit;){var l=hd(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mh()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)}),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new Ip(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new xp,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach(function(t){return e.cl=e.cl.add(t)}),t.Ue.forEach(function(t){}),t.Qe.forEach(function(t){return e.cl=e.cl.delete(t)}),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=Cp(),this.ll.forEach(function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))});var n=[];return e.forEach(function(e){t.ul.has(e)||n.push(new Um(e))}),this.ul.forEach(function(t){e.has(t)||n.push(new Fm(t))}),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=Cp();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return Ip.Ne(this.query,this.ll,this.De,0===this.al)},t}(),qm=function(t,e,n){this.query=t,this.targetId=e,this.view=n},zm=function(t){this.key=t,this.Pl=!1},Bm=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new Ey(function(t){return bd(t)},_d),this.Sl=new Map,this.Dl=new Set,this.Cl=new lp(af.H),this.xl=new Map,this.Nl=new Cv,this.$l={},this.Fl=new Map,this.Ol=ky.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function Hm(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Th.d)(this,function(a){switch(a.label){case 0:return n=__(t),(i=n.vl.get(e))?(n.Vl.Fa(i.targetId),r=i.view.Rl(),[3,4]):[3,1];case 1:return[4,pv(n.bh,vd(e))];case 2:return o=a.sent(),s=n.Vl.Fa(o.targetId),[4,Wm(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Ml&&om(n.yl,o),a.label=4;case 4:return[2,r]}})})}function Wm(t,e,n,r){return Object(Th.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Th.d)(this,function(l){switch(l.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return Object(Th.b)(this,void 0,void 0,function(){var i,o,s;return Object(Th.d)(this,function(a){switch(a.label){case 0:return(i=e.view.fl(n)).lc?[4,yv(t.bh,e.query,!1).then(function(t){return e.view.fl(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(i_(t,e.targetId,s.Il),s.snapshot)]}})})}(t,e,n,r)},[4,yv(t.bh,e,!0)];case 1:return i=l.sent(),o=new Vm(e,i.Rc),s=o.fl(i.documents),a=jp.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),i_(t,n,u.Il),c=new qm(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}})})}function Gm(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i;return Object(Th.d)(this,function(o){switch(o.label){case 0:return n=Lh(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter(function(t){return!_d(t,e)})),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,gv(n.bh,r.targetId,!1).then(function(){n.Vl.La(r.targetId),sm(n.yl,r.targetId),n_(n,r.targetId)}).catch(Cy)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return n_(n,r.targetId),[4,gv(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Km(t,e,n){return Object(Th.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Th.d)(this,function(a){switch(a.label){case 0:r=b_(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Lh(t),i=tf.now(),o=e.reduce(function(t,e){return t.add(e.key)},Cp());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Tc.Xo(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Qd(c,n.get(c.key));null!=l&&s.push(new Zd(c.key,l,Lf(l.proto.mapValue),Bd.exists(!0)))}return r.zo.Ri(t,i,s,e)})}).then(function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}})}(r.bh,e)];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new lp(Vh)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,a_(r,i.ri)];case 3:return a.sent(),[4,mm(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Pg(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Qm(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r;return Object(Th.d)(this,function(i){switch(i.label){case 0:n=Lh(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,hv(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach(function(t,e){var r=n.xl.get(e);r&&(Dh(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?Dh(r.Pl):t.Qe.size>0&&(Dh(r.Pl),r.Pl=!1))}),[4,a_(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Cy(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function $m(t,e,n){var r=Lh(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach(function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Lh(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)}),r&&Nm(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function Ym(t,e,n){return Object(Th.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Th.d)(this,function(c){switch(c.label){case 0:return(r=Lh(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new lp(af.H)).zt(o,new Vf(o,ef.min())),a=Cp().add(o),u=new Pp(ef.min(),new Map,new dp(Vh),s,a),[4,Qm(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),s_(r),[3,4];case 2:return[4,gv(r.bh,e,!1).then(function(){return n_(r,e,n)}).catch(Cy)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Xm(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i;return Object(Th.d)(this,function(o){switch(o.label){case 0:n=Lh(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,cv(n.bh,e)];case 2:return i=o.sent(),e_(n,r,null),t_(n,r),n.Vl.Na(r,"acknowledged"),[4,a_(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Cy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Zm(t,e,n){return Object(Th.b)(this,void 0,void 0,function(){var r,i;return Object(Th.d)(this,function(o){switch(o.label){case 0:r=Lh(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Lh(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.zo.Pi(t,e).next(function(e){return Dh(null!==e),r=e.keys(),n.zo.Ci(t,e)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}(r.bh,e)];case 2:return i=o.sent(),e_(r,e,n),t_(r,e),r.Vl.Na(e,"rejected",n),[4,a_(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Cy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Jm(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Th.d)(this,function(a){switch(a.label){case 0:hm((n=Lh(t)).yl)||Ah("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Lh(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.zo.Vi(t)})}(n.bh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=Pg(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function t_(t,e){(t.Fl.get(e)||[]).forEach(function(t){t.resolve()}),t.Fl.delete(e)}function e_(t,e,n){var r=Lh(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function n_(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach(function(e){t.Nl.Fi(e)||r_(t,e)})}function r_(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(sm(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),s_(t))}function i_(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Fm?(t.Nl.nr(o.key,e),o_(t,o)):o instanceof Um?(Ah("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||r_(t,o.key)):Mh()}}function o_(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(Ah("SyncEngine","New document in limbo: "+n),t.Dl.add(r),s_(t))}function s_(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new af(rf.ot(e)),r=t.Ol.next();t.xl.set(r,new zm(n)),t.Cl=t.Cl.zt(n,r),om(t.yl,new Sd(vd(ld(n.path)),r,2,Jh.q))}}function a_(t,e,n){return Object(Th.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Th.d)(this,function(a){switch(a.label){case 0:return r=Lh(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach(function(t,a){s.push(r.Ll(a,e,n).then(function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=iv.oc(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Th.d)(this,function(l){switch(l.label){case 0:n=Lh(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return mg.forEach(e,function(e){return mg.forEach(e.ic,function(r){return n.persistence.Ti.nr(t,e.targetId,r)}).next(function(){return mg.forEach(e.rc,function(r){return n.persistence.Ti.ir(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Cg(r=l.sent()))throw r;return Ah("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.fc.get(a),c=u.Lt(u.Ot),n.fc=n.fc.zt(a,c));return[2]}})})}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function u_(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r;return Object(Th.d)(this,function(i){switch(i.label){case 0:return(n=Lh(t)).currentUser.isEqual(e)?[3,3]:(Ah("SyncEngine","User change. New user:",e.A()),[4,uv(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach(function(t){t.forEach(function(t){t.reject(new Wh(Hh.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,a_(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function c_(t,e){var n=Lh(t),r=n.xl.get(e);if(r&&r.Pl)return Cp().add(r.key);var i=Cp(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.vl.get(a[s]);i=i.Pe(u.view._l)}return i}function l_(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i;return Object(Th.d)(this,function(o){switch(o.label){case 0:return[4,yv((n=Lh(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&i_(n,e.targetId,i.Il),i)]}})})}function h_(t){return Object(Th.b)(this,void 0,void 0,function(){var e;return Object(Th.d)(this,function(n){return[2,mv((e=Lh(t)).bh).then(function(t){return a_(e,t)})]})})}function f_(t,e,n,r){return Object(Th.b)(this,void 0,void 0,function(){var i,o;return Object(Th.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Lh(t),r=Lh(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.yi(t,e).next(function(e){return e?n.Tc.Xo(t,e):mg.resolve(null)})})}((i=Lh(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,mm(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(e_(i,e,r||null),t_(i,e),function(t,e){Lh(Lh(t).zo).xi(e)}(i.bh,e)):Mh(),s.label=4;case 4:return[4,a_(i,o)];case 5:return s.sent(),[3,7];case 6:Ah("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function d_(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Th.d)(this,function(c){switch(c.label){case 0:return __(n=Lh(t)),b_(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,p_(n,r.it())]);case 1:return i=c.sent(),n.kl=!0,[4,Sm(n.yl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)om(n.yl,s[o]);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(a=[],u=Promise.resolve(),n.Sl.forEach(function(t,e){n.Vl.Ma(e)?a.push(e):u=u.then(function(){return n_(n,e),gv(n.bh,e,!0)}),sm(n.yl,e)}),[4,u]);case 4:return c.sent(),[4,p_(n,a)];case 5:return c.sent(),function(t){var e=Lh(t);e.xl.forEach(function(t,n){sm(e.yl,n)}),e.Nl.Oc(),e.xl=new Map,e.Cl=new lp(af.H)}(n),n.kl=!1,[4,Sm(n.yl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function p_(t,e,n){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Th.d)(this,function(g){switch(g.label){case 0:n=Lh(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Sl.get(a=s[o]))&&0!==c.length?[4,pv(n.bh,vd(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.vl.get(h[l]),[4,l_(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,vv(n.bh,a)];case 8:return p=g.sent(),[4,pv(n.bh,p)];case 9:return u=g.sent(),[4,Wm(n,g_(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}})})}function g_(t){return cd(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function y_(t){var e=Lh(t);return Lh(Lh(e.bh).persistence).Uo()}function v_(t,e,n,r){return Object(Th.b)(this,void 0,void 0,function(){var i,o,s;return Object(Th.d)(this,function(a){switch(a.label){case 0:return(i=Lh(t)).kl?(Ah("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,mv(i.bh)];case 3:return o=a.sent(),s=Pp.Me(e,"current"===n),[4,a_(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,gv(i.bh,e,!0)];case 6:return a.sent(),n_(i,e,r),[3,8];case 7:Mh(),a.label=8;case 8:return[2]}})})}function m_(t,e,n){return Object(Th.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Th.d)(this,function(f){switch(f.label){case 0:if(!(r=__(t)).kl)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Sl.has(s=o[i])?(Ah("SyncEngine","Adding an already active target "+s),[3,5]):[4,vv(r.bh,s)]:[3,6];case 2:return a=f.sent(),[4,pv(r.bh,a)];case 3:return u=f.sent(),[4,Wm(r,g_(a),u.targetId,!1)];case 4:f.sent(),om(r.yl,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Th.d)(this,function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,gv(r.bh,t,!1).then(function(){sm(r.yl,t),n_(r,t)}).catch(Cy)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function __(t){var e=Lh(t);return e.yl.Dh.Lh=Qm.bind(null,e),e.yl.Dh.vn=c_.bind(null,e),e.yl.Dh.Mh=Ym.bind(null,e),e.bl.ah=Rm.bind(null,e.gl),e.bl.Bl=km.bind(null,e.gl),e}function b_(t){var e=Lh(t);return e.yl.Dh.Bh=Xm.bind(null,e),e.yl.Dh.qh=Zm.bind(null,e),e}var w_=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(e){switch(e.label){case 0:return this.Qt=$v(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}})})},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return av(this.persistence,new ov,t.Jl,this.Qt)},t.prototype.jl=function(t){return new Pv(Av.ia,this.Qt)},t.prototype.Wl=function(t){return new qv},t.prototype.terminate=function(){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}})})},t}(),O_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Th.c)(e,t),e.prototype.initialize=function(e){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,_v(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,b_(this.Yl._a)];case 4:return n.sent(),[4,mm(this.Yl.yl)];case 5:return n.sent(),[2]}})})},e.prototype.Hl=function(t){return av(this.persistence,new ov,t.Jl,this.Qt)},e.prototype.zl=function(t){return new Vy(this.persistence.Ti.lr,t._s)},e.prototype.jl=function(t){var e=ev(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?Oy.Ys(this.cacheSizeBytes):Oy.ti;return new Zy(this.synchronizeTabs,e,t.clientId,n,t._s,Kv(),Qv(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new qv},e}(w_),C_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Th.c)(e,t),e.prototype.initialize=function(e){return Object(Th.b)(this,void 0,void 0,function(){var n,r=this;return Object(Th.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof Vv?(this.Vl._a={eu:f_.bind(null,n),nu:v_.bind(null,n),su:m_.bind(null,n),Uo:y_.bind(null,n),tu:h_.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro(function(t){return Object(Th.b)(r,void 0,void 0,function(){return Object(Th.d)(this,function(e){switch(e.label){case 0:return[4,d_(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Wl=function(t){var e=Kv();if(!Vv.Kn(e))throw new Wh(Hh.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ev(t.yu.t,t.yu.persistenceKey);return new Vv(e,t._s,n,t.clientId,t.Jl)},e}(O_),E_=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n=this;return Object(Th.d)(this,function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return $m(n._a,t,1)},this.yl.Dh.n_=u_.bind(null,this._a),[4,Sm(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.t_=function(t){return new Pm},t.prototype.Xl=function(t){var e=$v(t.yu.t),n=new Gv(t.yu);return function(t,e,n){return new tm(t,e,n)}(t.credentials,n,e)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return $m(s._a,t,0)},o=Bv.Kn()?new Bv:new zv,new nm(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new Bm(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return Object(Th.b)(this,void 0,void 0,function(){var e;return Object(Th.d)(this,function(n){switch(n.label){case 0:return e=Lh(t),Ah("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,im(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}})})}(this.yl)},t}(),S_=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),T_=(function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new vg,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then(function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Ql=function(){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}})})},t.prototype.c_=function(){return Object(Th.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Th.d)(this,function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new Dm(JSON.parse(r),t.length+n)]}})})},t.prototype.l_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.a_=function(){return Object(Th.b)(this,void 0,void 0,function(){var t,e;return Object(Th.d)(this,function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.h_=function(t){return Object(Th.b)(this,void 0,void 0,function(){var e;return Object(Th.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return Object(Th.b)(this,void 0,void 0,function(){var t,e;return Object(Th.d)(this,function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Wh(Hh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new sf(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}()),x_=function(t){this._methodName=t},I_=function(t){this.d_=t};function P_(t,e,n){if(!n)throw new Wh(Hh.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function j_(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Wh(Hh.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function A_(t,e,n,r){if(!0===e&&!0===r)throw new Wh(Hh.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function R_(t){if(!af.wt(t))throw new Wh(Hh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function k_(t){if(af.wt(t))throw new Wh(Hh.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function N_(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Mh()}function M_(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new Wh(Hh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=N_(t);throw new Wh(Hh.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function D_(t,e){if(e<=0)throw new Wh(Hh.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var L_=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Wh(Hh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Wh(Hh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,A_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),F_=new Map,U_=function(){function t(t,e){this.w_="(lite)",this.E_=new L_({}),this.T_=!1,t instanceof Ih?(this.I_=t,this.m_=new $h):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Wh(Hh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ih(t.options.projectId)}(t),this.m_=new Yh(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new Wh(Hh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new Wh(Hh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new L_(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new $h;switch(t.type){case"gapi":var e=t.client;return Dh(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Zh(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Wh(Hh.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return(t=F_.get(this))&&(Ah("ComponentProvider","Removing Datastore"),F_.delete(this),t.terminate()),Promise.resolve();var t},t}(),V_=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new z_(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),q_=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),z_=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ld(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(Th.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new V_(this.firestore,null,new af(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(q_);function B_(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof I_&&(t=t.d_),P_("collection","path",e),t instanceof U_)return k_(n=rf.ot.apply(rf,Object(Th.g)([e],r))),new z_(t,null,n);if(!(t instanceof V_||t instanceof z_))throw new Wh(Hh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return k_(n=rf.ot.apply(rf,Object(Th.g)([t.path],r)).child(rf.ot(e))),new z_(t.firestore,null,n)}function H_(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof I_&&(t=t.d_),1===arguments.length&&(e=Uh.u()),P_("doc","path",e),t instanceof U_)return R_(n=rf.ot.apply(rf,Object(Th.g)([e],r))),new V_(t,null,new af(n));if(!(t instanceof V_||t instanceof z_))throw new Wh(Hh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return R_(n=t.D_.child(rf.ot.apply(rf,Object(Th.g)([e],r)))),new V_(t.firestore,t instanceof z_?t.v_:null,new af(n))}function W_(t,e){return t instanceof I_&&(t=t.d_),e instanceof I_&&(e=e.d_),(t instanceof V_||t instanceof z_)&&(e instanceof V_||e instanceof z_)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function G_(t,e){return t instanceof I_&&(t=t.d_),e instanceof I_&&(e=e.d_),t instanceof q_&&e instanceof q_&&t.firestore===e.firestore&&_d(t.C_,e.C_)&&t.v_===e.v_}var K_=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Wh(Hh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Wh(Hh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return Vh(this.x_,t.x_)||Vh(this.N_,t.N_)},t}(),Q_=/^__.*__$/,$_=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new Zd(t,this.data,this.Gt,e,this.fieldTransforms):new Xd(t,this.data,e,this.fieldTransforms)},t}(),Y_=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Zd(t,this.data,this.Gt,e,this.fieldTransforms)},t}();function X_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mh()}}var Z_=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return mb(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find(function(e){return t.nt(e)})||void 0!==this.fieldTransforms.find(function(e){return t.nt(e.field)})},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(X_(this.k_)&&Q_.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),J_=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||$v(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Z_({k_:t,methodName:e,j_:n,path:sf.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function tb(t){var e=t.p_(),n=$v(t.I_);return new J_(t.I_,!!e.ignoreUndefinedProperties,n)}function eb(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);pb("Data must be an object, but it was:",s,r);var a,u,c=fb(r,s);if(o.merge)a=new hf(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=gb(e,f[h],n);if(!s.contains(d))throw new Wh(Hh.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");_b(l,d)||l.push(d)}a=new hf(l),u=s.fieldTransforms.filter(function(t){return a.Tt(t.field)})}else a=null,u=s.fieldTransforms;return new $_(new Mf(c),a,u)}var nb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Th.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(x_);function rb(t,e,n){return new Z_({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var ib=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Th.c)(e,t),e.prototype.z_=function(t){return new qd(t.path,new kd)},e.prototype.isEqual=function(t){return t instanceof e},e}(x_),ob=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Th.c)(e,t),e.prototype.z_=function(t){var e=rb(this,t,!0),n=this.H_.map(function(t){return hb(t,e)}),r=new Nd(n);return new qd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(x_),sb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Th.c)(e,t),e.prototype.z_=function(t){var e=rb(this,t,!0),n=this.H_.map(function(t){return hb(t,e)}),r=new Dd(n);return new qd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(x_),ab=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(Th.c)(e,t),e.prototype.z_=function(t){var e=new Fd(t.Qt,Id(t.Qt,this.J_));return new qd(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(x_);function ub(t,e,n,r){var i=t.G_(1,e,n);pb("Data must be an object, but it was:",i,r);var o=[],s=new Df;cf(r,function(t,r){var a=vb(e,t,n);r instanceof I_&&(r=r.d_);var u=i.U_(a);if(r instanceof nb)o.push(a);else{var c=hb(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new hf(o);return new Y_(s.Pt(),a,i.fieldTransforms)}function cb(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[gb(e,r,n)],u=[i];if(o.length%2!=0)throw new Wh(Hh.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(gb(e,o[c])),u.push(o[c+1]);for(var l=[],h=new Df,f=a.length-1;f>=0;--f)if(!_b(l,a[f])){var d=a[f],p=u[f];p instanceof I_&&(p=p.d_);var g=s.U_(d);if(p instanceof nb)l.push(d);else{var y=hb(p,g);null!=y&&(l.push(d),h.set(d,y))}}var v=new hf(l);return new Y_(h.Pt(),v,s.fieldTransforms)}function lb(t,e,n,r){return void 0===r&&(r=!1),hb(n,t.G_(r?4:3,e))}function hb(t,e){if(t instanceof I_&&(t=t.d_),db(t))return pb("Unsupported field value:",e,t),fb(t,e);if(t instanceof x_)return function(t,e){if(!X_(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=hb(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof I_&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Id(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=tf.fromDate(t);return{timestampValue:qp(e.Qt,n)}}if(t instanceof tf)return n=new tf(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:qp(e.Qt,n)};if(t instanceof K_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Gh)return{bytesValue:zp(e.Qt,t.I)};if(t instanceof V_){var r=t.firestore.I_;if(!r.isEqual(n=e.t))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Wp(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+N_(t))}(t,e)}function fb(t,e){var n={};return lf(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):cf(t,function(t,r){var i=hb(r,e.L_(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function db(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof tf||t instanceof K_||t instanceof Gh||t instanceof V_||t instanceof x_)}function pb(t,e,n){if(!db(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=N_(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function gb(t,e,n){if(e instanceof I_&&(e=e.d_),e instanceof T_)return e.f_;if("string"==typeof e)return vb(t,e);throw mb("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var yb=new RegExp("[~\\*/\\[\\]]");function vb(t,e,n){if(e.search(yb)>=0)throw mb("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(T_.bind.apply(T_,Object(Th.g)([void 0],e.split("."))))).f_}catch(r){throw mb("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function mb(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Wh(Hh.INVALID_ARGUMENT,(a+=". ")+t+u)}function _b(t,e){return t.some(function(t){return t.isEqual(e)})}var bb=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(Th.b)(this,void 0,void 0,function(){var e,n=this;return Object(Th.d)(this,function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Wh(Hh.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Th.d)(this,function(u){switch(u.label){case 0:return n=Lh(t),r=Xp(n.Qt)+"/documents",i={documents:e.map(function(t){return Kp(n.Qt,t)})},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Dh(!!e.found);var n=Qp(t,e.found.name),r=Hp(e.found.updateTime),i=new Mf({mapValue:{fields:e.found.fields}});return new Uf(n,r,i,{})}(t,e):"missing"in e?function(t,e){Dh(!!e.missing),Dh(!!e.readTime);var n=Qp(t,e.missing),r=Hp(e.readTime);return new Vf(n,r)}(t,e):Mh()}(n.Qt,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Dh(!!e),a.push(e)}),a)]}})})}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Vf||t instanceof Uf?n.sf(t):Mh()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new op(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(Th.b)(this,void 0,void 0,function(){var t,e=this;return Object(Th.d)(this,function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=af._t(n);e.mutations.push(new sp(r,e.jt(r)))}),[4,function(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i;return Object(Th.d)(this,function(o){switch(o.label){case 0:return n=Lh(t),r=Xp(n.Qt)+"/documents",i={writes:e.map(function(t){return eg(n.Qt,t)})},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}})})},t.prototype.sf=function(t){var e;if(t instanceof Uf)e=t.version;else{if(!(t instanceof Vf))throw Mh();e=ef.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Wh(Hh.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Bd.updateTime(e):Bd.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(ef.min()))throw new Wh(Hh.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bd.updateTime(e)}return Bd.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),wb=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new Yv(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu(function(){return Object(Th.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Th.d)(this,function(r){return t=new bb(this.Sh),(e=this.uf(t))&&e.then(function(e){n._s.Ps(function(){return t.commit().then(function(){n.Es.resolve(e)}).catch(function(t){n.hf(t)})})}).catch(function(t){n.hf(t)}),[2]})})})},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!_f(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps(function(){return e.af(),Promise.resolve()})):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!up(e)}return!1},t}(),Ob=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=Kh.UNAUTHENTICATED,this.clientId=Uh.u(),this._f=function(){},this.C=new vg,this.credentials.v(function(t){Ah("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()})}return t.prototype.getConfiguration=function(){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}})})},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then(function(){return e._f(e.user)})},t.prototype.df=function(){if(this._s.wf)throw new Wh(Hh.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new vg;return this._s.Tf(function(){return Object(Th.b)(t,void 0,void 0,function(){var t,n;return Object(Th.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Pg(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Cb(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Th.d)(this,function(o){switch(o.label){case 0:return t._s.Af(),Ah("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff(function(n){r.isEqual(n)||(r=n,t._s.po(function(){return Object(Th.b)(i,void 0,void 0,function(){return Object(Th.d)(this,function(t){switch(t.label){case 0:return[4,uv(e.bh,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.Po(function(){return t.terminate()}),t.mf=e,[2]}})})}function Eb(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r;return Object(Th.d)(this,function(i){switch(i.label){case 0:return t._s.Af(),[4,Sb(t)];case 1:return n=i.sent(),Ah("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff(function(n){return t._s.po(function(){return function(t,e){return Object(Th.b)(this,void 0,void 0,function(){var n,r;return Object(Th.d)(this,function(i){switch(i.label){case 0:return(n=Lh(t))._s.Af(),Ah("RemoteStore","RemoteStore received new credentials"),r=hm(n),n.Nh.add(3),[4,im(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,rm(n)];case 3:return i.sent(),[2]}})})}(e.yl,n)})}),t.If=e,[2]}})})}function Sb(t){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(e){switch(e.label){case 0:return t.mf?[3,2]:(Ah("FirestoreClient","Using default OfflineComponentProvider"),[4,Cb(t,new w_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}})})}function Tb(t){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(e){switch(e.label){case 0:return t.If?[3,2]:(Ah("FirestoreClient","Using default OnlineComponentProvider"),[4,Eb(t,new E_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}})})}function xb(t){return Sb(t).then(function(t){return t.persistence})}function Ib(t){return Sb(t).then(function(t){return t.bh})}function Pb(t){return Tb(t).then(function(t){return t.yl})}function jb(t){return Tb(t).then(function(t){return t._a})}function Ab(t){return Object(Th.b)(this,void 0,void 0,function(){var e,n;return Object(Th.d)(this,function(r){switch(r.label){case 0:return[4,Tb(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=Hm.bind(null,e._a),n.Hh=Gm.bind(null,e._a),n)]}})})}function Rb(t,e,n){var r=this;void 0===n&&(n={});var i=new vg;return t._s.Ps(function(){return Object(Th.b)(r,void 0,void 0,function(){var r;return Object(Th.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new S_({next:function(o){e.Ps(function(){return Am(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Wh(Hh.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Wh(Hh.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Mm(ld(n.path),o,{includeMetadataChanges:!0,nl:!0});return jm(t,s)},[4,Ab(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}function kb(t,e,n){var r=this;void 0===n&&(n={});var i=new vg;return t._s.Ps(function(){return Object(Th.b)(r,void 0,void 0,function(){var r;return Object(Th.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new S_({next:function(n){e.Ps(function(){return Am(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Wh(Hh.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Mm(n,o,{includeMetadataChanges:!0,nl:!0});return jm(t,s)},[4,Ab(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}var Nb=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new Yv(this,"async_queue_retry"),this.vf=function(){var e=Qv();e&&Ah("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=Qv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=Qv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps(function(){return e.Pf.push(t),e.Cf()})},t.prototype.Cf=function(){return Object(Th.b)(this,void 0,void 0,function(){var t,e=this;return Object(Th.d)(this,function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Cg(t=n.sent()))throw t;return Ah("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu(function(){return e.Cf()}),n.label=5;case 5:return[2]}})})},t.prototype.Df=function(t){var e=this,n=this.Rf.then(function(){return e.pf=!0,t().catch(function(t){throw e.Vf=t,e.pf=!1,Rh("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.pf=!1,t})});return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Ig.Ts(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&Mh()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(Th.b)(this,void 0,void 0,function(){var t;return Object(Th.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then(function(){e.gf.sort(function(t,e){return t.ds-e.ds});for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()})},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function Mb(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this.kf={},this.Mf=new vg,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)}}();var Db=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new Nb,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(Th.c)(e,t),e.prototype.b_=function(){return this.qf||Fb(this),this.qf.terminate()},e}(U_);function Lb(t){return t.qf||Fb(t),t.qf.df(),t.qf}function Fb(t){var e=t.p_(),n=function(t,e,n){return new xh(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new Ob(t.m_,t.Bf,n)}function Ub(t,e,n){var r=this,i=new vg;return t._s.enqueue(function(){return Object(Th.b)(r,void 0,void 0,function(){var r;return Object(Th.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Cb(t,n)];case 1:return o.sent(),[4,Eb(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Hh.FAILED_PRECONDITION||t.code===Hh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Vb(t){if(t.R_||t.P_)throw new Wh(Hh.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var qb=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),Of(t)){case 0:return null;case 1:return t.booleanValue;case 2:return pf(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(gf(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw Mh()}},t.prototype.Hf=function(t,e){var n=this,r={};return cf(t.fields||{},function(t,i){r[t]=n.Uf(i,e)}),r},t.prototype.Gf=function(t){return new K_(pf(t.latitude),pf(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.Uf(t,e)})},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=vf(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(mf(t));default:return null}},t.prototype.Qf=function(t){var e=df(t);return new tf(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=rf.ot(t);Dh(yg(n));var r=new Ih(n.get(1),n.get(3)),i=new af(n.Y(5));return r.isEqual(e)||Rh("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),zb=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new V_(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new Bb(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(Hb("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),Bb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Th.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(zb);function Hb(t,e){return"string"==typeof e?vb(t,e):e instanceof I_?e.d_.f_:e.f_}function Wb(t){if(fd(t)&&0===t.xt.length)throw new Wh(Hh.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Gb=function(){};function Kb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var Qb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return Object(Th.c)(e,t),e.prototype.td=function(t){var e=tb(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new Wh(Hh.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){ew(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(tw(r,t,l[c]));a={arrayValue:{values:u}}}else a=tw(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ew(s,o),a=lb(n,"where",s,"in"===o||"not-in"===o);var h=Kf.create(i,o,a);return function(t,e){if(e.Ct()){var n=pd(t);if(null!==n&&!n.isEqual(e.field))throw new Wh(Hh.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=dd(t);null!==r&&nw(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Wh(Hh.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new q_(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new ud(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Gb),$b=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return Object(Th.c)(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Wh(Hh.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Wh(Hh.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new id(e,n);return function(t,e){if(null===dd(t)){var n=pd(t);null!==n&&nw(0,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new q_(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new ud(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Gb),Yb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return Object(Th.c)(e,t),e.prototype.td=function(t){return new q_(t.firestore,t.v_,md(t.C_,this.od,this.ad))},e}(Gb),Xb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(Th.c)(e,t),e.prototype.td=function(t){var e=Jb(t,this.type,this.ud,this.hd);return new q_(t.firestore,t.v_,function(t,e){return new ud(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Gb),Zb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(Th.c)(e,t),e.prototype.td=function(t){var e=Jb(t,this.type,this.ud,this.hd);return new q_(t.firestore,t.v_,function(t,e){return new ud(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Gb);function Jb(t,e,n,r){if(n[0]instanceof I_&&(n[0]=n[0].d_),n[0]instanceof zb)return function(t,e,n,r,i){if(!r)throw new Wh(Hh.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=yd(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(Pf(e,r.key));else{var c=r.field(u.field);if(yf(c))throw new Wh(Hh.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.rt();throw new Wh(Hh.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new nd(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=tb(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new Wh(Hh.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new Wh(Hh.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!gd(t)&&-1!==c.indexOf("/"))throw new Wh(Hh.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(rf.ot(c));if(!af.wt(l))throw new Wh(Hh.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new af(l);a.push(Pf(e,h))}else{var f=lb(n,r,c);a.push(f)}}return new nd(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function tw(t,e,n){if(n instanceof I_&&(n=n.d_),"string"==typeof n){if(""===n)throw new Wh(Hh.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!gd(e)&&-1!==n.indexOf("/"))throw new Wh(Hh.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(rf.ot(n));if(!af.wt(r))throw new Wh(Hh.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Pf(t,new af(r))}if(n instanceof V_)return Pf(t,n.S_);throw new Wh(Hh.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+N_(n)+".")}function ew(t,e){if(!Array.isArray(t)||0===t.length)throw new Wh(Hh.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Wh(Hh.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function nw(t,e,n){if(!n.isEqual(e))throw new Wh(Hh.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function rw(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var iw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Th.c)(e,t),e.prototype.Wf=function(t){return new Gh(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new V_(this.firestore,null,e)},e}(qb),ow=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),sw=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return Object(Th.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new aw(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(Hb("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(zb),aw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Th.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(sw),uw=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new ow(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach(function(r){t.call(e,new aw(n.Yf,n.Xf,r.key,r,new ow(n._d.De.has(r.key),n._d.fromCache),n.query.v_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new Wh(Hh.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map(function(e){return{type:"added",doc:new aw(t.Yf,t.Xf,e.doc.key,e.doc,new ow(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}})}var r=t._d.Se;return t._d.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new aw(t.Yf,t.Xf,e.doc.key,e.doc,new ow(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:cw(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.dd=e),this.fd},t}();function cw(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mh()}}function lw(t,e){return t instanceof sw&&e instanceof sw?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof uw&&e instanceof uw&&t.Yf===e.Yf&&G_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var hw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Th.c)(e,t),e.prototype.Wf=function(t){return new Gh(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new V_(this.firestore,null,e)},e}(qb);function fw(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=M_(t,V_);var o=M_(t.firestore,Db),s=tb(o);return e instanceof I_&&(e=e.d_),pw(o,[("string"==typeof e||e instanceof T_?cb(s,"updateDoc",t.S_,e,n,r):ub(s,"updateDoc",t.S_,e)).F_(t.S_,Bd.exists(!0))])}function dw(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof I_&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Mb(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Mb(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof V_)c=M_(t.firestore,Db),l=ld(t.S_.path),u={next:function(e){i[a]&&i[a](gw(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=M_(t,q_);c=M_(d.firestore,Db),l=d.C_;var p=new hw(c);u={next:function(t){i[a]&&i[a](new uw(c,p,d,t))},error:i[a+1],complete:i[a+2]},Wb(t.C_)}return function(t,e,n,r){var i=this,o=new S_(r),s=new Mm(e,o,n);return t._s.Ps(function(){return Object(Th.b)(i,void 0,void 0,function(){var e;return Object(Th.d)(this,function(n){switch(n.label){case 0:return e=jm,[4,Ab(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.i_(),t._s.Ps(function(){return Object(Th.b)(i,void 0,void 0,function(){var e;return Object(Th.d)(this,function(n){switch(n.label){case 0:return e=Am,[4,Ab(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Lb(c),l,h,u)}function pw(t,e){return function(t,e){var n=this,r=new vg;return t._s.Ps(function(){return Object(Th.b)(n,void 0,void 0,function(){var n;return Object(Th.d)(this,function(i){switch(i.label){case 0:return n=Km,[4,jb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Lb(t),e)}function gw(t,e,n){var r=n.docs.get(e.S_),i=new hw(t);return new sw(t,i,e.S_,r,new ow(n.hasPendingWrites,n.fromCache),e.v_)}var yw=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=tb(t)}return t.prototype.set=function(t,e,n){this.md();var r=vw(t,this.Yf),i=rw(r.v_,e,n),o=eb(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,Bd.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=vw(t,this.Yf);return e instanceof I_&&(e=e.d_),o="string"==typeof e||e instanceof T_?cb(this.Id,"WriteBatch.update",s.S_,e,n,r):ub(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,Bd.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=vw(t,this.Yf);return this.Ed=this.Ed.concat(new op(e.S_,Bd.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new Wh(Hh.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function vw(t,e){if(t instanceof I_&&(t=t.d_),t.firestore!==e)throw new Wh(Hh.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var mw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return Object(Th.c)(e,t),e.prototype.get=function(e){var n=this,r=vw(e,this.Yf),i=new hw(this.Yf);return t.prototype.get.call(this,e).then(function(t){return new sw(n.Yf,i,r.S_,t.Zf,new ow(!1,!1),r.v_)})},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=tb(t)}return t.prototype.get=function(t){var e=this,n=vw(t,this.Yf),r=new iw(this.Yf);return this.Ad.ef([n.S_]).then(function(t){if(!t||1!==t.length)return Mh();var i=t[0];if(i instanceof Vf)return new zb(e.Yf,r,n.S_,null,n.v_);if(i instanceof Uf)return new zb(e.Yf,r,i.key,i,n.v_);throw Mh()})},t.prototype.set=function(t,e,n){var r=vw(t,this.Yf),i=rw(r.v_,e,n),o=eb(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=vw(t,this.Yf);return e instanceof I_&&(e=e.d_),o="string"==typeof e||e instanceof T_?cb(this.Id,"Transaction.update",s.S_,e,n,r):ub(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=vw(t,this.Yf);return this.Ad.delete(e.S_),this},t}());function _w(){if("undefined"==typeof Uint8Array)throw new Wh(Hh.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function bw(){if("undefined"==typeof atob)throw new Wh(Hh.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ww=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Th.c)(e,t),e.fromBase64String=function(t){return bw(),new e(Gh.fromBase64String(t))},e.fromUint8Array=function(t){return _w(),new e(Gh.fromUint8Array(t))},e.prototype.toBase64=function(){return bw(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return _w(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(I_),Ow=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Vb(t=M_(t,Db));var n=Lb(t),r=t.p_(),i=new E_;return Ub(n,i,new O_(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Vb(t=M_(t,Db));var e=Lb(t),n=t.p_(),r=new E_;return Ub(e,r,new C_(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new Wh(Hh.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new vg;return t.Bf.Tf(function(){return Object(Th.b)(e,void 0,void 0,function(){var e;return Object(Th.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Th.b)(this,void 0,void 0,function(){return Object(Th.d)(this,function(e){switch(e.label){case 0:return bg.Kn()?[4,bg.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(ev(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t.d_)},t}(),Cw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Ih||(i.Pd=e),i}return Object(Th.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=M_(t,U_)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&kh("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(Th.b)(e,void 0,void 0,function(){var e,n;return Object(Th.d)(this,function(r){switch(r.label){case 0:return[4,xb(t)];case 1:return e=r.sent(),[4,Pb(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=Lh(t);return e.Nh.delete(0),rm(e)}(n))]}})})})}(Lb(M_(this.d_,Db)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(Th.b)(e,void 0,void 0,function(){var e,n;return Object(Th.d)(this,function(r){switch(r.label){case 0:return[4,xb(t)];case 1:return e=r.sent(),[4,Pb(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return Object(Th.b)(this,void 0,void 0,function(){var e;return Object(Th.d)(this,function(n){switch(n.label){case 0:return(e=Lh(t)).Nh.add(0),[4,im(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}})})}(n))]}})})})}(Lb(M_(this.d_,Db)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&A_("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new vg;return t._s.Ps(function(){return Object(Th.b)(e,void 0,void 0,function(){var e;return Object(Th.d)(this,function(r){switch(r.label){case 0:return e=Jm,[4,jb(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Lb(M_(this.d_,Db)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new S_(e);return t._s.Ps(function(){return Object(Th.b)(n,void 0,void 0,function(){var e;return Object(Th.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Lh(t).Wh.add(e),e.next()},[4,Ab(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.i_(),t._s.Ps(function(){return Object(Th.b)(n,void 0,void 0,function(){var e;return Object(Th.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Lh(t).Wh.delete(e)},[4,Ab(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Lb(t=M_(t,Db)),Mb(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new Wh(Hh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Lw(this,B_(this.d_,t))}catch(t){throw Pw(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Iw(this,H_(this.d_,t))}catch(t){throw Pw(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Nw(this,function(t,e){if(t=M_(t,U_),P_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Wh(Hh.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new q_(t,null,function(t){return new ud(rf.ct(),t)}(e))}(this.d_,t))}catch(t){throw Pw(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new vg;return t._s.Ps(function(){return Object(Th.b)(n,void 0,void 0,function(){var n;return Object(Th.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Tb(t).then(function(t){return t.Sh})}(t)];case 1:return n=i.sent(),new wb(t._s,n,e,r).run(),[2]}})})}),r.promise}(Lb(t),function(n){return e(new mw(t,n))})}(this.d_,function(n){return t(new Sw(e,n))})},e.prototype.batch=function(){var t=this;return Lb(this.d_),new Tw(new yw(this.d_,function(e){return pw(t.d_,e)}))},e.prototype.loadBundle=function(t){throw new Wh(Hh.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Wh(Hh.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(I_),Ew=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Th.c)(e,t),e.prototype.Wf=function(t){return new ww(new Gh(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return Iw.yd(e,this.firestore,null)},e}(qb),Sw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new Ew(e),r}return Object(Th.c)(e,t),e.prototype.get=function(t){var e=this,n=Fw(t);return this.d_.get(n).then(function(t){return new Rw(e.Yf,new sw(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))})},e.prototype.set=function(t,e,n){var r=Fw(t);return n?(j_("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Fw(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(Th.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Fw(t);return this.d_.delete(e),this},e}(I_),Tw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Th.c)(e,t),e.prototype.set=function(t,e,n){var r=Fw(t);return n?(j_("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Fw(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(Th.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Fw(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(I_),xw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return Object(Th.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new aw(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new kw(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Ew(t),n),i.set(n,o)),o},e}(I_);xw.Vd=new WeakMap;var Iw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Ew(e),r}return Object(Th.c)(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new Wh(Hh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new V_(n.d_,r,new af(t)))},e.yd=function(t,n,r){return new e(n,new V_(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Lw(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Lw(this.firestore,B_(this.d_,t))}catch(t){throw Pw(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof I_&&(t=t.d_),t instanceof V_&&W_(this.d_,t)},e.prototype.set=function(t,e){e=j_("DocumentReference.set",e);try{return function(t,e,n){t=M_(t,V_);var r=M_(t.firestore,Db),i=rw(t.v_,e,n);return pw(r,[eb(tb(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Bd.Kt())])}(this.d_,t,e)}catch(t){throw Pw(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?fw(this.d_,t):fw.apply(void 0,Object(Th.g)([this.d_,t,e],n))}catch(t){throw Pw(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return pw(M_((t=this.d_).firestore,Db),[new op(t.S_,Bd.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=jw(e),i=Aw(e,function(e){return new Rw(t.firestore,new sw(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))});return dw(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=M_(t,V_);var e=M_(t.firestore,Db),n=Lb(e),r=new hw(e);return function(t,e){var n=this,r=new vg;return t._s.Ps(function(){return Object(Th.b)(n,void 0,void 0,function(){var n;return Object(Th.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Th.b)(this,void 0,void 0,function(){var r,i;return Object(Th.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Lh(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Tc.Ho(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof Uf?n.resolve(i):i instanceof Vf?n.resolve(null):n.reject(new Wh(Hh.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Pg(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Ib(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.S_).then(function(n){return new sw(e,r,t.S_,n,new ow(n instanceof Uf&&n.Vt,!0),t.v_)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=M_(t,V_);var e=M_(t.firestore,Db);return Rb(Lb(e),t.S_,{source:"server"}).then(function(n){return gw(e,t,n)})}(this.d_):function(t){t=M_(t,V_);var e=M_(t.firestore,Db);return Rb(Lb(e),t.S_).then(function(n){return gw(e,t,n)})}(this.d_)).then(function(t){return new Rw(e.firestore,new sw(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(xw.gd(this.firestore,t)))},e}(I_);function Pw(t,e,n){return t.message=t.message.replace(e,n),t}function jw(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Mb(r))return r}return{}}function Aw(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Mb(t[0])?t[0]:Mb(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Rw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Th.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Iw(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return lw(this.d_,t.d_)},e}(I_),kw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Th.c)(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(Rw),Nw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Ew(e),r}return Object(Th.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Kb(this.d_,function(t,e,n){var r=e,i=Hb("where",t);return new Qb(i,r,n)}(t,n,r)))}catch(t){throw Pw(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Kb(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=Hb("orderBy",t);return new $b(r,n)}(t,n)))}catch(t){throw Pw(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Kb(this.d_,function(t){return D_("limit",t),new Yb("limit",t,"F")}(t)))}catch(t){throw Pw(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Kb(this.d_,function(t){return D_("limitToLast",t),new Yb("limitToLast",t,"L")}(t)))}catch(t){throw Pw(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Kb(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xb("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw Pw(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Kb(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xb("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw Pw(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Kb(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zb("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw Pw(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Kb(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zb("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw Pw(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return G_(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=M_(t,q_);var e=M_(t.firestore,Db),n=Lb(e),r=new hw(e);return function(t,e){var n=this,r=new vg;return t._s.Ps(function(){return Object(Th.b)(n,void 0,void 0,function(){var n;return Object(Th.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Th.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Th.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,yv(t,e,!0)];case 1:return a=u.sent(),r=new Vm(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Pg(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Ib(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.C_).then(function(n){return new uw(e,r,t,n)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=M_(t,q_);var e=M_(t.firestore,Db),n=Lb(e),r=new hw(e);return kb(n,t.C_,{source:"server"}).then(function(n){return new uw(e,r,t,n)})}(this.d_):function(t){t=M_(t,q_);var e=M_(t.firestore,Db),n=Lb(e),r=new hw(e);return Wb(t.C_),kb(n,t.C_).then(function(n){return new uw(e,r,t,n)})}(this.d_)).then(function(t){return new Dw(e.firestore,new uw(e.firestore.d_,e.Xf,e.d_,t._d))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=jw(e),i=Aw(e,function(e){return new Dw(t.firestore,new uw(t.firestore.d_,t.Xf,t.d_,e._d))});return dw(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(xw.gd(this.firestore,t)))},e}(I_),Mw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Th.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new kw(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(I_),Dw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Th.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Nw(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map(function(e){return new kw(t.Yf,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map(function(t){return new Mw(e.Yf,t)})},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach(function(r){t.call(e,new kw(n.Yf,r))})},e.prototype.isEqual=function(t){return lw(this.d_,t.d_)},e}(I_),Lw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return Object(Th.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new Iw(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Iw(this.firestore,void 0===t?H_(this.d_):H_(this.d_,t))}catch(t){throw Pw(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=M_(t.firestore,Db),r=H_(t),i=rw(t.v_,e);return pw(n,[eb(tb(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Bd.exists(!1))]).then(function(){return r})}(this.d_,t).then(function(t){return new Iw(e.firestore,t)})},e.prototype.isEqual=function(t){return W_(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(xw.gd(this.firestore,t)))},e}(Nw);function Fw(t){return t instanceof I_&&(t=t.d_),M_(t,V_)}var Uw,Vw=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(T_.bind.apply(T_,Object(Th.g)([void 0],e))))||this}return Object(Th.c)(e,t),e.documentId=function(){return new e(sf.ht().rt())},e.prototype.isEqual=function(t){return t instanceof I_&&(t=t.d_),t instanceof T_&&this.d_.f_.isEqual(t.f_)},e}(I_),qw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Th.c)(e,t),e.serverTimestamp=function(){var t=new ib("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new nb("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ob("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sb("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new ab("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(I_),zw=n("/6Yf"),Bw={Firestore:Cw,GeoPoint:K_,Timestamp:tf,Blob:ww,Transaction:Sw,WriteBatch:Tw,DocumentReference:Iw,DocumentSnapshot:Rw,Query:Nw,QueryDocumentSnapshot:kw,QuerySnapshot:Dw,CollectionReference:Lw,FieldPath:Vw,FieldValue:qw,setLogLevel:function(t){Ph.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function Hw(t,e){return function(t,e=To.b){return new mt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Ww(t,e){return Hw(t,e).pipe(Object(bt.a)(t=>({payload:t,type:"query"})))}function Gw(t,e){return Ww(t,e).pipe(Cn(void 0),_a(),Object(bt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Kw(t,e,n){return Gw(t,n).pipe(Object(En.a)((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Qw(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Qw(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Qw(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Object(Po.a)(),Object(bt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Qw(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function $w(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new zw.a("firestore",function(t){return function(t,e){return new Cw(t,new Db(t,e),new Ow)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Bw)))})(Uw=Oa.a),Uw.registerVersion("@firebase/firestore","2.1.7");class Yw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Gw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(bt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Cn(void 0),_a(),Object(sn.a)(([t,e])=>e.length>0||!t),Object(bt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(En.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=$w(t);return Kw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Ww(this.query,this.afs.schedulers.outsideAngular).pipe(Object(bt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Ot.a)(this.query.get(t)).pipe(Object(No.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Xw(this.ref.doc(t),this.afs)}}class Xw{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=rO(n,e);return new Yw(r,i,this.afs)}snapshotChanges(){return Hw(this.ref,this.afs.schedulers.outsideAngular).pipe(Cn(void 0),_a(),Object(bt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(bt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Ot.a)(this.ref.get(t)).pipe(Object(No.b)(this.afs.schedulers.insideAngular))}}class Zw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Gw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(bt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(sn.a)(t=>t.length>0),this.afs.keepUnstableUntilFirst):Gw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(En.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=$w(t);return Kw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Ww(this.query,this.afs.schedulers.outsideAngular).pipe(Object(bt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Ot.a)(this.query.get(t)).pipe(Object(No.b)(this.afs.schedulers.insideAngular))}}const Jw=new r.q("angularfire2.enableFirestorePersistence"),tO=new r.q("angularfire2.firestore.persistenceSettings"),eO=new r.q("angularfire2.firestore.settings"),nO=new r.q("angularfire2.firestore.use-emulator");function rO(t,e=(t=>t)){return{query:e(t),ref:t}}let iO=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new ko.d(o),this.keepUnstableUntilFirst=Object(ko.h)(this.schedulers);const c=Object(ko.g)(t,o,e);!Go.a.auth&&u&&Object(ko.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(ko.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!U(i)){const e=()=>{try{return Object(Ot.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Uw){return"undefined"!=typeof console&&console.warn(Uw),Object(He.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(He.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=rO(n,e),o=this.schedulers.ngZone.run(()=>r);return new Yw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Zw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Xw(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ko.c),r.Rb(ko.b,8),r.Rb(Jw,8),r.Rb(eO,8),r.Rb(r.B),r.Rb(r.z),r.Rb(tO,8),r.Rb(nO,8),r.Rb(Uo,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(ko.c),Object(r.Rb)(ko.b,8),Object(r.Rb)(Jw,8),Object(r.Rb)(eO,8),Object(r.Rb)(r.B),Object(r.Rb)(r.z),Object(r.Rb)(tO,8),Object(r.Rb)(nO,8),Object(r.Rb)(Uo,8))},token:t,providedIn:"any"}),t})(),oO=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Jw,useValue:!0},{provide:tO,useValue:e}]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[iO]}),t})();var sO=n("agSv");n("mCNh");class aO{call(t,e){return e.subscribe(new uO(t))}}class uO extends an.a{_next(t){}}class cO{call(t,e){return e.subscribe(new lO(t))}}class lO extends an.a{constructor(t){super(t)}_next(t){this.destination.next(oa.a.createNext(t))}_error(t){const e=this.destination;e.next(oa.a.createError(t)),e.complete()}_complete(){const t=this.destination;t.next(oa.a.createComplete()),t.complete()}}function hO(t,e,n,r){return i=>i.lift(new fO(t,e,n,r))}class fO{constructor(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}call(t,e){return e.subscribe(new dO(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class dO extends an.a{constructor(t,e,n,r,i){super(t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}_group(t,e){let n=this.groups;n||(n=this.groups=new Map);let r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(o){this.error(o)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new nn.a,n.set(e,i);const t=new gO(e,i,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new gO(e,i))}catch(o){return void this.error(o)}this.add(t.subscribe(new pO(e,i,this)))}}i.closed||i.next(r)}_error(t){const e=this.groups;e&&(e.forEach((e,n)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class pO extends an.a{constructor(t,e,n){super(e),this.key=t,this.group=e,this.parent=n}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class gO extends mt.a{constructor(t,e,n){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=n}_subscribe(t){const e=new jn.a,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&e.add(new yO(n)),e.add(r.subscribe(t)),e}}class yO extends jn.a{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}var vO=n("zx2A");function mO(t,e){return e?n=>n.pipe(mO((n,r)=>Object(Ot.a)(t(n,r)).pipe(Object(bt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new _O(t))}class _O{constructor(t){this.project=t}call(t,e){return e.subscribe(new bO(t,this.project))}}class bO extends vO.b{constructor(t,e){super(t),this.project=e,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(t){this.hasSubscription||this.tryNext(t)}tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(e)}_innerSub(t){const e=new vO.a(this),n=this.destination;n.add(e);const r=Object(vO.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}class wO{call(t,e){return e.subscribe(new OO(t))}}class OO extends an.a{constructor(t){super(t)}_next(t){t.observe(this.destination)}}const CO="__@ngrx/effects_create__";function EO(t){return Object.getOwnPropertyNames(t).filter(e=>t[e]&&t[e].hasOwnProperty(CO)).map(e=>Object.assign({propertyName:e},t[e][CO]))}function SO(t){return Object.getPrototypeOf(t)}const TO="__@ngrx/effects__";function xO(t){return Object(ms.m)(IO,SO)(t)}function IO(t){return function(t){return t.constructor.hasOwnProperty(TO)}(t)?t.constructor[TO]:[]}function PO(t,e,n=10){return t.pipe(Object(Sn.a)(r=>(e&&e.handleError(r),n<=1?t:PO(t,e,n-1))))}let jO=(()=>{class t extends mt.a{constructor(t){super(),t&&(this.source=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ms.f))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function AO(t){return RO(t,"ngrxOnInitEffects")}function RO(t,e){return t&&e in t&&"function"==typeof t[e]}const kO=new r.q("@ngrx/effects Internal Root Guard"),NO=new r.q("@ngrx/effects User Provided Effects"),MO=new r.q("@ngrx/effects Internal Root Effects"),DO=new r.q("@ngrx/effects Root Effects"),LO=new r.q("@ngrx/effects Internal Feature Effects"),FO=new r.q("@ngrx/effects Feature Effects"),UO=new r.q("@ngrx/effects Effects Error Handler");let VO=(()=>{class t extends nn.a{constructor(t,e){super(),this.errorHandler=t,this.effectsErrorHandler=e}addEffects(t){this.next(t)}toActions(){return this.pipe(hO(SO),Object(In.a)(t=>t.pipe(hO(qO))),Object(In.a)(t=>{const e=t.pipe(mO(t=>{return(e=this.errorHandler,n=this.effectsErrorHandler,t=>{const r=function(t,e,n){const r=SO(t).constructor.name,i=(o=t,[xO,EO].reduce((t,e)=>t.concat(e(o)),[])).map(({propertyName:i,dispatch:o,useEffectsErrorHandler:s})=>{const a="function"==typeof t[i]?t[i]():t[i],u=s?n(a,e):a;return!1===o?u.pipe(function(t){return t.lift(new aO)}):u.pipe(function(t){return t.lift(new cO)}).pipe(Object(bt.a)(e=>({effect:t[i],notification:e,propertyName:i,sourceName:r,sourceInstance:t})))});var o;return Object(xo.a)(...i)}(t,e,n);return RO(t,"ngrxOnRunEffects")?t.ngrxOnRunEffects(r):r})(t);var e,n}),Object(bt.a)(t=>(function(t,e){if("N"===t.notification.kind){const n=t.notification.value;!function(t){return"function"!=typeof t&&t&&t.type&&"string"==typeof t.type}(n)&&e.handleError(new Error(`Effect ${function({propertyName:t,sourceInstance:e,sourceName:n}){const r="function"==typeof e[t];return`"${n}.${String(t)}${r?"()":""}"`}(t)} dispatched an invalid action: ${function(t){try{return JSON.stringify(t)}catch(e){return t}}(n)}`))}}(t,this.errorHandler),t.notification)),Object(sn.a)(t=>"N"===t.kind&&null!=t.value),function(t){return t.lift(new wO)}),n=t.pipe(Object(wn.a)(1),Object(sn.a)(AO),Object(bt.a)(t=>t.ngrxOnInitEffects()));return Object(xo.a)(e,n)}))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.m),r.Rb(UO))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function qO(t){return RO(t,"ngrxOnIdentifyEffects")?t.ngrxOnIdentifyEffects():""}let zO=(()=>{class t{constructor(t,e){this.effectSources=t,this.store=e,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(VO),r.Rb(ms.h))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const BO="@ngrx/effects/init";Object(ms.n)(BO);let HO=(()=>{class t{constructor(t,e,n,r,i,o,s){this.sources=t,e.start(),r.forEach(e=>t.addEffects(e)),n.dispatch({type:BO})}addEffects(t){this.sources.addEffects(t)}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Rb(VO),r.Rb(zO),r.Rb(ms.h),r.Rb(DO),r.Rb(ms.k,8),r.Rb(ms.i,8),r.Rb(kO,8))}}),t})(),WO=(()=>{class t{constructor(t,e,n,r){e.forEach(e=>e.forEach(e=>t.addEffects(e)))}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Rb(HO),r.Rb(FO),r.Rb(ms.k,8),r.Rb(ms.i,8))}}),t})(),GO=(()=>{class t{static forFeature(t=[]){return{ngModule:WO,providers:[t,{provide:LO,multi:!0,useValue:t},{provide:NO,multi:!0,useValue:[]},{provide:FO,multi:!0,useFactory:KO,deps:[r.r,LO,NO]}]}}static forRoot(t=[]){return{ngModule:HO,providers:[{provide:UO,useValue:PO},zO,VO,jO,t,{provide:MO,useValue:[t]},{provide:kO,useFactory:QO,deps:[[zO,new r.A,new r.J],[MO,new r.I]]},{provide:NO,multi:!0,useValue:[]},{provide:DO,useFactory:KO,deps:[r.r,MO,NO]}]}}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)}}),t})();function KO(t,e,n){const r=[];for(let i of e)r.push(...i);for(let i of n)r.push(...i);return function(t,e){return e.map(e=>t.get(e))}(t,r)}function QO(t,e){if((1!==e.length||0!==e[0].length)&&t)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}let $O=(()=>{class t{constructor(t){this.actions$=t}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(jO))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const YO={[bs]:(t=ws,e)=>{switch(e.type){case _s.setUser:return Object.assign(Object.assign({},t),{user:e.payload.user});case _s.updateIsAuth:return Object.assign(Object.assign({},t),{isAuth:e.payload.isAuth});default:return t}}},XO=[],ZO="@ngrx/router-store/request",JO=(Object(ms.n)(ZO,Object(ms.q)()),"@ngrx/router-store/navigation"),tC=(Object(ms.n)(JO,Object(ms.q)()),"@ngrx/router-store/cancel"),eC=(Object(ms.n)(tC,Object(ms.q)()),"@ngrx/router-store/error"),nC=(Object(ms.n)(eC,Object(ms.q)()),"@ngrx/router-store/navigated");Object(ms.n)(nC,Object(ms.q)());class rC{}class iC{serialize(t){return{root:this.serializeRoute(t.root),url:t.url}}serializeRoute(t){const e=t.children.map(t=>this.serializeRoute(t));return{params:t.params,paramMap:t.paramMap,data:t.data,url:t.url,outlet:t.outlet,routeConfig:t.routeConfig?{component:t.routeConfig.component,path:t.routeConfig.path,pathMatch:t.routeConfig.pathMatch,redirectTo:t.routeConfig.redirectTo,outlet:t.routeConfig.outlet}:null,queryParams:t.queryParams,queryParamMap:t.queryParamMap,fragment:t.fragment,component:t.routeConfig?t.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:e[0],pathFromRoot:void 0,children:e}}}class oC{serialize(t){return{root:this.serializeRoute(t.root),url:t.url}}serializeRoute(t){const e=t.children.map(t=>this.serializeRoute(t));return{params:t.params,data:t.data,url:t.url,outlet:t.outlet,routeConfig:t.routeConfig?{path:t.routeConfig.path,pathMatch:t.routeConfig.pathMatch,redirectTo:t.routeConfig.redirectTo,outlet:t.routeConfig.outlet}:null,queryParams:t.queryParams,fragment:t.fragment,firstChild:e[0],children:e}}}const sC={PreActivation:1,PostActivation:2};sC[sC.PreActivation]="PreActivation",sC[sC.PostActivation]="PostActivation";const aC=new r.q("@ngrx/router-store Internal Configuration"),uC=new r.q("@ngrx/router-store Configuration");function cC(t){return Object.assign({stateKey:"router",serializer:oC,navigationActionTiming:sC.PreActivation},t)}const lC={NONE:1,ROUTER:2,STORE:3};lC[lC.NONE]="NONE",lC[lC.ROUTER]="ROUTER",lC[lC.STORE]="STORE";let hC=(()=>{class t{constructor(t,e,n,r,i){this.store=t,this.router=e,this.serializer=n,this.errorHandler=r,this.config=i,this.lastEvent=null,this.routerState=null,this.trigger=lC.NONE,this.stateKey=this.config.stateKey,this.setUpStoreStateListener(),this.setUpRouterEventsListener()}static forRoot(e={}){return{ngModule:t,providers:[{provide:aC,useValue:e},{provide:uC,useFactory:cC,deps:[aC]},{provide:rC,useClass:e.serializer?e.serializer:0===e.routerState?iC:oC}]}}setUpStoreStateListener(){this.store.pipe(Object(ms.r)(this.stateKey),Object(jo.a)(this.store)).subscribe(([t,e])=>{this.navigateIfNeeded(t,e)})}navigateIfNeeded(t,e){if(!t||!t.state)return;if(this.trigger===lC.ROUTER)return;if(this.lastEvent instanceof Nn)return;const n=t.state.url;var r;r=n,fC(this.router.url)!==fC(r)&&(this.storeState=e,this.trigger=lC.STORE,this.router.navigateByUrl(n).catch(t=>{this.errorHandler.handleError(t)}))}setUpRouterEventsListener(){const t=this.config.navigationActionTiming===sC.PostActivation;let e;this.router.events.pipe(Object(jo.a)(this.store)).subscribe(([n,r])=>{this.lastEvent=n,n instanceof Nn?(this.routerState=this.serializer.serialize(this.router.routerState.snapshot),this.trigger!==lC.STORE&&(this.storeState=r,this.dispatchRouterRequest(n))):n instanceof Fn?(e=n,t||this.trigger===lC.STORE||this.dispatchRouterNavigation(n)):n instanceof Dn?(this.dispatchRouterCancel(n),this.reset()):n instanceof Ln?(this.dispatchRouterError(n),this.reset()):n instanceof Mn&&(this.trigger!==lC.STORE&&(t&&this.dispatchRouterNavigation(e),this.dispatchRouterNavigated(n)),this.reset())})}dispatchRouterRequest(t){this.dispatchRouterAction(ZO,{event:t})}dispatchRouterNavigation(t){const e=this.serializer.serialize(t.state);this.dispatchRouterAction(JO,{routerState:e,event:new Fn(t.id,t.url,t.urlAfterRedirects,e)})}dispatchRouterCancel(t){this.dispatchRouterAction(tC,{storeState:this.storeState,event:t})}dispatchRouterError(t){this.dispatchRouterAction(eC,{storeState:this.storeState,event:new Ln(t.id,t.url,""+t)})}dispatchRouterNavigated(t){const e=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction(nC,{event:t,routerState:e})}dispatchRouterAction(t,e){this.trigger=lC.ROUTER;try{this.store.dispatch({type:t,payload:Object.assign(Object.assign({routerState:this.routerState},e),{event:0===this.config.routerState?e.event:{id:e.event.id,url:e.event.url,urlAfterRedirects:e.event.urlAfterRedirects}})})}finally{this.trigger=lC.NONE}}reset(){this.trigger=lC.NONE,this.storeState=null,this.routerState=null}}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)(r.Rb(ms.h),r.Rb(ro),r.Rb(rC),r.Rb(r.m),r.Rb(uC))}}),t})();function fC(t){return t.length>0&&"/"===t[t.length-1]?t.substring(0,t.length-1):t}let dC=(()=>{class t{}return t.\u0275mod=r.Ib({type:t,bootstrap:[ma]}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[],imports:[[vt,va,qe,ra,ze,ko.a.initializeApp(i),oO,ms.j.forRoot(YO,{metaReducers:XO,runtimeChecks:{strictStateImmutability:!0,strictActionImmutability:!0}}),sO.a.instrument({maxAge:25,logOnly:!0}),GO.forRoot([$O]),hC.forRoot()]]}),t})();Object(r.T)(),gt().bootstrapModule(dC).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zp1y:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("l7GE"),i=n("ZUHj");function o(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new s(t,n))}}class s{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new a(t,this.observables,this.project))}}class a extends r.a{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let o=0;o<r;o++){let t=e[o];this.add(Object(i.a)(this,t,void 0,o))}}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);